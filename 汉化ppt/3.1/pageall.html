<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head> <body onload="start()"><div style="background:#5c5c5f; color:#FFF"> <p align="center">&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;[&#x6DF1;&#x5BB9;Pubmed&#x6587;&#x732E;&#x68C0;&#x7D22;] &nbsp 1. &#x6B64;&#x5904;&#x53F3;&#x952E;&#xFF1A;&#x9009;&#x83DC;&#x5355;&#x3010;&#x7FFB;&#x6210;&#x4E2D;&#x6587;&#xFF08;&#x7B80;&#x4F53;&#xFF09;&#x3011; &nbsp &nbsp &nbsp  2. &#x7FFB;&#x8BD1;&#x540E;&#xFF0C;&#x6B64;&#x5904;&#x53F3;&#x952E;&#xFF1A;&#x9009;&#x83DC;&#x5355;&#x3010;&#x6253;&#x5370;...&#x3011;&#x6210;PDF&#x683C;&#x5F0F; <br>&#x5EFA;&#x8BAE;&#x5C4F;&#x5E55;&#x5206;&#x8FA8;&#x7387;&#xFF1A;1920X1080&#xFF1B;&#x5982;&#x679C;&#x5C4F;&#x5E55;&#x592A;&#x5C0F;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;Ctrl + &#x6216; Ctrl -&#x7F29;&#x653E;&#x7F51;&#x9875;&#x3002;</p></div><style type="text/css"> .txt { white-space:nowrap; }	 #f0 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f1 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f2 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f3 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f4 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f5 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f6 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f7 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f8 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f9 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f10 { font-family:sans-serif; font-weight:normal; font-style:normal; }  #f11 { font-family:sans-serif; font-weight:normal; font-style:normal; }  #f12 { font-family:sans-serif; font-weight:normal; font-style:normal; } 	#f13 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f14 { font-family:sans-serif; font-weight:normal; font-style:normal; } #f15 { font-family:sans-serif; font-weight:normal; font-style:normal; } 	#f16 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f17 { font-family:sans-serif; font-weight:normal; font-style:normal; } #f18 { font-family:sans-serif; font-weight:normal; font-style:normal; } #f19 { font-family:sans-serif; font-weight:normal; font-style:normal; }		#f20 { font-family:sans-serif; font-weight:normal; font-style:normal; }		</style><img id="background" style="position:absolute; left:0px; top:50px;" width="1440" height="1080" src="page1.png"> <img id="background" style="position:absolute; left:1440px; top:50px;" width="1440" height="1080" src="page-000001.png">
<div class="txt" style="position:absolute; left:1105px; top:68px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:203px; top:361px;"><span id="f9" style="font-size:55px;vertical-align:baseline;color:rgba(0,0,0,1);">Chapter 3: Abstract Data Type (ADT) and</span></div>
<div class="txt" style="position:absolute; left:254px; top:429px;"><span id="f9" style="font-size:55px;vertical-align:baseline;color:rgba(0,0,0,1);">Object-Oriented Programming (OOP)</span></div>
<div class="txt" style="position:absolute; left:164px; top:500px;"><span id="f19" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:596px; top:719px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Xu Hanchuan</span></div>
<div class="txt" style="position:absolute; left:585px; top:772px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(255,98,176,1);">xhc@hit.edu.cn</span></div>
<div class="txt" style="position:absolute; left:587px; top:877px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">March 12, 2019</span></div>
<img id="background" style="position:absolute; left:0px; top:1050px;" width="1440" height="1080" src="page2.png"> <img id="background" style="position:absolute; left:1440px; top:1050px;" width="1440" height="1080" src="page-000002.png">
<div class="txt" style="position:absolute; left:33px; top:1157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Outline</span></div>
<div class="txt" style="position:absolute; left:941px; top:1068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:1299px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">1. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Data type in programming languages</span></div>
<div class="txt" style="position:absolute; left:76px; top:1371px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">2. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Static vs. dynamic data types</span></div>
<div class="txt" style="position:absolute; left:76px; top:1443px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">3. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Type checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:1510px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">4. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutability &amp; Immutability(</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">可变性和不可变性）</span></div>
<div class="txt" style="position:absolute; left:76px; top:1587px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">5. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Snapshot diagram</span></div>
<div class="txt" style="position:absolute; left:76px; top:1659px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">6. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Complex data types: Arrays and Collections</span></div>
<div class="txt" style="position:absolute; left:76px; top:1731px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">7. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Useful immutable types</span></div>
<div class="txt" style="position:absolute; left:76px; top:1803px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">8. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Null references</span></div>
<div class="txt" style="position:absolute; left:76px; top:1875px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">9. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Summary</span></div>
<img id="background" style="position:absolute; left:0px; top:2050px;" width="1440" height="1080" src="page3.png"> <img id="background" style="position:absolute; left:1440px; top:2050px;" width="1440" height="1080" src="page-000003.png">
<div class="txt" style="position:absolute; left:33px; top:2157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Objective of this lecture</span></div>
<div class="txt" style="position:absolute; left:941px; top:2068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:2299px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">1. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Get to know basic knowledge about </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">data type, and static and</span></div>
<div class="txt" style="position:absolute; left:148px; top:2347px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">dynamic type checking </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">in programming language, especially</span></div>
<div class="txt" style="position:absolute; left:148px; top:2395px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java.</span></div>
<div class="txt" style="position:absolute; left:76px; top:2467px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">2. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Understand </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">mutability and mutable objects</span></div>
<div class="txt" style="position:absolute; left:76px; top:2539px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">3. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Identify aliasing and understand the dangers of mutability</span></div>
<div class="txt" style="position:absolute; left:76px; top:2611px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">4. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Use </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">immutability to improve correctness, clarity and</span></div>
<div class="txt" style="position:absolute; left:148px; top:2659px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">changeability</span></div>
<div class="txt" style="position:absolute; left:76px; top:2731px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">5. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Use snapshot diagram </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to demonstrate the state of specific time</span></div>
<div class="txt" style="position:absolute; left:148px; top:2779px;"><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">during a program’s execution.</span></div>
<div class="txt" style="position:absolute; left:76px; top:2851px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">6. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Use </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Arrays and Collections </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to deal with complex data types</span></div>
<div class="txt" style="position:absolute; left:76px; top:2923px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">7. </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Know the </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">harm of Null references and avoid it</span></div>
<img id="background" style="position:absolute; left:0px; top:3050px;" width="1440" height="1080" src="page4.png"> <img id="background" style="position:absolute; left:1440px; top:3050px;" width="1440" height="1080" src="page-000004.png">
<div class="txt" style="position:absolute; left:1105px; top:3068px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:265px; top:3379px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">1 Data type in programming</span></div>
<div class="txt" style="position:absolute; left:558px; top:3465px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">languages</span></div>
<img id="background" style="position:absolute; left:0px; top:4050px;" width="1440" height="1080" src="page5.png"> <img id="background" style="position:absolute; left:1440px; top:4050px;" width="1440" height="1080" src="page-000005.png">
<div class="txt" style="position:absolute; left:33px; top:4157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Types and Variables</span></div>
<div class="txt" style="position:absolute; left:941px; top:4068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:4297px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">type </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is a set of values, along with operations that can be performed</span></div>
<div class="txt" style="position:absolute; left:112px; top:4342px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">on those values.</span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">类型是一组值，以及可以对这些值执行的操作。</span></div>
<div class="txt" style="position:absolute; left:76px; top:4417px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Examples:</span></div>
<div class="txt" style="position:absolute; left:112px; top:4483px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: Truth value </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">(true or false).</span></div>
<div class="txt" style="position:absolute; left:112px; top:4544px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: Integer </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">(0, 1, -47).</span></div>
<div class="txt" style="position:absolute; left:112px; top:4604px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">double</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: Real number </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">(3.14, 1.0, -2.1)</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:112px; top:4665px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: Text </span><span id="f45" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(“hello”, “example”).</span></div>
<div class="txt" style="position:absolute; left:76px; top:4731px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Variables: Named location that stores a value of one particular type</span></div>
<div class="txt" style="position:absolute; left:112px; top:4797px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Form: </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">TYPE NAME</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">;</span></div>
<div class="txt" style="position:absolute; left:112px; top:4858px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Example: </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String foo</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">;</span></div>
<img id="background" style="position:absolute; left:0px; top:5050px;" width="1440" height="1080" src="page6.png"> <img id="background" style="position:absolute; left:1440px; top:5050px;" width="1440" height="1080" src="page-000006.png">
<div class="txt" style="position:absolute; left:33px; top:5157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Types in Java</span></div>
<div class="txt" style="position:absolute; left:941px; top:5068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:5294px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java has several </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">primitive types(</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">基本数据类型</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">) </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, among them:</span></div>
<div class="txt" style="position:absolute; left:112px; top:5360px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(for integers like </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">5 </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">-200</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, but limited to the range </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">± </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">2^31, or</span></div>
<div class="txt" style="position:absolute; left:148px; top:5403px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">roughly </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">± </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">2 billion)</span></div>
<div class="txt" style="position:absolute; left:112px; top:5463px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">long </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(for larger integers up to </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">± </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">2^63)</span></div>
<div class="txt" style="position:absolute; left:112px; top:5528px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(for true or false)</span></div>
<div class="txt" style="position:absolute; left:112px; top:5588px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">double </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(for floating-point numbers, which represent a subset of the real</span></div>
<div class="txt" style="position:absolute; left:148px; top:5632px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">numbers)</span></div>
<div class="txt" style="position:absolute; left:112px; top:5692px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">char </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(for single characters like </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">'A' </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">'$' </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:76px; top:5755px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java also has </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">object types(</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">对象数据类型</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">), </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">for example:</span></div>
<div class="txt" style="position:absolute; left:112px; top:5824px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">represents a sequence of characters.</span></div>
<div class="txt" style="position:absolute; left:112px; top:5885px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">BigInteger </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">represents an integer of arbitrary size.</span></div>
<div class="txt" style="position:absolute; left:76px; top:5951px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">By Java convention, primitive types are lowercase, while object</span></div>
<div class="txt" style="position:absolute; left:112px; top:5996px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">types start with a capital letter. </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">基本数据类型小写开始，对象数据类</span></div>
<div class="txt" style="position:absolute; left:112px; top:6044px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">型大写开始</span></div>
<img id="background" style="position:absolute; left:0px; top:6050px;" width="1440" height="1080" src="page7.png"> <img id="background" style="position:absolute; left:1440px; top:6050px;" width="1440" height="1080" src="page-000007.png">
<div class="txt" style="position:absolute; left:33px; top:6157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Types in Java</span></div>
<div class="txt" style="position:absolute; left:941px; top:6068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:53px; top:6389px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">Primitives</span></div>
<div class="txt" style="position:absolute; left:53px; top:6454px;"><span id="f14" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int, long, byte, short, char,</span></div>
<div class="txt" style="position:absolute; left:53px; top:6502px;"><span id="f14" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">float, double, boolean</span></div>
<div class="txt" style="position:absolute; left:53px; top:6565px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">No identity except their value</span></div>
<div class="txt" style="position:absolute; left:53px; top:6630px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Immutable</span></div>
<div class="txt" style="position:absolute; left:53px; top:6695px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">On stack, exist only when in use</span></div>
<div class="txt" style="position:absolute; left:53px; top:6757px;"><span id="f31" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Can’t achieve unity of expression</span></div>
<div class="txt" style="position:absolute; left:53px; top:6817px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Dirt cheap(</span><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">使用成本低</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:731px; top:6389px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">Object Reference Types</span></div>
<div class="txt" style="position:absolute; left:731px; top:6454px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Classes, interfaces, arrays, enums,</span></div>
<div class="txt" style="position:absolute; left:731px; top:6502px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">annotations</span></div>
<div class="txt" style="position:absolute; left:731px; top:6565px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Have identity distinct from value</span></div>
<div class="txt" style="position:absolute; left:731px; top:6630px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Some </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">mutable, </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">some not</span></div>
<div class="txt" style="position:absolute; left:731px; top:6695px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">On heap, garbage collected</span></div>
<div class="txt" style="position:absolute; left:731px; top:6757px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Unity of expression with generics</span></div>
<div class="txt" style="position:absolute; left:731px; top:6822px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">More costly</span></div>
<img id="background" style="position:absolute; left:0px; top:7050px;" width="1440" height="1080" src="page8.png"> <img id="background" style="position:absolute; left:1440px; top:7050px;" width="1440" height="1080" src="page-000008.png">
<div class="txt" style="position:absolute; left:33px; top:7157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Hierarchy of object types</span></div>
<div class="txt" style="position:absolute; left:941px; top:7068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:7294px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The root is </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">Object </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(all non-primitives are objects) </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Object</span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">类是所有类</span></div>
<div class="txt" style="position:absolute; left:112px; top:7342px;"><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的基类</span></div>
<div class="txt" style="position:absolute; left:112px; top:7411px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">All classes except </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Object </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">have one parent class, specified with an </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">extends</span></div>
<div class="txt" style="position:absolute; left:148px; top:7455px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">clause</span></div>
<div class="txt" style="position:absolute; left:220px; top:7522px;"><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">class Guitar </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">extends </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Instrument { ... }</span></div>
<div class="txt" style="position:absolute; left:76px; top:7590px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">extends </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">clause omitted, defaults to </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Object </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">所有类默认都继承了</span></div>
<div class="txt" style="position:absolute; left:112px; top:7638px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Object</span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">类</span></div>
<div class="txt" style="position:absolute; left:76px; top:7710px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A class is an instance of all its superclasses </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">子类是父类的一个实例，</span></div>
<div class="txt" style="position:absolute; left:112px; top:7758px;"><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">如 </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Student </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">和 </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Teacher </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">都可以设计为</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Person</span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的子类</span></div>
<div class="txt" style="position:absolute; left:112px; top:7827px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Inherits visible fields and methods from its superclasses</span></div>
<div class="txt" style="position:absolute; left:112px; top:7884px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Can override(</span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">重写</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) methods to change their behavior</span></div>
<img id="background" style="position:absolute; left:0px; top:8050px;" width="1440" height="1080" src="page9.png"> <img id="background" style="position:absolute; left:1440px; top:8050px;" width="1440" height="1080" src="page-000009.png">
<div class="txt" style="position:absolute; left:941px; top:8068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:8152px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Boxed primitives(</span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">基本数据类型的包装类</span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:76px; top:8294px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable containers for primitive types </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">将基本数据类型封装为对象</span></div>
<div class="txt" style="position:absolute; left:112px; top:8364px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Boolean, Integer, Short, Long, Character, Float, Double</span></div>
<div class="txt" style="position:absolute; left:76px; top:8429px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Canonical use case is collections</span></div>
<div class="txt" style="position:absolute; left:76px; top:8499px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f28" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Don‘t use boxed primitives unless you have to! </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">尽可能少用</span></div>
<div class="txt" style="position:absolute; left:76px; top:8571px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Language does auto-boxing and auto-unboxing </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">语言会自动进行转换</span></div>
<div class="txt" style="position:absolute; left:76px; top:8645px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">E.g.</span></div>
<div class="txt" style="position:absolute; left:76px; top:8719px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Integer&gt; list = </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">new </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList&lt;Integer&gt;();</span></div>
<div class="txt" style="position:absolute; left:76px; top:8791px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">list.add(1) ;</span></div>
<div class="txt" style="position:absolute; left:76px; top:8863px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">list.add(50);</span></div>
<div class="txt" style="position:absolute; left:76px; top:8931px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">1</span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">和</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">50</span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">不是对象类型，但编译能够通过，自动完成转换，但会降低效率</span></div>
<div class="txt" style="position:absolute; left:76px; top:9003px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">list.add(Integer.valueOf(1)); //</span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">自动完成的操作</span></div>
<div class="txt" style="position:absolute; left:76px; top:9079px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">list.add(Integer.valueOf(50));</span></div>
<img id="background" style="position:absolute; left:0px; top:10931px;" width="1440" height="1080" src="page10.png"> <img id="background" style="position:absolute; left:1440px; top:10931px;" width="1440" height="1080" src="page-000010.png">
<div class="txt" style="position:absolute; left:33px; top:11038px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Operators</span></div>
<div class="txt" style="position:absolute; left:941px; top:10949px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:11178px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Operators: symbols that perform simple computations</span></div>
<div class="txt" style="position:absolute; left:112px; top:11244px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Assignment: </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">=</span></div>
<div class="txt" style="position:absolute; left:112px; top:11305px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Addition: </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">+</span></div>
<div class="txt" style="position:absolute; left:112px; top:11365px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtraction: </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">-</span></div>
<div class="txt" style="position:absolute; left:112px; top:11426px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Multiplication: </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">*</span></div>
<div class="txt" style="position:absolute; left:112px; top:11486px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Division: </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">/</span></div>
<div class="txt" style="position:absolute; left:76px; top:11552px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Order of Operations: follows standard math rules:</span></div>
<div class="txt" style="position:absolute; left:112px; top:11615px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1. Parentheses </span><span id="f37" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">括号优先</span></div>
<div class="txt" style="position:absolute; left:112px; top:11676px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">2. Multiplication and division </span><span id="f37" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">乘除优先</span></div>
<div class="txt" style="position:absolute; left:112px; top:11740px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">3. Addition and subtraction</span></div>
<div class="txt" style="position:absolute; left:76px; top:11806px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">String concatenation (</span><span id="f47" style="font-size:24px;vertical-align:baseline;color:rgba(0,0,0,1);">+</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:112px; top:11873px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String text = "hello" + " world";</span></div>
<div class="txt" style="position:absolute; left:112px; top:11933px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">text = text + " number " + 5; </span><span id="f18" style="font-size:15px;vertical-align:sub;color:rgba(0,0,0,1);">// text = "hello world number 5"</span></div>
<img id="background" style="position:absolute; left:0px; top:12140px;" width="1440" height="1080" src="page11.png"> <img id="background" style="position:absolute; left:1440px; top:12140px;" width="1440" height="1080" src="page-000011.png">
<div class="txt" style="position:absolute; left:33px; top:12247px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Operations</span></div>
<div class="txt" style="position:absolute; left:941px; top:12158px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:12387px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:37px;vertical-align:baseline;color:rgba(0,0,0,1);">Operations </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">are functions that take inputs and produce outputs (and</span></div>
<div class="txt" style="position:absolute; left:112px; top:12437px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">sometimes change the values themselves). There are three forms:</span></div>
<div class="txt" style="position:absolute; left:112px; top:12501px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1. As an infix, prefix, or postfix </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">operator</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. For example, </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a + b </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">invokes the</span></div>
<div class="txt" style="position:absolute; left:148px; top:12541px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">operation + : </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">× </span><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">int → int </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">操作符的前、后、中缀</span></div>
<div class="txt" style="position:absolute; left:112px; top:12605px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">2. As a </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">method </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">of an object. For example, </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">bigint1.add(bigint2) </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">calls</span></div>
<div class="txt" style="position:absolute; left:148px; top:12645px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">the operation add: </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">BigInteger </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">× </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">BigInteger </span><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">→ </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">BigInteger </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">对象的</span></div>
<div class="txt" style="position:absolute; left:148px; top:12688px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">方法</span></div>
<div class="txt" style="position:absolute; left:112px; top:12751px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">3. As a </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">function</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. For example, </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Math.sin(theta) </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">calls the operation</span></div>
<div class="txt" style="position:absolute; left:148px; top:12794px;"><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sin</span><span id="f60" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: </span><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">double → double</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. Here, </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Math </span><span id="f65" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">is not an object. It’s the class that</span></div>
<div class="txt" style="position:absolute; left:148px; top:12835px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">contains the </span><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sin </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">function. </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">函数调用</span></div>
<img id="background" style="position:absolute; left:0px; top:13349px;" width="1440" height="1080" src="page12.png"> <img id="background" style="position:absolute; left:1440px; top:13349px;" width="1440" height="1080" src="page-000012.png">
<div class="txt" style="position:absolute; left:941px; top:13367px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:13456px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Overloading operators/operations </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">重载运算符和操作</span></div>
<div class="txt" style="position:absolute; left:76px; top:13596px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Some operations are overloaded </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">in the sense that the same</span></div>
<div class="txt" style="position:absolute; left:112px; top:13641px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">operation name is used for different types. </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">相同的操作名称用于不同</span></div>
<div class="txt" style="position:absolute; left:112px; top:13689px;"><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的数据类型</span></div>
<div class="txt" style="position:absolute; left:76px; top:13764px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">The arithmetic operators </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">+, -, *, / </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">are heavily overloaded for</span></div>
<div class="txt" style="position:absolute; left:112px; top:13814px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the numeric primitive types in Java.</span></div>
<div class="txt" style="position:absolute; left:76px; top:13884px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Methods can also be overloaded</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">. Most programming languages</span></div>
<div class="txt" style="position:absolute; left:112px; top:13934px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">have some degree of overloading.</span></div>
<div class="txt" style="position:absolute; left:76px; top:14076px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(to be discussed in Section 3.3 OOP)</span></div>
<img id="background" style="position:absolute; left:0px; top:14558px;" width="1440" height="1080" src="page13.png"> <img id="background" style="position:absolute; left:1440px; top:14558px;" width="1440" height="1080" src="page-000013.png">
<div class="txt" style="position:absolute; left:1105px; top:14576px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:230px; top:14973px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">2 Static vs. dynamic data types</span></div>
<img id="background" style="position:absolute; left:0px; top:15767px;" width="1440" height="1080" src="page14.png"> <img id="background" style="position:absolute; left:1440px; top:15767px;" width="1440" height="1080" src="page-000014.png">
<div class="txt" style="position:absolute; left:941px; top:15785px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:15874px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Static Typing vs. Dynamic Typing</span></div>
<div class="txt" style="position:absolute; left:76px; top:16014px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java is a statically-typed language.</span></div>
<div class="txt" style="position:absolute; left:112px; top:16081px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The types of all variables are known at compile time (before the program</span></div>
<div class="txt" style="position:absolute; left:148px; top:16124px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">runs), and the compiler can therefore deduce the types of all expressions</span></div>
<div class="txt" style="position:absolute; left:148px; top:16163px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">as well. </span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">在编译时需要知道所有变量的类型，编译器可以推断所有表达式的</span></div>
<div class="txt" style="position:absolute; left:148px; top:16206px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">类型</span></div>
<div class="txt" style="position:absolute; left:112px; top:16269px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">If </span><span id="f29" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f29" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">b </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">are declared as </span><span id="f29" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, then the compiler concludes that </span><span id="f29" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a+b </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">is</span></div>
<div class="txt" style="position:absolute; left:148px; top:16314px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">also an </span><span id="f29" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:112px; top:16375px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f42" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The Eclipse environment does this while you’re writing the code, in fact,</span></div>
<div class="txt" style="position:absolute; left:148px; top:16414px;"><span id="f42" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">so you find out about many errors while you’re still typing. </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">IDE</span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">支持输入</span></div>
<div class="txt" style="position:absolute; left:148px; top:16457px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">时支持语法检查</span></div>
<div class="txt" style="position:absolute; left:76px; top:16527px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">In dynamically-typed languages like Python, this kind of checking</span></div>
<div class="txt" style="position:absolute; left:112px; top:16576px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is deferred until runtime (while the program is running).</span></div>
<img id="background" style="position:absolute; left:0px; top:16976px;" width="1440" height="1080" src="page15.png"> <img id="background" style="position:absolute; left:1440px; top:16976px;" width="1440" height="1080" src="page-000015.png">
<div class="txt" style="position:absolute; left:1105px; top:16994px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:461px; top:17391px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">3 Type checking</span></div>
<img id="background" style="position:absolute; left:0px; top:18185px;" width="1440" height="1080" src="page16.png"> <img id="background" style="position:absolute; left:1440px; top:18185px;" width="1440" height="1080" src="page-000016.png">
<div class="txt" style="position:absolute; left:941px; top:18203px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:18292px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Static Checking and Dynamic Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:18432px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Three kinds of automatic checking that a language can provide:</span></div>
<div class="txt" style="position:absolute; left:112px; top:18499px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Static checking</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: the bug is found automatically before the program even</span></div>
<div class="txt" style="position:absolute; left:148px; top:18542px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">runs.</span></div>
<div class="txt" style="position:absolute; left:112px; top:18602px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Dynamic checking</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: the bug is found automatically when the code is</span></div>
<div class="txt" style="position:absolute; left:148px; top:18646px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">executed.</span></div>
<div class="txt" style="position:absolute; left:112px; top:18706px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">No checking</span><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: the language doesn’t help you find the error at all. You have</span></div>
<div class="txt" style="position:absolute; left:148px; top:18749px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">to watch for it yourself, or end up with wrong answers.</span></div>
<div class="txt" style="position:absolute; left:76px; top:18875px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Needless to say, catching a bug statically is better than catching it</span></div>
<div class="txt" style="position:absolute; left:112px; top:18925px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">dynamically, and catching it dynamically is better than not</span></div>
<div class="txt" style="position:absolute; left:112px; top:18973px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">catching it at all.</span></div>
<img id="background" style="position:absolute; left:0px; top:19394px;" width="1440" height="1080" src="page17.png"> <img id="background" style="position:absolute; left:1440px; top:19394px;" width="1440" height="1080" src="page-000017.png">
<div class="txt" style="position:absolute; left:33px; top:19501px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mismatched Types</span></div>
<div class="txt" style="position:absolute; left:76px; top:19641px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java verifies that types always match:</span></div>
<div class="txt" style="position:absolute; left:76px; top:19785px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">String five = 5; // ERROR!</span></div>
<div class="txt" style="position:absolute; left:112px; top:19924px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">test.java.2: incompatible types</span></div>
<div class="txt" style="position:absolute; left:112px; top:19984px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">found: </span><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int</span></div>
<div class="txt" style="position:absolute; left:112px; top:20044px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">required: </span><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">java.lang.String</span></div>
<div class="txt" style="position:absolute; left:112px; top:20105px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String five = 5;</span></div>
<div class="txt" style="position:absolute; left:941px; top:19412px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<img id="background" style="position:absolute; left:0px; top:20603px;" width="1440" height="1080" src="page18.png"> <img id="background" style="position:absolute; left:1440px; top:20603px;" width="1440" height="1080" src="page-000018.png">
<div class="txt" style="position:absolute; left:941px; top:20621px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:20705px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Conversion by casting </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">类型转换</span></div>
<div class="txt" style="position:absolute; left:76px; top:20851px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int a = 2;</span></div>
<div class="txt" style="position:absolute; left:76px; top:20923px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">double a = 2;</span></div>
<div class="txt" style="position:absolute; left:76px; top:20995px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int a = 18.7;</span></div>
<div class="txt" style="position:absolute; left:76px; top:21067px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int a = (int)18.7;</span></div>
<div class="txt" style="position:absolute; left:76px; top:21139px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">double a = 2/3;</span></div>
<div class="txt" style="position:absolute; left:76px; top:21212px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">double a = (double)2/3;</span></div>
<div class="txt" style="position:absolute; left:796px; top:20851px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">// a = 2</span></div>
<div class="txt" style="position:absolute; left:796px; top:20923px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">// a = 2.0 (Implicit)</span></div>
<div class="txt" style="position:absolute; left:796px; top:20995px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">// ERROR</span></div>
<div class="txt" style="position:absolute; left:796px; top:21067px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">// a = 18</span></div>
<div class="txt" style="position:absolute; left:796px; top:21139px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">// a = 0.0</span></div>
<div class="txt" style="position:absolute; left:796px; top:21212px;"><span id="f25" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">// a = 0.6666…</span></div>
<img id="background" style="position:absolute; left:0px; top:21812px;" width="1440" height="1080" src="page19.png"> <img id="background" style="position:absolute; left:1440px; top:21812px;" width="1440" height="1080" src="page-000019.png">
<div class="txt" style="position:absolute; left:33px; top:21919px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Static checking</span></div>
<div class="txt" style="position:absolute; left:941px; top:21830px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:22059px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Static checking means checking for bugs at compile time.</span></div>
<div class="txt" style="position:absolute; left:76px; top:22128px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Bugs are the bane(</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">灾祸</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">) of programming.</span></div>
<div class="txt" style="position:absolute; left:76px; top:22203px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Static typing prevents a large class of bugs from infecting your</span></div>
<div class="txt" style="position:absolute; left:112px; top:22253px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">program: to be precise, bugs caused by applying an operation to the</span></div>
<div class="txt" style="position:absolute; left:112px; top:22296px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">wrong types of arguments. </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">避免因使用错误类型的操作而导致的</span><span id="f28" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">bug</span></div>
<div class="txt" style="position:absolute; left:76px; top:22371px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If you write a broken line of code like:</span></div>
<div class="txt" style="position:absolute; left:620px; top:22445px;"><span id="f32" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">"5" * "6"</span></div>
<div class="txt" style="position:absolute; left:76px; top:22517px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">that tries to multiply two strings, then static typing will catch this error</span></div>
<div class="txt" style="position:absolute; left:76px; top:22565px;"><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">while you’re still programming, rather than waiting until the line is</span></div>
<div class="txt" style="position:absolute; left:76px; top:22613px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">reached during execution.</span></div>
<img id="background" style="position:absolute; left:0px; top:23021px;" width="1440" height="1080" src="page20.png"> <img id="background" style="position:absolute; left:1440px; top:23021px;" width="1440" height="1080" src="page-000020.png">
<div class="txt" style="position:absolute; left:33px; top:23128px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Static checking</span></div>
<div class="txt" style="position:absolute; left:941px; top:23039px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:23268px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Syntax errors</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, like extra punctuation or spurious words. Even</span></div>
<div class="txt" style="position:absolute; left:112px; top:23318px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">dynamically-typed languages like Python do this kind of static</span></div>
<div class="txt" style="position:absolute; left:112px; top:23361px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">checking. </span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">动态类型的语言也会进行此类检查</span></div>
<div class="txt" style="position:absolute; left:76px; top:23436px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wrong names</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, like </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Math.sine(2) </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">. (The right name is </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">sin</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:76px; top:23507px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wrong number of arguments</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, like </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Math.sin(30, 20) </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:76px; top:23580px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wrong argument types</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, like </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Math.sin("30") </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:76px; top:23652px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wrong return types</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, like </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">return "30"</span><span id="f48" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">; from a function that’s</span></div>
<div class="txt" style="position:absolute; left:112px; top:23701px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">declared to return an </span><span id="f26" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<img id="background" style="position:absolute; left:0px; top:24230px;" width="1440" height="1080" src="page21.png"> <img id="background" style="position:absolute; left:1440px; top:24230px;" width="1440" height="1080" src="page-000021.png">
<div class="txt" style="position:absolute; left:33px; top:24337px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Dynamic checking</span></div>
<div class="txt" style="position:absolute; left:941px; top:24248px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:24476px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Illegal argument values</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">. For example, the integer expression </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">x/y </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is</span></div>
<div class="txt" style="position:absolute; left:112px; top:24526px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">only erroneous when </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">y </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is actually </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">zero</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">; otherwise it works. So in this</span></div>
<div class="txt" style="position:absolute; left:112px; top:24574px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">expression, </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">divide-by-zero </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is not a static error, but a dynamic</span></div>
<div class="txt" style="position:absolute; left:112px; top:24618px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">error. </span><span id="f33" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">非法的参数</span></div>
<div class="txt" style="position:absolute; left:76px; top:24693px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Unrepresentable return values</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, i.e., when the specific return value</span></div>
<div class="txt" style="position:absolute; left:112px; top:24743px;"><span id="f38" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">can’t be represented in the type.</span></div>
<div class="txt" style="position:absolute; left:76px; top:24813px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Out-of-range indexes</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, e.g., using a negative or too-large index on a</span></div>
<div class="txt" style="position:absolute; left:112px; top:24858px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">string. </span><span id="f33" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">超出范围的索引值</span></div>
<div class="txt" style="position:absolute; left:76px; top:24930px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Calling a method on a </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">null </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object reference. </span><span id="f33" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">调用空对象的方法</span></div>
<img id="background" style="position:absolute; left:0px; top:25439px;" width="1440" height="1080" src="page22.png"> <img id="background" style="position:absolute; left:1440px; top:25439px;" width="1440" height="1080" src="page-000022.png">
<div class="txt" style="position:absolute; left:33px; top:25546px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Static vs. Dynamic Checking</span></div>
<div class="txt" style="position:absolute; left:941px; top:25457px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:25686px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Static checking tends to be about </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">types, </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">errors that are independent</span></div>
<div class="txt" style="position:absolute; left:112px; top:25731px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">of the specific value that a variable has.</span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">静态检查针对类型，与变量</span></div>
<div class="txt" style="position:absolute; left:112px; top:25779px;"><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">特定值无关的错误</span></div>
<div class="txt" style="position:absolute; left:112px; top:25848px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Static typing guarantees that a variable will have </span><span id="f26" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">some </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">value from that set,</span></div>
<div class="txt" style="position:absolute; left:148px; top:25888px;"><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">but we don’t know until runtime exactly which value it has. </span><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">某些变量的值</span></div>
<div class="txt" style="position:absolute; left:148px; top:25931px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">只有运行时才会知道</span></div>
<div class="txt" style="position:absolute; left:112px; top:25996px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">So if the error would be caused only by certain values, like divide-by-zero</span></div>
<div class="txt" style="position:absolute; left:148px; top:26039px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">or index-out-of-</span><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">range then the compiler won’t raise a static error about it.</span></div>
<div class="txt" style="position:absolute; left:76px; top:26104px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Dynamic checking, by contrast, tends to be about errors caused by</span></div>
<div class="txt" style="position:absolute; left:112px; top:26150px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">specific </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">values. </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">动态检查针对由特定值引起的错误</span></div>
<img id="background" style="position:absolute; left:0px; top:26648px;" width="1440" height="1080" src="page23.png"> <img id="background" style="position:absolute; left:1440px; top:26648px;" width="1440" height="1080" src="page-000023.png">
<div class="txt" style="position:absolute; left:941px; top:26666px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:26755px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Primitive Types Are Not True Numbers</span></div>
<div class="txt" style="position:absolute; left:76px; top:26895px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">One trap in Java </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and many other programming languages </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is</span></div>
<div class="txt" style="position:absolute; left:112px; top:26940px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">that its primitive numeric types have corner cases(</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">特例</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">) that do not</span></div>
<div class="txt" style="position:absolute; left:112px; top:26993px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">behave like the integers and real numbers we’re used to.</span></div>
<div class="txt" style="position:absolute; left:76px; top:27063px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">As a result, some errors that really should be dynamically checked</span></div>
<div class="txt" style="position:absolute; left:112px; top:27113px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">are not checked at all.</span></div>
<div class="txt" style="position:absolute; left:112px; top:27177px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Integer division</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">5/2 </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">does not return a fraction, it returns a truncated</span></div>
<div class="txt" style="position:absolute; left:148px; top:27221px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">integer.</span></div>
<div class="txt" style="position:absolute; left:112px; top:27281px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Integer overflow</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. If the computation result is too positive or too negative</span></div>
<div class="txt" style="position:absolute; left:148px; top:27324px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">to fit in that finite range, it quietly </span><span id="f40" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">overflows </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">returns a wrong answer.</span></div>
<div class="txt" style="position:absolute; left:148px; top:27368px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(no </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">static / dynamic checking!) </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">e.g., </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int big = 200000*200000;</span></div>
<div class="txt" style="position:absolute; left:112px; top:27428px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Special values in floating-point types</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">NaN </span><span id="f57" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(“Not a Number”),</span></div>
<div class="txt" style="position:absolute; left:148px; top:27471px;"><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">POSITIVE_INFINITY</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, and </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">NEGATIVE_INFINITY</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:148px; top:27528px;"><span id="f63" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f32" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Int a=resulOfFunction(XX); // E.g., -9</span></div>
<div class="txt" style="position:absolute; left:148px; top:27574px;"><span id="f63" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f32" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">the result of </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Math.</span><span id="f40" style="font-size:29px;vertical-align:baseline;color:rgba(0,0,0,1);">sqrt(a) is </span><span id="f40" style="font-size:29px;vertical-align:baseline;color:rgba(0,0,255,1);">NaN, </span><span id="f32" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">not a dynamic error!</span></div>
<div class="txt" style="position:absolute; left:148px; top:27620px;"><span id="f57" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">What is the result of Math.</span><span id="f40" style="font-size:29px;vertical-align:baseline;color:rgba(0,0,0,1);">sqrt(a) + 6 ?</span></div>
<img id="background" style="position:absolute; left:0px; top:27857px;" width="1440" height="1080" src="page24.png"> <img id="background" style="position:absolute; left:1440px; top:27857px;" width="1440" height="1080" src="page-000024.png">
<div class="txt" style="position:absolute; left:1105px; top:27875px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:246px; top:28272px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">4 Mutability and Immutability</span></div>
<img id="background" style="position:absolute; left:0px; top:29066px;" width="1440" height="1080" src="page25.png"> <img id="background" style="position:absolute; left:1440px; top:29066px;" width="1440" height="1080" src="page-000025.png">
<div class="txt" style="position:absolute; left:33px; top:29168px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Assignment </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">赋值</span></div>
<div class="txt" style="position:absolute; left:76px; top:29313px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Use “</span><span id="f17" style="font-size:24px;vertical-align:baseline;color:rgba(0,0,0,1);">=</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">” to give variables a value</span></div>
<div class="txt" style="position:absolute; left:76px; top:29385px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Example:</span></div>
<div class="txt" style="position:absolute; left:112px; top:29452px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String foo;</span></div>
<div class="txt" style="position:absolute; left:112px; top:29512px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">foo = “IAP 6.092”;</span></div>
<div class="txt" style="position:absolute; left:941px; top:29084px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:29650px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Assignment can be combined with a variable declaration</span></div>
<div class="txt" style="position:absolute; left:76px; top:29722px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Example:</span></div>
<div class="txt" style="position:absolute; left:112px; top:29789px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">double badPi = 3.14;</span></div>
<div class="txt" style="position:absolute; left:112px; top:29849px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean isJanuary = true;</span></div>
<img id="background" style="position:absolute; left:0px; top:30275px;" width="1440" height="1080" src="page26.png"> <img id="background" style="position:absolute; left:1440px; top:30275px;" width="1440" height="1080" src="page-000026.png">
<div class="txt" style="position:absolute; left:941px; top:30293px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:30382px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Changing a variable or its value</span></div>
<div class="txt" style="position:absolute; left:76px; top:30522px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">What’s the distinction between changing a variable and changing a</span></div>
<div class="txt" style="position:absolute; left:112px; top:30567px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">value? </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">改变变量和改变值的区别</span></div>
<div class="txt" style="position:absolute; left:112px; top:30637px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">When you assign to a variable, you’re changing where the variable’s</span></div>
<div class="txt" style="position:absolute; left:148px; top:30676px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">arrow points. You can point it to a different value. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">对变量赋值是在改变变</span></div>
<div class="txt" style="position:absolute; left:148px; top:30719px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">量的指向，指向不同的值</span></div>
<div class="txt" style="position:absolute; left:112px; top:30784px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">When you assign to the contents of a mutable value </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">such as an array or</span></div>
<div class="txt" style="position:absolute; left:148px; top:30823px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">list </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">– you’re changing references inside that value. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">改变可变变量的内容时</span></div>
<div class="txt" style="position:absolute; left:148px; top:30866px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">，是在改变变量内部内容的引用</span></div>
<div class="txt" style="position:absolute; left:76px; top:30936px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Change is a necessary evil.</span></div>
<div class="txt" style="position:absolute; left:76px; top:31008px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Good programmers avoid things that change, because they may</span></div>
<div class="txt" style="position:absolute; left:112px; top:31058px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">change unexpectedly.</span></div>
<img id="background" style="position:absolute; left:0px; top:31484px;" width="1440" height="1080" src="page27.png"> <img id="background" style="position:absolute; left:1440px; top:31484px;" width="1440" height="1080" src="page-000027.png">
<div class="txt" style="position:absolute; left:33px; top:31586px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutability </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">不变性</span></div>
<div class="txt" style="position:absolute; left:941px; top:31502px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:31728px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Immutability is a major design principle. </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">不变性是一种主要的设计原则</span></div>
<div class="txt" style="position:absolute; left:76px; top:31803px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable types are types whose values can never change once they</span></div>
<div class="txt" style="position:absolute; left:112px; top:31848px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">have been created. </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">不变数据类型创建完后，值不可修改</span></div>
<div class="txt" style="position:absolute; left:112px; top:31918px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Java also gives us </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">immutable references</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: variables that are assigned once and</span></div>
<div class="txt" style="position:absolute; left:148px; top:31957px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">never reassigned. </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">不变引用，一旦指定引用位置，不可再次指定</span></div>
<div class="txt" style="position:absolute; left:76px; top:32032px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">To make a reference immutable, declare it with the keyword </span><span id="f35" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">final</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">:</span></div>
<div class="txt" style="position:absolute; left:561px; top:32106px;"><span id="f35" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">final int n = 5;</span></div>
<div class="txt" style="position:absolute; left:76px; top:32176px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f42" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If the Java compiler isn’t convinced that your final variable will only</span></div>
<div class="txt" style="position:absolute; left:112px; top:32226px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">be assigned once at runtime, then it will produce a compiler error. So</span></div>
<div class="txt" style="position:absolute; left:112px; top:32270px;"><span id="f35" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">final </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">gives you static checking for immutable references. </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Final</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">关键</span></div>
<div class="txt" style="position:absolute; left:112px; top:32318px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">字对不可变引用提供了静态检查的支持</span></div>
<img id="background" style="position:absolute; left:0px; top:32693px;" width="1440" height="1080" src="page28.png"> <img id="background" style="position:absolute; left:1440px; top:32693px;" width="1440" height="1080" src="page-000028.png">
<div class="txt" style="position:absolute; left:33px; top:32800px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutability</span></div>
<div class="txt" style="position:absolute; left:941px; top:32711px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:32940px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">It’s good practice to use </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">final </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">for declaring the parameters of a</span></div>
<div class="txt" style="position:absolute; left:112px; top:32985px;"><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">method and as many local variables as possible. </span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">利用</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">final</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">来声明方</span></div>
<div class="txt" style="position:absolute; left:112px; top:33033px;"><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">法的参数和局部变量。</span></div>
<div class="txt" style="position:absolute; left:76px; top:33180px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Like the type of the variable, </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">these declarations are important</span></div>
<div class="txt" style="position:absolute; left:112px; top:33230px;"><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">documentation, </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">useful to the reader of the code and statically</span></div>
<div class="txt" style="position:absolute; left:112px; top:33273px;"><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">checked by the compiler. </span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">有利于代码理解和编译器的静态检查</span></div>
<div class="txt" style="position:absolute; left:76px; top:33420px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Note:</span></div>
<div class="txt" style="position:absolute; left:112px; top:33487px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f42" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,255,1);">final </span><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">class </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">declaration means it </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">cannot be inherited.</span></div>
<div class="txt" style="position:absolute; left:112px; top:33547px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f42" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,255,1);">final variable </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">means it always contains the </span><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">same value/reference</span></div>
<div class="txt" style="position:absolute; left:148px; top:33591px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">but </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">cannot be changed;</span></div>
<div class="txt" style="position:absolute; left:112px; top:33651px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f42" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,255,1);">final method </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">means it cannot be </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">overridden </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">by subclasses;</span></div>
<img id="background" style="position:absolute; left:0px; top:33902px;" width="1440" height="1080" src="page29.png"> <img id="background" style="position:absolute; left:1440px; top:33902px;" width="1440" height="1080" src="page-000029.png">
<div class="txt" style="position:absolute; left:33px; top:34009px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutability and Immutability</span></div>
<div class="txt" style="position:absolute; left:941px; top:33920px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:34149px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Objects are immutable</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">: once created, they always represent the</span></div>
<div class="txt" style="position:absolute; left:112px; top:34199px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">same value.</span></div>
<div class="txt" style="position:absolute; left:76px; top:34269px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Objects are mutable</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">: they have methods that change the value of the</span></div>
<div class="txt" style="position:absolute; left:112px; top:34319px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object.</span></div>
<img id="background" style="position:absolute; left:0px; top:35111px;" width="1440" height="1080" src="page30.png"> <img id="background" style="position:absolute; left:1440px; top:35111px;" width="1440" height="1080" src="page-000030.png">
<div class="txt" style="position:absolute; left:33px; top:35218px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">String as an immutable type</span></div>
<div class="txt" style="position:absolute; left:941px; top:35129px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:35358px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">String </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an example of an immutable type.</span></div>
<div class="txt" style="position:absolute; left:76px; top:35430px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">String </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object always represents the same string.</span></div>
<div class="txt" style="position:absolute; left:76px; top:35502px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Since </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">String </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is immutable, once created, a </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">String </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object always</span></div>
<div class="txt" style="position:absolute; left:112px; top:35552px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">has the same value.</span></div>
<div class="txt" style="position:absolute; left:76px; top:35622px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">To add something to the end of a </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">String</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, you have to create a new</span></div>
<div class="txt" style="position:absolute; left:112px; top:35671px;"><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">String </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object:</span></div>
<div class="txt" style="position:absolute; left:893px; top:36106px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Note: this is a snapshot diagram</span></div>
<img id="background" style="position:absolute; left:0px; top:36320px;" width="1440" height="1080" src="page31.png"> <img id="background" style="position:absolute; left:1440px; top:36320px;" width="1440" height="1080" src="page-000031.png">
<div class="txt" style="position:absolute; left:941px; top:36338px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:36427px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">StringBuilder as a mutable type</span></div>
<div class="txt" style="position:absolute; left:76px; top:36567px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">StringBuilder </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an example of a mutable type.</span></div>
<div class="txt" style="position:absolute; left:76px; top:36639px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">It has methods to delete parts of the string, insert or replace</span></div>
<div class="txt" style="position:absolute; left:112px; top:36689px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">characters, etc.</span></div>
<div class="txt" style="position:absolute; left:76px; top:36759px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">This class has methods that change the value of the object, rather</span></div>
<div class="txt" style="position:absolute; left:112px; top:36809px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">than just returning new values:</span></div>
<img id="background" style="position:absolute; left:0px; top:37529px;" width="1440" height="1080" src="page32.png"> <img id="background" style="position:absolute; left:1440px; top:37529px;" width="1440" height="1080" src="page-000032.png">
<div class="txt" style="position:absolute; left:33px; top:37636px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutability and Immutability</span></div>
<div class="txt" style="position:absolute; left:941px; top:37547px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:37776px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">So what? In both cases, you end up with </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">s </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">sb </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">referring to the</span></div>
<div class="txt" style="position:absolute; left:112px; top:37825px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">string of characters </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">"ab"</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:112px; top:37891px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The difference between mutability and immutability </span><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">doesn’t matter much</span></div>
<div class="txt" style="position:absolute; left:148px; top:37930px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">when there’s only one reference to the object. </span><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">当仅有一个引用时，二者</span></div>
<div class="txt" style="position:absolute; left:148px; top:37973px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">的使用区别不大</span></div>
<div class="txt" style="position:absolute; left:76px; top:38043px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">But there are big differences in how they behave when there are</span></div>
<div class="txt" style="position:absolute; left:112px; top:38088px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">other references to the object.</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">当有多个引用时，二者的区别很大</span></div>
<div class="txt" style="position:absolute; left:112px; top:38157px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">For example, when another variable </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">t </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">points to the same </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">object as</span></div>
<div class="txt" style="position:absolute; left:148px; top:38201px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, and another variable </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">tb </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">points to the same </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">StringBuilder </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">as </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sb </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, then</span></div>
<div class="txt" style="position:absolute; left:148px; top:38244px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">the differences between the immutable and mutable objects become more</span></div>
<div class="txt" style="position:absolute; left:148px; top:38287px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">evident.</span></div>
<img id="background" style="position:absolute; left:0px; top:38738px;" width="1440" height="1080" src="page33.png"> <img id="background" style="position:absolute; left:1440px; top:38738px;" width="1440" height="1080" src="page-000033.png">
<div class="txt" style="position:absolute; left:33px; top:38845px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Advantage of mutable types</span></div>
<div class="txt" style="position:absolute; left:941px; top:38756px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:38985px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Using immutable strings, this makes a lot of temporary copies</span></div>
<div class="txt" style="position:absolute; left:112px; top:39051px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The first number of the string ( </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">"0" </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) is actually copied </span><span id="f21" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">n </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">times in the</span></div>
<div class="txt" style="position:absolute; left:148px; top:39095px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">course of building up the final string, the second number is copied </span><span id="f21" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">n</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-1</span></div>
<div class="txt" style="position:absolute; left:148px; top:39138px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">times, and so on.</span></div>
<div class="txt" style="position:absolute; left:112px; top:39196px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">It actually costs O(</span><span id="f21" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">n</span><span id="f8" style="font-size:24px;vertical-align:super;color:rgba(0,0,0,1);">2</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) time just to do all that copying, even though we only</span></div>
<div class="txt" style="position:absolute; left:148px; top:39242px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">concatenated </span><span id="f21" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">n </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">elements.</span></div>
<div class="txt" style="position:absolute; left:76px; top:39308px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">StringBuilder </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is designed to minimize this copying.</span></div>
<div class="txt" style="position:absolute; left:112px; top:39374px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">It uses a simple but clever internal data structure to avoid doing any</span></div>
<div class="txt" style="position:absolute; left:148px; top:39417px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">copying at all until the very end, when you ask for the </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">final String </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">with</span></div>
<div class="txt" style="position:absolute; left:148px; top:39460px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">a </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">toString() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">call:</span></div>
<img id="background" style="position:absolute; left:0px; top:39947px;" width="1440" height="1080" src="page34.png"> <img id="background" style="position:absolute; left:1440px; top:39947px;" width="1440" height="1080" src="page-000034.png">
<div class="txt" style="position:absolute; left:33px; top:40054px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Advantage of mutable types</span></div>
<div class="txt" style="position:absolute; left:941px; top:39965px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:40194px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Getting good performance is one reason why we use mutable</span></div>
<div class="txt" style="position:absolute; left:112px; top:40244px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">objects.</span></div>
<div class="txt" style="position:absolute; left:76px; top:40314px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Another is convenient sharing: </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">two parts of your program can</span></div>
<div class="txt" style="position:absolute; left:112px; top:40364px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">communicate more conveniently by sharing a common mutable data</span></div>
<div class="txt" style="position:absolute; left:112px; top:40412px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">structure.</span></div>
<div class="txt" style="position:absolute; left:76px; top:40482px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">“Global variables”</span></div>
<div class="txt" style="position:absolute; left:76px; top:40626px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">But you must have known the disadvantages of global variables…</span></div>
<img id="background" style="position:absolute; left:0px; top:41156px;" width="1440" height="1080" src="page35.png"> <img id="background" style="position:absolute; left:1440px; top:41156px;" width="1440" height="1080" src="page-000035.png">
<div class="txt" style="position:absolute; left:33px; top:41263px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Risks of mutation</span></div>
<div class="txt" style="position:absolute; left:941px; top:41174px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:41403px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Since mutable types seem much more powerful than immutable</span></div>
<div class="txt" style="position:absolute; left:112px; top:41453px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">types, why on earth would you choose the immutable one?</span></div>
<div class="txt" style="position:absolute; left:112px; top:41517px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">StringBuilder </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">should be able to do everything that </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">can do, plus</span></div>
<div class="txt" style="position:absolute; left:148px; top:41561px;"><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">set() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">append() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and everything else.</span></div>
<div class="txt" style="position:absolute; left:76px; top:41627px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The answer is that </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">immutable types are safer from bugs, easier to</span></div>
<div class="txt" style="position:absolute; left:112px; top:41676px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">understand, and more ready for change.</span></div>
<div class="txt" style="position:absolute; left:112px; top:41741px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutability makes it harder to understand what your program is doing,</span></div>
<div class="txt" style="position:absolute; left:148px; top:41785px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and much harder to enforce contracts.</span></div>
<div class="txt" style="position:absolute; left:76px; top:41911px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Tradeoff between performance and safety?</span></div>
<img id="background" style="position:absolute; left:0px; top:42365px;" width="1440" height="1080" src="page36.png"> <img id="background" style="position:absolute; left:1440px; top:42365px;" width="1440" height="1080" src="page-000036.png">
<div class="txt" style="position:absolute; left:941px; top:42383px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:42472px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Risky example #1: passing mutable values</span></div>
<div class="txt" style="position:absolute; left:894px; top:42772px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutating the list directly for</span></div>
<div class="txt" style="position:absolute; left:980px; top:42820px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">better performance</span></div>
<div class="txt" style="position:absolute; left:896px; top:43180px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">But, what will happen here?</span></div>
<img id="background" style="position:absolute; left:0px; top:43574px;" width="1440" height="1080" src="page37.png"> <img id="background" style="position:absolute; left:1440px; top:43574px;" width="1440" height="1080" src="page-000037.png">
<div class="txt" style="position:absolute; left:33px; top:43681px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Risk</span></div>
<div class="txt" style="position:absolute; left:941px; top:43592px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:43821px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Safe from bugs?</span></div>
<div class="txt" style="position:absolute; left:112px; top:43887px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">In this example, it’s easy to blame the implementer of </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sumAbsolute() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">for</span></div>
<div class="txt" style="position:absolute; left:148px; top:43931px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">going beyond what its spec allowed.</span></div>
<div class="txt" style="position:absolute; left:112px; top:43991px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">But really, passing mutable objects around is </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">a latent bug</span><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. It’s just waiting</span></div>
<div class="txt" style="position:absolute; left:148px; top:44035px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">for some programmer to inadvertently mutate that list, often with very</span></div>
<div class="txt" style="position:absolute; left:148px; top:44078px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">good intentions like reuse or performance, but resulting in a bug that may</span></div>
<div class="txt" style="position:absolute; left:148px; top:44117px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">be </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">very hard to track down. </span><span id="f35" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">传递可变对象容易产生潜在错误，且难以跟踪</span></div>
<div class="txt" style="position:absolute; left:76px; top:44187px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Easy to understand?</span></div>
<div class="txt" style="position:absolute; left:112px; top:44253px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">When reading </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">main() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, what would you assume about </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sum() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and</span></div>
<div class="txt" style="position:absolute; left:148px; top:44296px;"><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sumAbsolute</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">() ?</span></div>
<div class="txt" style="position:absolute; left:112px; top:44357px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Is it clearly visible to the reader that </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">myData </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">gets changed by one of them?</span></div>
<img id="background" style="position:absolute; left:0px; top:44783px;" width="1440" height="1080" src="page38.png"> <img id="background" style="position:absolute; left:1440px; top:44783px;" width="1440" height="1080" src="page-000038.png">
<div class="txt" style="position:absolute; left:941px; top:44801px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:44890px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Risky example #2: returning mutable values</span></div>
<div class="txt" style="position:absolute; left:76px; top:45030px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Date </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">as a built-in Java class, is a mutable type.</span></div>
<div class="txt" style="position:absolute; left:974px; top:45256px;"><span id="f31" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">缓存结果，避免多次重复计算</span></div>
<div class="txt" style="position:absolute; left:397px; top:45767px;"><span id="f31" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">修改</span><span id="f34" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Party</span><span id="f31" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">召开月份</span></div>
<div class="txt" style="position:absolute; left:837px; top:45809px;"><span id="f29" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">What will happen here?</span></div>
<img id="background" style="position:absolute; left:0px; top:45992px;" width="1440" height="1080" src="page39.png"> <img id="background" style="position:absolute; left:1440px; top:45992px;" width="1440" height="1080" src="page-000039.png">
<div class="txt" style="position:absolute; left:33px; top:46099px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Risk</span></div>
<div class="txt" style="position:absolute; left:76px; top:46239px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">In both of these examples </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">— </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the</span></div>
<div class="txt" style="position:absolute; left:112px; top:46288px;"><span id="f18" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Integer&gt; </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and the </span><span id="f18" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Date </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">— </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the</span></div>
<div class="txt" style="position:absolute; left:112px; top:46337px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">problems would have been</span></div>
<div class="txt" style="position:absolute; left:112px; top:46384px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">completely avoided if the </span><span id="f18" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">list </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and</span></div>
<div class="txt" style="position:absolute; left:112px; top:46432px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the </span><span id="f18" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">date </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">had been immutable types.</span></div>
<div class="txt" style="position:absolute; left:76px; top:46503px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The bugs would have been</span></div>
<div class="txt" style="position:absolute; left:112px; top:46553px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">impossible by design.</span></div>
<div class="txt" style="position:absolute; left:76px; top:46623px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">You should never use </span><span id="f18" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">Date </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">!</span></div>
<div class="txt" style="position:absolute; left:112px; top:46690px;"><span id="f38" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Use one of the classes from package</span></div>
<div class="txt" style="position:absolute; left:148px; top:46733px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">java.time : </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">LocalDateTime </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f18" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Instant </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">,</span></div>
<div class="txt" style="position:absolute; left:148px; top:46776px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">etc.</span></div>
<div class="txt" style="position:absolute; left:112px; top:46837px;"><span id="f38" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">All guarantee in their specifications that</span></div>
<div class="txt" style="position:absolute; left:148px; top:46880px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">they are immutable .</span></div>
<div class="txt" style="position:absolute; left:941px; top:46010px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<img id="background" style="position:absolute; left:0px; top:47201px;" width="1440" height="1080" src="page40.png"> <img id="background" style="position:absolute; left:1440px; top:47201px;" width="1440" height="1080" src="page-000040.png">
<div class="txt" style="position:absolute; left:33px; top:47308px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">How to modify the code?</span></div>
<div class="txt" style="position:absolute; left:941px; top:47219px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:47448px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">In Example 2:</span></div>
<div class="txt" style="position:absolute; left:112px; top:47515px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">To return a new copy of the object (</span><span id="f14" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">defensive copying</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">), i.e.,</span></div>
<div class="txt" style="position:absolute; left:302px; top:47575px;"><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">return new Date(groundhogAnswer.getTime());</span></div>
<div class="txt" style="position:absolute; left:112px; top:47635px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">However, use extra space for </span><span id="f28" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">every client </span><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">— </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">even if 99% of the clients never</span></div>
<div class="txt" style="position:absolute; left:148px; top:47679px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">mutate the date it returns. We may end up with lots of copies of the first</span></div>
<div class="txt" style="position:absolute; left:148px; top:47718px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">day of spring throughout memory. </span><span id="f36" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">缺点：增加了额外的内存空间占用</span></div>
<div class="txt" style="position:absolute; left:76px; top:47788px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If we used an immutable type instead, then different parts of the</span></div>
<div class="txt" style="position:absolute; left:112px; top:47838px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">program could safely share the same values in memory, so less</span></div>
<div class="txt" style="position:absolute; left:112px; top:47881px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">copying and less memory space is required. </span><span id="f36" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">采用不可变类型，可通</span></div>
<div class="txt" style="position:absolute; left:112px; top:47929px;"><span id="f36" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">过内存共享相同的值，降低复制带来的内存空间占用</span></div>
<div class="txt" style="position:absolute; left:76px; top:48004px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutability can be more efficient than mutability, because</span></div>
<div class="txt" style="position:absolute; left:112px; top:48054px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">immutable types never need to be defensively copied.</span></div>
<img id="background" style="position:absolute; left:0px; top:48410px;" width="1440" height="1080" src="page41.png"> <img id="background" style="position:absolute; left:1440px; top:48410px;" width="1440" height="1080" src="page-000041.png">
<div class="txt" style="position:absolute; left:941px; top:48428px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:48517px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Aliasing is what makes mutable types risky</span></div>
<div class="txt" style="position:absolute; left:76px; top:48657px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Using mutable objects is just fine if you are using them entirely</span></div>
<div class="txt" style="position:absolute; left:112px; top:48702px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">locally </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">within a method, and with only one reference to the object. </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">只</span></div>
<div class="txt" style="position:absolute; left:112px; top:48750px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">在局部使用或者只有一个引用时，可变类型的使用是安全的</span></div>
<div class="txt" style="position:absolute; left:76px; top:48825px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">What led to the problem in the two examples we just looked at was</span></div>
<div class="txt" style="position:absolute; left:112px; top:48875px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">having multiple references, </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">also called </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">aliases</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, for the same mutable</span></div>
<div class="txt" style="position:absolute; left:112px; top:48918px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object. </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">对可变类型的多个引用</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">别名</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">是带来风险的原因</span></div>
<div class="txt" style="position:absolute; left:112px; top:48987px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">In the </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">example, the same list is pointed to by both list (in </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sum </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and</span></div>
<div class="txt" style="position:absolute; left:148px; top:49031px;"><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sumAbsolute</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) and </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">myData </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(in </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">main</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">). One programmer ( </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sumAbsolute </span><span id="f54" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">’s)</span></div>
<div class="txt" style="position:absolute; left:148px; top:49074px;"><span id="f54" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">thinks it’s ok to modify the list; another programmer ( </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">main </span><span id="f54" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">’s) wants the</span></div>
<div class="txt" style="position:absolute; left:148px; top:49117px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">list to stay the same. Because of the aliases, </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">main </span><span id="f54" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">’s programmer loses.</span></div>
<div class="txt" style="position:absolute; left:112px; top:49177px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">In the </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Date </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">example, there are two variable names that point to the </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Date</span></div>
<div class="txt" style="position:absolute; left:148px; top:49221px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">object, </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">groundhogAnswer </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f42" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">partyDate </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. These aliases are in completely</span></div>
<div class="txt" style="position:absolute; left:148px; top:49264px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">different parts of the code, under the control of different programmers</span></div>
<div class="txt" style="position:absolute; left:148px; top:49308px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">who may have no idea what the other is doing.</span></div>
<img id="background" style="position:absolute; left:0px; top:49619px;" width="1440" height="1080" src="page42.png"> <img id="background" style="position:absolute; left:1440px; top:49619px;" width="1440" height="1080" src="page-000042.png">
<div class="txt" style="position:absolute; left:941px; top:49637px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:49726px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">More Examples of Defensive Copying</span></div>
<div class="txt" style="position:absolute; left:291px; top:50578px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">通过构造函数，</span></div>
<div class="txt" style="position:absolute; left:237px; top:50621px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">修改了内部</span><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">private</span><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">变量</span></div>
<img id="background" style="position:absolute; left:0px; top:50828px;" width="1440" height="1080" src="page43.png"> <img id="background" style="position:absolute; left:1440px; top:50828px;" width="1440" height="1080" src="page-000043.png">
<div class="txt" style="position:absolute; left:941px; top:50846px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:50935px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">More Examples of Defensive Copying</span></div>
<div class="txt" style="position:absolute; left:275px; top:51769px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">通过返回值，</span></div>
<div class="txt" style="position:absolute; left:203px; top:51812px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">修改了内部</span><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">private</span><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">变量</span></div>
<div class="txt" style="position:absolute; left:678px; top:51829px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">d</span></div>
<img id="background" style="position:absolute; left:0px; top:52037px;" width="1440" height="1080" src="page44.png"> <img id="background" style="position:absolute; left:1440px; top:52037px;" width="1440" height="1080" src="page-000044.png">
<div class="txt" style="position:absolute; left:1105px; top:52055px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:402px; top:52279px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">5 Snapshot diagram</span></div>
<div class="txt" style="position:absolute; left:250px; top:52366px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">as a code-level, run-time, and</span></div>
<div class="txt" style="position:absolute; left:499px; top:52452px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">moment view</span></div>
<img id="background" style="position:absolute; left:0px; top:53246px;" width="1440" height="1080" src="page45.png"> <img id="background" style="position:absolute; left:1440px; top:53246px;" width="1440" height="1080" src="page-000045.png">
<div class="txt" style="position:absolute; left:941px; top:53264px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:53353px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Software construction: transformation btw views</span></div>
<div class="txt" style="position:absolute; left:296px; top:53477px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">review, static analysis</span></div>
<div class="txt" style="position:absolute; left:752px; top:53471px;"><span id="f11" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">Build-time</span></div>
<div class="txt" style="position:absolute; left:44px; top:53557px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">programming</span></div>
<div class="txt" style="position:absolute; left:495px; top:53539px;"><span id="f11" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">Moment </span><span id="f8" style="font-size:36px;vertical-align:sub;color:rgba(0,0,255,1);">refactoring</span></div>
<div class="txt" style="position:absolute; left:382px; top:53593px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Code </span><span id="f8" style="font-size:36px;vertical-align:sub;color:rgba(0,0,255,1);">design</span></div>
<div class="txt" style="position:absolute; left:553px; top:53692px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Component</span></div>
<div class="txt" style="position:absolute; left:1072px; top:53539px;"><span id="f11" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">Period</span></div>
<div class="txt" style="position:absolute; left:934px; top:53572px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Code</span></div>
<div class="txt" style="position:absolute; left:924px; top:53615px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Churn </span><span id="f8" style="font-size:36px;vertical-align:sub;color:rgba(0,0,0,1);">Version Control</span></div>
<div class="txt" style="position:absolute; left:1148px; top:53670px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">CI and</span></div>
<div class="txt" style="position:absolute; left:889px; top:53719px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">evolution</span></div>
<div class="txt" style="position:absolute; left:1140px; top:53713px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Version</span></div>
<div class="txt" style="position:absolute; left:547px; top:53791px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">build</span></div>
<div class="txt" style="position:absolute; left:534px; top:53834px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">install</span></div>
<div class="txt" style="position:absolute; left:520px; top:53877px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">deploy</span></div>
<div class="txt" style="position:absolute; left:763px; top:53879px;"><span id="f11" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">Run-time</span></div>
<div class="txt" style="position:absolute; left:485px; top:53942px;"><span id="f11" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">Moment</span></div>
<div class="txt" style="position:absolute; left:383px; top:53989px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Code</span></div>
<div class="txt" style="position:absolute; left:351px; top:54032px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Snapshot</span></div>
<div class="txt" style="position:absolute; left:326px; top:54118px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">debug</span></div>
<div class="txt" style="position:absolute; left:326px; top:54161px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">testing</span></div>
<div class="txt" style="position:absolute; left:580px; top:54079px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Physical</span></div>
<div class="txt" style="position:absolute; left:547px; top:54123px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Architecture</span></div>
<div class="txt" style="position:absolute; left:1018px; top:53816px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">deploy</span></div>
<div class="txt" style="position:absolute; left:1028px; top:53939px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">profiling, dumping</span></div>
<div class="txt" style="position:absolute; left:976px; top:53989px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Call</span></div>
<div class="txt" style="position:absolute; left:1258px; top:53985px;"><span id="f11" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">Period</span></div>
<div class="txt" style="position:absolute; left:958px; top:54032px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Graph</span></div>
<div class="txt" style="position:absolute; left:1317px; top:54040px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">logging</span></div>
<div class="txt" style="position:absolute; left:1105px; top:54079px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Thread and</span></div>
<div class="txt" style="position:absolute; left:1137px; top:54123px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Process</span></div>
<img id="background" style="position:absolute; left:0px; top:54455px;" width="1440" height="1080" src="page46.png"> <img id="background" style="position:absolute; left:1440px; top:54455px;" width="1440" height="1080" src="page-000046.png">
<div class="txt" style="position:absolute; left:33px; top:54562px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Snapshot diagrams</span></div>
<div class="txt" style="position:absolute; left:941px; top:54473px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:54702px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">It will be useful for us to draw pictures of what’s happening at</span></div>
<div class="txt" style="position:absolute; left:112px; top:54752px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">runtime, in order to understand subtle questions.</span></div>
<div class="txt" style="position:absolute; left:76px; top:54822px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Snapshot diagrams </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">represent the internal state of a program at</span></div>
<div class="txt" style="position:absolute; left:112px; top:54872px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">runtime </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">its stack </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(methods in progress and their local variables)</span></div>
<div class="txt" style="position:absolute; left:112px; top:54920px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">its heap </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(objects that currently exist).</span></div>
<div class="txt" style="position:absolute; left:76px; top:54990px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Why we use snapshot diagrams?</span></div>
<div class="txt" style="position:absolute; left:112px; top:55057px;"><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">To talk to each other through pictures.</span></div>
<div class="txt" style="position:absolute; left:112px; top:55117px;"><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">To illustrate concepts like primitive types vs. object types, immutable</span></div>
<div class="txt" style="position:absolute; left:148px; top:55160px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">values vs. immutable references, pointer aliasing, stack vs. heap,</span></div>
<div class="txt" style="position:absolute; left:148px; top:55204px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">abstractions vs. concrete representations.</span></div>
<div class="txt" style="position:absolute; left:112px; top:55264px;"><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">To help explain your design for your team project (with each other and</span></div>
<div class="txt" style="position:absolute; left:148px; top:55307px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">with your TA).</span></div>
<div class="txt" style="position:absolute; left:112px; top:55368px;"><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">To pave the way for richer design notations in subsequent courses.</span></div>
<img id="background" style="position:absolute; left:0px; top:55664px;" width="1440" height="1080" src="page47.png"> <img id="background" style="position:absolute; left:1440px; top:55664px;" width="1440" height="1080" src="page-000047.png">
<div class="txt" style="position:absolute; left:941px; top:55682px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:55771px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutating values vs. reassigning variables</span></div>
<div class="txt" style="position:absolute; left:76px; top:55911px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Snapshot diagrams give us a way to visualize the distinction</span></div>
<div class="txt" style="position:absolute; left:112px; top:55961px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">between changing a variable and changing a value:</span></div>
<div class="txt" style="position:absolute; left:112px; top:56026px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">When you assign to a variable or a field, you’re changing where the</span></div>
<div class="txt" style="position:absolute; left:148px; top:56069px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">variable’s arrow points. You can point it to a different value.</span></div>
<div class="txt" style="position:absolute; left:112px; top:56129px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">When you assign to the contents of a mutable value </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">such as an array or</span></div>
<div class="txt" style="position:absolute; left:148px; top:56173px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">list </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">– you’re changing references inside that value.</span></div>
<img id="background" style="position:absolute; left:0px; top:56873px;" width="1440" height="1080" src="page48.png"> <img id="background" style="position:absolute; left:1440px; top:56873px;" width="1440" height="1080" src="page-000048.png">
<div class="txt" style="position:absolute; left:941px; top:56891px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:56980px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Primitive and Object values in Snapshot Diagram</span></div>
<div class="txt" style="position:absolute; left:76px; top:57120px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Primitive values</span></div>
<div class="txt" style="position:absolute; left:112px; top:57187px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Primitive values are represented by bare constants. </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The incoming arrow is</span></div>
<div class="txt" style="position:absolute; left:148px; top:57230px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">a reference to the value from a variable or an object field.</span></div>
<div class="txt" style="position:absolute; left:76px; top:57368px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Object values</span></div>
<div class="txt" style="position:absolute; left:112px; top:57434px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">An object value is a circle labeled by its type</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. When we want to show</span></div>
<div class="txt" style="position:absolute; left:148px; top:57478px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">more detail, we write field names inside it, with arrows pointing out to</span></div>
<div class="txt" style="position:absolute; left:148px; top:57521px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">their values. For still more detail, the fields can include their declared</span></div>
<div class="txt" style="position:absolute; left:148px; top:57563px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">types. Some people prefer to write </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">x:int </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">instead of </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">int x </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, but both are</span></div>
<div class="txt" style="position:absolute; left:148px; top:57607px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">fine.</span></div>
<img id="background" style="position:absolute; left:0px; top:58082px;" width="1440" height="1080" src="page49.png"> <img id="background" style="position:absolute; left:1440px; top:58082px;" width="1440" height="1080" src="page-000049.png">
<div class="txt" style="position:absolute; left:941px; top:58100px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:58189px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Reassignment and immutable values</span></div>
<div class="txt" style="position:absolute; left:76px; top:58329px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">For example, if we have a String variable </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">s </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, we can reassign it from</span></div>
<div class="txt" style="position:absolute; left:112px; top:58378px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">a value of </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">"a" </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">"ab" </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:220px; top:58442px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String s = "a";</span></div>
<div class="txt" style="position:absolute; left:220px; top:58504px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s = s + "b";</span></div>
<div class="txt" style="position:absolute; left:76px; top:58570px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">String </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an example of an immutable type, a type whose values</span></div>
<div class="txt" style="position:absolute; left:112px; top:58620px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">can never change once they have been created.</span></div>
<div class="txt" style="position:absolute; left:76px; top:58690px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Immutable objects </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(intended by their designer to always represent</span></div>
<div class="txt" style="position:absolute; left:112px; top:58740px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the same value) are denoted in a snapshot diagram by a </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">double</span></div>
<div class="txt" style="position:absolute; left:112px; top:58787px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">border, </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">like the </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">String </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">objects in our diagram.</span></div>
<img id="background" style="position:absolute; left:0px; top:59291px;" width="1440" height="1080" src="page50.png"> <img id="background" style="position:absolute; left:1440px; top:59291px;" width="1440" height="1080" src="page-000050.png">
<div class="txt" style="position:absolute; left:33px; top:59398px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutable values</span></div>
<div class="txt" style="position:absolute; left:941px; top:59309px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:59538px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">By contrast, </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">StringBuilder </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(a built-in Java class) is a mutable</span></div>
<div class="txt" style="position:absolute; left:112px; top:59588px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object that represents a string of characters, and it has methods that</span></div>
<div class="txt" style="position:absolute; left:112px; top:59636px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">change the value of the object:</span></div>
<div class="txt" style="position:absolute; left:191px; top:59701px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">StringBuilder sb = new StringBuilder("a");</span></div>
<div class="txt" style="position:absolute; left:191px; top:59761px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">sb.append("b");</span></div>
<div class="txt" style="position:absolute; left:76px; top:59827px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">These two snapshot diagrams look very different, which is good:</span></div>
<div class="txt" style="position:absolute; left:112px; top:59877px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the difference between mutability and immutability will play an</span></div>
<div class="txt" style="position:absolute; left:112px; top:59925px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">important role in making code safe from bugs .</span></div>
<img id="background" style="position:absolute; left:0px; top:60500px;" width="1440" height="1080" src="page51.png"> <img id="background" style="position:absolute; left:1440px; top:60500px;" width="1440" height="1080" src="page-000051.png">
<div class="txt" style="position:absolute; left:33px; top:60607px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable references</span></div>
<div class="txt" style="position:absolute; left:941px; top:60518px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:60747px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java also gives us immutable references: variables that are</span></div>
<div class="txt" style="position:absolute; left:112px; top:60797px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">assigned once and never reassigned. To make a reference</span></div>
<div class="txt" style="position:absolute; left:112px; top:60844px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">immutable, declare it with the keyword </span><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">final</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">:</span></div>
<div class="txt" style="position:absolute; left:220px; top:60915px;"><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">final int n = 5;</span></div>
<div class="txt" style="position:absolute; left:76px; top:60987px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f24" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If the Java compiler isn’t convinced that your final variable will</span></div>
<div class="txt" style="position:absolute; left:112px; top:61037px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">only be assigned once at runtime, then it will produce a compiler</span></div>
<div class="txt" style="position:absolute; left:112px; top:61084px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">error. So </span><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">final </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">gives a static checking for immutable references.</span></div>
<div class="txt" style="position:absolute; left:76px; top:61155px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">In a snapshot diagram, an immutable reference (</span><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(255,0,0,1);">final</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">) is denoted</span></div>
<div class="txt" style="position:absolute; left:112px; top:61205px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">by a </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">double arrow.</span></div>
<img id="background" style="position:absolute; left:0px; top:61709px;" width="1440" height="1080" src="page52.png"> <img id="background" style="position:absolute; left:1440px; top:61709px;" width="1440" height="1080" src="page-000052.png">
<div class="txt" style="position:absolute; left:33px; top:61816px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable references</span></div>
<div class="txt" style="position:absolute; left:941px; top:61727px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:61956px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Here’s an object whose </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">id </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">never changes (it can’t be reassigned to a</span></div>
<div class="txt" style="position:absolute; left:112px; top:62005px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">different number), but whose </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">age </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">can change.</span></div>
<div class="txt" style="position:absolute; left:76px; top:62364px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">We can have an immutable reference to a mutable value </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(for</span></div>
<div class="txt" style="position:absolute; left:112px; top:62412px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">example: </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">final StringBuilder sb</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">) whose value can change even</span></div>
<div class="txt" style="position:absolute; left:112px; top:62457px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">though we’re pointing to the same object. </span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">指向可变值的不可变引用</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span></div>
<div class="txt" style="position:absolute; left:112px; top:62505px;"><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">引用不可变，值可变</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span></div>
<div class="txt" style="position:absolute; left:76px; top:62580px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">We can also have a mutable reference to an immutable value </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(like</span></div>
<div class="txt" style="position:absolute; left:112px; top:62629px;"><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">String s</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">), where the value of the variable can change because it</span></div>
<div class="txt" style="position:absolute; left:112px; top:62673px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">can be re-pointed to a different object. </span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">指向不可变值的可变引用</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">值</span></div>
<div class="txt" style="position:absolute; left:112px; top:62721px;"><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">不可变，引用可变</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span></div>
<img id="background" style="position:absolute; left:0px; top:62918px;" width="1440" height="1080" src="page53.png"> <img id="background" style="position:absolute; left:1440px; top:62918px;" width="1440" height="1080" src="page-000053.png">
<div class="txt" style="position:absolute; left:1105px; top:62936px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:176px; top:63247px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">6 Complex data types: Arrays and</span></div>
<div class="txt" style="position:absolute; left:542px; top:63333px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections</span></div>
<img id="background" style="position:absolute; left:0px; top:64127px;" width="1440" height="1080" src="page54.png"> <img id="background" style="position:absolute; left:1440px; top:64127px;" width="1440" height="1080" src="page-000054.png">
<div class="txt" style="position:absolute; left:33px; top:64234px;"><span id="f10" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Array</span></div>
<div class="txt" style="position:absolute; left:941px; top:64145px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:64374px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Arrays are fixed-length sequences of another type </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">T</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">. For example,</span></div>
<div class="txt" style="position:absolute; left:112px; top:64424px;"><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">here’s how to declare an array variable and construct an array value</span></div>
<div class="txt" style="position:absolute; left:112px; top:64472px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to assign to it:</span></div>
<div class="txt" style="position:absolute; left:220px; top:64539px;"><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int[] a = new int[100];</span></div>
<div class="txt" style="position:absolute; left:1175px; top:64534px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Why 100?</span></div>
<div class="txt" style="position:absolute; left:76px; top:64609px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">int[] </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">array type includes all possible array</span></div>
<div class="txt" style="position:absolute; left:112px; top:64655px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">values, but a particular array value, </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">once created, </span><span id="f10" style="font-size:12px;vertical-align:super;color:rgba(126,0,84,1);">int[] </span><span id="f10" style="font-size:12px;vertical-align:super;color:rgba(50,50,50,1);">a = </span><span id="f10" style="font-size:12px;vertical-align:super;color:rgba(126,0,84,1);">new int[100];</span></div>
<div class="txt" style="position:absolute; left:112px; top:64707px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">can never change its length.</span></div>
<div class="txt" style="position:absolute; left:1026px; top:64688px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">int </span><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">i = 0;</span></div>
<div class="txt" style="position:absolute; left:1026px; top:64722px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">int </span><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">n = 3;</span></div>
<div class="txt" style="position:absolute; left:76px; top:64777px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Operations on array types include:</span></div>
<div class="txt" style="position:absolute; left:1026px; top:64755px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">while </span><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">(n != 1) {</span></div>
<div class="txt" style="position:absolute; left:1072px; top:64789px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">a[i] = n;</span></div>
<div class="txt" style="position:absolute; left:112px; top:64844px;"><span id="f37" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">indexing: </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a[2]</span></div>
<div class="txt" style="position:absolute; left:1072px; top:64823px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">i++;</span></div>
<div class="txt" style="position:absolute; left:1072px; top:64856px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">if </span><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">(n % 2 == 0) {</span></div>
<div class="txt" style="position:absolute; left:112px; top:64904px;"><span id="f37" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">assignment: </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a[2]=0</span></div>
<div class="txt" style="position:absolute; left:1134px; top:64890px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">n = n / 2;</span></div>
<div class="txt" style="position:absolute; left:1088px; top:64924px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<div class="txt" style="position:absolute; left:112px; top:64965px;"><span id="f37" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">length: </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.length</span></div>
<div class="txt" style="position:absolute; left:1088px; top:64957px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">else </span><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">{</span></div>
<div class="txt" style="position:absolute; left:1134px; top:64991px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">n = 3 * n + 1;</span></div>
<div class="txt" style="position:absolute; left:1088px; top:65024px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<div class="txt" style="position:absolute; left:1026px; top:65058px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<div class="txt" style="position:absolute; left:1026px; top:65092px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">a[i] = n;</span></div>
<div class="txt" style="position:absolute; left:1026px; top:65125px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(50,50,50,1);">i++;</span></div>
<img id="background" style="position:absolute; left:0px; top:65336px;" width="1440" height="1080" src="page55.png"> <img id="background" style="position:absolute; left:1440px; top:65336px;" width="1440" height="1080" src="page-000055.png">
<div class="txt" style="position:absolute; left:33px; top:65443px;"><span id="f10" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span></div>
<div class="txt" style="position:absolute; left:941px; top:65354px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:65583px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Instead of a fixed-</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">length array, let’s use the </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">type.</span></div>
<div class="txt" style="position:absolute; left:76px; top:65655px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Lists are </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">variable-length </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">sequences of another type </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">T </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:272px; top:65722px;"><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();</span></div>
<div class="txt" style="position:absolute; left:76px; top:65787px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Some of its operations:</span></div>
<div class="txt" style="position:absolute; left:112px; top:65854px;"><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">indexing: </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list.get(2)</span></div>
<div class="txt" style="position:absolute; left:112px; top:65914px;"><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">assignment: </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list.set(2, 0)</span></div>
<div class="txt" style="position:absolute; left:112px; top:65975px;"><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">length: </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list.size()</span></div>
<div class="txt" style="position:absolute; left:76px; top:66041px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Note 1: </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an interface</span></div>
<div class="txt" style="position:absolute; left:76px; top:66113px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Note 2: members in a </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">must be</span></div>
<div class="txt" style="position:absolute; left:112px; top:66163px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">an object.</span></div>
<div class="txt" style="position:absolute; left:878px; top:65804px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">List&lt;Integer&gt; list =</span></div>
<div class="txt" style="position:absolute; left:1032px; top:65837px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">new ArrayList&lt;Integer&gt;();</span></div>
<div class="txt" style="position:absolute; left:878px; top:65871px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">int n = 3;</span></div>
<div class="txt" style="position:absolute; left:878px; top:65905px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">while (n != 1) {</span></div>
<div class="txt" style="position:absolute; left:940px; top:65938px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">list.add(n);</span></div>
<div class="txt" style="position:absolute; left:940px; top:65972px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">if (n % 2 == 0) {</span></div>
<div class="txt" style="position:absolute; left:1002px; top:66005px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">n = n / 2;</span></div>
<div class="txt" style="position:absolute; left:940px; top:66039px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">} else {</span></div>
<div class="txt" style="position:absolute; left:1002px; top:66072px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">n = 3 * n + 1;</span></div>
<div class="txt" style="position:absolute; left:940px; top:66106px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">}</span></div>
<div class="txt" style="position:absolute; left:878px; top:66140px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">}</span></div>
<div class="txt" style="position:absolute; left:878px; top:66173px;"><span id="f10" style="font-size:12px;vertical-align:baseline;color:rgba(126,0,84,1);">list.add(n);</span></div>
<img id="background" style="position:absolute; left:0px; top:66545px;" width="1440" height="1080" src="page56.png"> <img id="background" style="position:absolute; left:1440px; top:66545px;" width="1440" height="1080" src="page-000056.png">
<div class="txt" style="position:absolute; left:33px; top:66652px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterating</span></div>
<div class="txt" style="position:absolute; left:76px; top:66792px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterating an array</span></div>
<div class="txt" style="position:absolute; left:112px; top:66859px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int max = 0;</span></div>
<div class="txt" style="position:absolute; left:112px; top:66919px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">for (int i=0; i&lt;array.length; i++) {</span></div>
<div class="txt" style="position:absolute; left:191px; top:66980px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">max = Math.max(array[i], max);</span></div>
<div class="txt" style="position:absolute; left:112px; top:67040px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:76px; top:67167px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterating a </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span></div>
<div class="txt" style="position:absolute; left:112px; top:67233px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int max = 0;</span></div>
<div class="txt" style="position:absolute; left:112px; top:67294px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">for (int x : list) {</span></div>
<div class="txt" style="position:absolute; left:191px; top:67354px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">max = Math.max(x, max);</span></div>
<div class="txt" style="position:absolute; left:112px; top:67415px;"><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:941px; top:66563px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<img id="background" style="position:absolute; left:0px; top:67754px;" width="1440" height="1080" src="page57.png"> <img id="background" style="position:absolute; left:1440px; top:67754px;" width="1440" height="1080" src="page-000057.png">
<div class="txt" style="position:absolute; left:33px; top:67861px;"><span id="f10" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Set</span></div>
<div class="txt" style="position:absolute; left:941px; top:67772px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:68001px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Set </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an unordered collection of zero or more unique objects.</span></div>
<div class="txt" style="position:absolute; left:76px; top:68073px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">An object cannot appear in a set multiple times. Either it’s in or it’s</span></div>
<div class="txt" style="position:absolute; left:112px; top:68123px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">out.</span></div>
<div class="txt" style="position:absolute; left:112px; top:68187px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s1.contains(e) </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">test if the set contains an element</span></div>
<div class="txt" style="position:absolute; left:112px; top:68247px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s1.containsAll(s2) </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">test whether </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s1 </span><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">⊇ </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s2</span></div>
<div class="txt" style="position:absolute; left:112px; top:68308px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s1.removeAll(s2) </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">remove </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s2 </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">from </span><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s1</span></div>
<div class="txt" style="position:absolute; left:76px; top:68375px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Set </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an abstract interface</span></div>
<img id="background" style="position:absolute; left:0px; top:68963px;" width="1440" height="1080" src="page58.png"> <img id="background" style="position:absolute; left:1440px; top:68963px;" width="1440" height="1080" src="page-000058.png">
<div class="txt" style="position:absolute; left:33px; top:69070px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Map</span></div>
<div class="txt" style="position:absolute; left:941px; top:68981px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:69207px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is similar to a dictionary (key-value) </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">键</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">-</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">值</span></div>
<div class="txt" style="position:absolute; left:112px; top:69276px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">map.put(key, val)</span></div>
<div class="txt" style="position:absolute; left:652px; top:69276px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">add the mapping </span><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">key → val</span></div>
<div class="txt" style="position:absolute; left:112px; top:69337px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">map.get(key)</span></div>
<div class="txt" style="position:absolute; left:652px; top:69337px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">get the value for a </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">key</span></div>
<div class="txt" style="position:absolute; left:112px; top:69397px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">map.containsKey(key)</span></div>
<div class="txt" style="position:absolute; left:652px; top:69397px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">test whether the map has a </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">key</span></div>
<div class="txt" style="position:absolute; left:112px; top:69458px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">map.remove(key)</span></div>
<div class="txt" style="position:absolute; left:652px; top:69458px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">delete a mapping</span></div>
<div class="txt" style="position:absolute; left:76px; top:69524px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an abstract interface</span></div>
<img id="background" style="position:absolute; left:0px; top:70172px;" width="1440" height="1080" src="page59.png"> <img id="background" style="position:absolute; left:1440px; top:70172px;" width="1440" height="1080" src="page-000059.png">
<div class="txt" style="position:absolute; left:33px; top:70278px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Building a list from an </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Array</span></div>
<div class="txt" style="position:absolute; left:941px; top:70190px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:70419px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Arrays.asList(new String[] { "a", "b", "c" })</span></div>
<img id="background" style="position:absolute; left:0px; top:71381px;" width="1440" height="1080" src="page60.png"> <img id="background" style="position:absolute; left:1440px; top:71381px;" width="1440" height="1080" src="page-000060.png">
<div class="txt" style="position:absolute; left:941px; top:71399px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:71487px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Declaring </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">List, Set, </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">variables</span></div>
<div class="txt" style="position:absolute; left:76px; top:71628px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">With Java collections we can restrict the type of objects contained in</span></div>
<div class="txt" style="position:absolute; left:112px; top:71678px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the collection.</span></div>
<div class="txt" style="position:absolute; left:76px; top:71748px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">When we add an item, the compiler can perform </span><span id="f22" style="font-size:37px;vertical-align:baseline;color:rgba(0,0,0,1);">static checking </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to</span></div>
<div class="txt" style="position:absolute; left:112px; top:71793px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">ensure we only add items of the appropriate type.</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">当添加一个</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">item</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">时</span></div>
<div class="txt" style="position:absolute; left:112px; top:71841px;"><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">，编译器执行静态检查，确保只添加合适类型的</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">item</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">。</span></div>
<div class="txt" style="position:absolute; left:76px; top:71964px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Then, when we pull out an item, we are guaranteed that its type will</span></div>
<div class="txt" style="position:absolute; left:112px; top:72014px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">be what we expect.</span></div>
<div class="txt" style="position:absolute; left:76px; top:72154px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();</span></div>
<div class="txt" style="position:absolute; left:76px; top:72219px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</span></div>
<img id="background" style="position:absolute; left:0px; top:72590px;" width="1440" height="1080" src="page61.png"> <img id="background" style="position:absolute; left:1440px; top:72590px;" width="1440" height="1080" src="page-000061.png">
<div class="txt" style="position:absolute; left:941px; top:72608px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:72696px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Declaring </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">List, Set, </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">variables</span></div>
<div class="txt" style="position:absolute; left:76px; top:72837px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Declaration:</span></div>
<div class="txt" style="position:absolute; left:112px; top:72900px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;String&gt; cities;</span></div>
<div class="txt" style="position:absolute; left:112px; top:72954px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Integer&gt; numbers;</span></div>
<div class="txt" style="position:absolute; left:710px; top:72901px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">// a List of Strings</span></div>
<div class="txt" style="position:absolute; left:710px; top:72955px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">// a Set of Integers</span></div>
<div class="txt" style="position:absolute; left:112px; top:73009px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Map&lt;String, Turtle&gt; turtles;</span></div>
<div class="txt" style="position:absolute; left:707px; top:73009px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">// a Map with String keys and Turtle values</span></div>
<div class="txt" style="position:absolute; left:76px; top:73070px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">We cannot create a collection of primitive types.</span></div>
<div class="txt" style="position:absolute; left:112px; top:73137px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">For example, </span><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;int&gt; </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">does not work.</span></div>
<div class="txt" style="position:absolute; left:112px; top:73198px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">However, </span><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">int </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">have an Integer wrapper we can use (e.g. </span><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Integer&gt;</span></div>
<div class="txt" style="position:absolute; left:148px; top:73241px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">numbers</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">).</span></div>
<div class="txt" style="position:absolute; left:112px; top:73301px;"><span id="f28" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">When using:</span></div>
<div class="txt" style="position:absolute; left:148px; top:73357px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">sequence.add(5);</span></div>
<div class="txt" style="position:absolute; left:673px; top:73358px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">// add 5 to the sequence</span></div>
<div class="txt" style="position:absolute; left:148px; top:73404px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">int second = sequence.get(1); </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">// get the second element</span></div>
<img id="background" style="position:absolute; left:0px; top:73799px;" width="1440" height="1080" src="page62.png"> <img id="background" style="position:absolute; left:1440px; top:73799px;" width="1440" height="1080" src="page-000062.png">
<div class="txt" style="position:absolute; left:941px; top:73817px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:73905px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Creating </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">List, Set, </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">variables</span></div>
<div class="txt" style="position:absolute; left:76px; top:74046px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Java helps distinguish between</span></div>
<div class="txt" style="position:absolute; left:112px; top:74113px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">the specification of a type </span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">what does it do? Abstract Interface</span></div>
<div class="txt" style="position:absolute; left:112px; top:74173px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The implementation </span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">what is the code?</span></div>
<div class="txt" style="position:absolute; left:940px; top:74173px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Concrete Class</span></div>
<div class="txt" style="position:absolute; left:76px; top:74239px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Set </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, and </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">are all interfaces:</span></div>
<div class="txt" style="position:absolute; left:112px; top:74306px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">They define how these respective types work, but they don’t provide</span></div>
<div class="txt" style="position:absolute; left:148px; top:74345px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">implementation code. </span><span id="f43" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">定义了类型的工作方式，但不提供实现代码。</span></div>
<div class="txt" style="position:absolute; left:112px; top:74410px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Advantage: users have the right to choose different implementations in</span></div>
<div class="txt" style="position:absolute; left:148px; top:74449px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">different situations. </span><span id="f43" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">优点</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">: </span><span id="f43" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">用户有权在不同情况下选择不同的实现。</span></div>
<div class="txt" style="position:absolute; left:76px; top:74518px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Implementations of </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Set </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">,</span></div>
<div class="txt" style="position:absolute; left:112px; top:74568px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f11" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">:</span></div>
<div class="txt" style="position:absolute; left:754px; top:74543px;"><span id="f11" style="font-size:10px;vertical-align:baseline;color:rgba(50,50,50,1);">List&lt;String&gt; firstNames = new ArrayList&lt;String&gt;();</span></div>
<div class="txt" style="position:absolute; left:754px; top:74572px;"><span id="f11" style="font-size:10px;vertical-align:baseline;color:rgba(50,50,50,1);">List&lt;String&gt; lastNames = new LinkedList&lt;String&gt;();</span></div>
<div class="txt" style="position:absolute; left:112px; top:74633px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List:</span></div>
<div class="txt" style="position:absolute; left:267px; top:74633px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList</span></div>
<div class="txt" style="position:absolute; left:464px; top:74633px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">LinkedList</span></div>
<div class="txt" style="position:absolute; left:754px; top:74629px;"><span id="f11" style="font-size:10px;vertical-align:baseline;color:rgba(50,50,50,1);">List&lt;String&gt; firstNames = new ArrayList&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:754px; top:74658px;"><span id="f11" style="font-size:10px;vertical-align:baseline;color:rgba(50,50,50,1);">List&lt;String&gt; lastNames = new LinkedList&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:112px; top:74694px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set: HashSet</span></div>
<div class="txt" style="position:absolute; left:754px; top:74716px;"><span id="f11" style="font-size:10px;vertical-align:baseline;color:rgba(50,50,50,1);">Set&lt;Integer&gt; numbers = new HashSet&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:112px; top:74754px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Map: HashMap</span></div>
<div class="txt" style="position:absolute; left:754px; top:74773px;"><span id="f11" style="font-size:10px;vertical-align:baseline;color:rgba(50,50,50,1);">Map&lt;String,Turtle&gt; turtles = new HashMap&lt;&gt;();</span></div>
<img id="background" style="position:absolute; left:0px; top:75008px;" width="1440" height="1080" src="page63.png"> <img id="background" style="position:absolute; left:1440px; top:75008px;" width="1440" height="1080" src="page-000063.png">
<div class="txt" style="position:absolute; left:33px; top:75107px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Java Collection</span></div>
<div class="txt" style="position:absolute; left:941px; top:75026px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<img id="background" style="position:absolute; left:0px; top:76217px;" width="1440" height="1080" src="page64.png"> <img id="background" style="position:absolute; left:1440px; top:76217px;" width="1440" height="1080" src="page-000064.png">
<div class="txt" style="position:absolute; left:33px; top:76324px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Iteration</span></div>
<div class="txt" style="position:absolute; left:941px; top:76235px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:175px; top:76483px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">List&lt;String&gt; cities</span></div>
<div class="txt" style="position:absolute; left:175px; top:76522px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">Set&lt;Integer&gt; numbers</span></div>
<div class="txt" style="position:absolute; left:175px; top:76560px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">Map&lt;String,Turtle&gt; turtles</span></div>
<div class="txt" style="position:absolute; left:751px; top:76483px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">= new ArrayList&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:751px; top:76522px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">= new HashSet&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:751px; top:76560px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">= new HashMap&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:175px; top:76637px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">for (String city : cities) {</span></div>
<div class="txt" style="position:absolute; left:245px; top:76675px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">System.out.println(city);</span></div>
<div class="txt" style="position:absolute; left:175px; top:76714px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<div class="txt" style="position:absolute; left:175px; top:76790px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">for (int num : numbers) {</span></div>
<div class="txt" style="position:absolute; left:245px; top:76829px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">System.out.println(num);</span></div>
<div class="txt" style="position:absolute; left:175px; top:76867px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<div class="txt" style="position:absolute; left:175px; top:76944px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">for (int ii = 0; ii &lt; cities.size(); ii++) {</span></div>
<div class="txt" style="position:absolute; left:245px; top:76982px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">System.out.println(cities.get(ii));</span></div>
<div class="txt" style="position:absolute; left:175px; top:77021px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<div class="txt" style="position:absolute; left:175px; top:77098px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">for (String key : turtles.keySet()) {</span></div>
<div class="txt" style="position:absolute; left:245px; top:77136px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">System.out.println(key + ": " + turtles.get(key));</span></div>
<div class="txt" style="position:absolute; left:175px; top:77175px;"><span id="f11" style="font-size:14px;vertical-align:baseline;color:rgba(50,50,50,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:77426px;" width="1440" height="1080" src="page65.png"> <img id="background" style="position:absolute; left:1440px; top:77426px;" width="1440" height="1080" src="page-000065.png">
<div class="txt" style="position:absolute; left:33px; top:77533px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterator as a mutable type</span></div>
<div class="txt" style="position:absolute; left:941px; top:77444px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:77673px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterator </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is an object that steps through a collection of elements</span></div>
<div class="txt" style="position:absolute; left:112px; top:77718px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and returns the elements one by one. </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">迭代器是一个对象，它遍历一组</span></div>
<div class="txt" style="position:absolute; left:112px; top:77766px;"><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">元素并逐个返回元素。</span></div>
<div class="txt" style="position:absolute; left:76px; top:77841px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f24" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterators are used under the covers in Java when you’re using a </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">for</span></div>
<div class="txt" style="position:absolute; left:112px; top:77886px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(... : ...) loop to step through a </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">or array. </span><span id="f19" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">遍历时默认调用迭代器</span></div>
<div class="txt" style="position:absolute; left:76px; top:78009px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">An </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">iterator </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">has two methods:</span></div>
<div class="txt" style="position:absolute; left:112px; top:78075px;"><span id="f36" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">next() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">returns the next element in the collection --- this is a </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">mutator</span></div>
<div class="txt" style="position:absolute; left:148px; top:78119px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">method!</span></div>
<div class="txt" style="position:absolute; left:112px; top:78179px;"><span id="f36" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">hasNext() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">tests whether the iterator has reached the end of the collection.</span></div>
<img id="background" style="position:absolute; left:0px; top:78635px;" width="1440" height="1080" src="page66.png"> <img id="background" style="position:absolute; left:1440px; top:78635px;" width="1440" height="1080" src="page-000066.png">
<div class="txt" style="position:absolute; left:941px; top:78653px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:78741px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">An example iterator for </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList&lt;String&gt;</span></div>
<img id="background" style="position:absolute; left:0px; top:79844px;" width="1440" height="1080" src="page67.png"> <img id="background" style="position:absolute; left:1440px; top:79844px;" width="1440" height="1080" src="page-000067.png">
<div class="txt" style="position:absolute; left:941px; top:79862px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:79950px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">An example iterator for </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList&lt;String&gt;</span></div>
<div class="txt" style="position:absolute; left:405px; top:80217px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Class</span></div>
<div class="txt" style="position:absolute; left:369px; top:80260px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">definition</span></div>
<div class="txt" style="position:absolute; left:574px; top:80303px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Instance</span></div>
<div class="txt" style="position:absolute; left:568px; top:80346px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">variables</span></div>
<div class="txt" style="position:absolute; left:165px; top:80475px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Specification</span></div>
<div class="txt" style="position:absolute; left:561px; top:80529px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Invariants</span></div>
<div class="txt" style="position:absolute; left:431px; top:80748px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Constructor</span></div>
<div class="txt" style="position:absolute; left:1208px; top:80346px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Instance</span></div>
<div class="txt" style="position:absolute; left:1212px; top:80390px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">method</span></div>
<img id="background" style="position:absolute; left:0px; top:81053px;" width="1440" height="1080" src="page68.png"> <img id="background" style="position:absolute; left:1440px; top:81053px;" width="1440" height="1080" src="page-000068.png">
<div class="txt" style="position:absolute; left:941px; top:81071px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:81159px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Snapshot diagram of </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">MyIterator</span></div>
<img id="background" style="position:absolute; left:0px; top:82262px;" width="1440" height="1080" src="page69.png"> <img id="background" style="position:absolute; left:1440px; top:82262px;" width="1440" height="1080" src="page-000069.png">
<div class="txt" style="position:absolute; left:941px; top:82280px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:82369px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutation undermines an iterator</span></div>
<div class="txt" style="position:absolute; left:76px; top:82509px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Suppose we have a list of subjects represented as strings. We want</span></div>
<div class="txt" style="position:absolute; left:112px; top:82558px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">a method </span><span id="f16" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">dropCourse6 </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">that will delete the Course 6 subjects from</span></div>
<div class="txt" style="position:absolute; left:112px; top:82607px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the list, leaving the other subjects behind.</span></div>
<div class="txt" style="position:absolute; left:76px; top:82677px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">First write the specification (to be introduced in next lecture)</span></div>
<div class="txt" style="position:absolute; left:76px; top:82965px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Next, write the test cases (to be studied in Chapter 7)</span></div>
<img id="background" style="position:absolute; left:0px; top:83471px;" width="1440" height="1080" src="page70.png"> <img id="background" style="position:absolute; left:1440px; top:83471px;" width="1440" height="1080" src="page-000070.png">
<div class="txt" style="position:absolute; left:941px; top:83489px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:83578px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutation undermines an iterator</span></div>
<div class="txt" style="position:absolute; left:76px; top:83718px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The implementation:</span></div>
<div class="txt" style="position:absolute; left:76px; top:84150px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Run it</span></div>
<div class="txt" style="position:absolute; left:1173px; top:84172px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Why?</span></div>
<img id="background" style="position:absolute; left:0px; top:84680px;" width="1440" height="1080" src="page71.png"> <img id="background" style="position:absolute; left:1440px; top:84680px;" width="1440" height="1080" src="page-000071.png">
<div class="txt" style="position:absolute; left:941px; top:84698px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:33px; top:84787px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutation undermines an iterator</span></div>
<div class="txt" style="position:absolute; left:76px; top:84927px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Note that this isn’t just a bug in our MyIterator. The built</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">-in</span></div>
<div class="txt" style="position:absolute; left:112px; top:84977px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">iterator in ArrayList suffers from the same problem, and so does</span></div>
<div class="txt" style="position:absolute; left:112px; top:85025px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the for loop that’s syntactic sugar for it. The problem just has a</span></div>
<div class="txt" style="position:absolute; left:112px; top:85073px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">different symptom. If you used this code instead:</span></div>
<div class="txt" style="position:absolute; left:76px; top:85359px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Then you’ll get a </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(255,98,176,1);">ConcurrentModificationException. </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The built-in</span></div>
<div class="txt" style="position:absolute; left:112px; top:85409px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">iterator detects that you’re changing the list under its feet, and cries</span></div>
<div class="txt" style="position:absolute; left:112px; top:85457px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">foul.</span></div>
<div class="txt" style="position:absolute; left:76px; top:85527px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">How to fix?</span></div>
<img id="background" style="position:absolute; left:0px; top:85889px;" width="1440" height="1080" src="page72.png"> <img id="background" style="position:absolute; left:1440px; top:85889px;" width="1440" height="1080" src="page-000072.png">
<div class="txt" style="position:absolute; left:1105px; top:85907px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:311px; top:86304px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">7 Useful immutable types</span></div>
<img id="background" style="position:absolute; left:0px; top:87098px;" width="1440" height="1080" src="page73.png"> <img id="background" style="position:absolute; left:1440px; top:87098px;" width="1440" height="1080" src="page-000073.png">
<div class="txt" style="position:absolute; left:33px; top:87205px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Useful immutable types</span></div>
<div class="txt" style="position:absolute; left:941px; top:87116px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:87345px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">The primitive types and primitive wrappers are all immutable. </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If</span></div>
<div class="txt" style="position:absolute; left:112px; top:87394px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">you need to compute with large numbers, </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">BigInteger </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and</span></div>
<div class="txt" style="position:absolute; left:112px; top:87442px;"><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">BigDecimal </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">are immutable.</span></div>
<div class="txt" style="position:absolute; left:76px; top:87513px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f25" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Don’t use mutable </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Date</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, use the appropriate immutable type from</span></div>
<div class="txt" style="position:absolute; left:112px; top:87562px;"><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">java.time </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">based on the granularity of timekeeping you need.</span></div>
<div class="txt" style="position:absolute; left:76px; top:87633px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f25" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The usual implementations of Java’s collections types — </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Set</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">,</span></div>
<div class="txt" style="position:absolute; left:112px; top:87682px;"><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map </span><span id="f25" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">— </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">are all mutable: </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">HashMap</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, etc. The </span><span id="f19" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections</span></div>
<div class="txt" style="position:absolute; left:112px; top:87731px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">utility class has methods for obtaining unmodifiable views of</span></div>
<div class="txt" style="position:absolute; left:112px; top:87779px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">these mutable collections:</span></div>
<div class="txt" style="position:absolute; left:112px; top:87844px;"><span id="f48" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.unmodifiableList</span></div>
<div class="txt" style="position:absolute; left:112px; top:87904px;"><span id="f48" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.unmodifiableSet</span></div>
<div class="txt" style="position:absolute; left:112px; top:87965px;"><span id="f48" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.unmodifiableMap</span></div>
<div class="txt" style="position:absolute; left:830px; top:87881px;"><span id="f55" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">a wrapper around the underlying</span></div>
<div class="txt" style="position:absolute; left:970px; top:87922px;"><span id="f19" style="font-size:15px;vertical-align:baseline;color:rgba(255,0,0,1);">list/set/map</span></div>
<img id="background" style="position:absolute; left:0px; top:88307px;" width="1440" height="1080" src="page74.png"> <img id="background" style="position:absolute; left:1440px; top:88307px;" width="1440" height="1080" src="page-000074.png">
<div class="txt" style="position:absolute; left:33px; top:88414px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Unmodifiable Wrappers</span></div>
<div class="txt" style="position:absolute; left:941px; top:88325px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:88554px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The unmodifiable wrappers take away the ability to modify the</span></div>
<div class="txt" style="position:absolute; left:112px; top:88604px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">collection by intercepting all the operations that would modify the</span></div>
<div class="txt" style="position:absolute; left:112px; top:88651px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">collection and throwing an </span><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">UnsupportedOperationException</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:76px; top:88722px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Unmodifiable wrappers have two main uses, as follows:</span></div>
<div class="txt" style="position:absolute; left:112px; top:88789px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">To make a collection immutable once it has been built</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. In this case, it's</span></div>
<div class="txt" style="position:absolute; left:148px; top:88832px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">good practice not to maintain a reference to the backing collection. This</span></div>
<div class="txt" style="position:absolute; left:148px; top:88875px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">absolutely guarantees immutability.</span></div>
<div class="txt" style="position:absolute; left:112px; top:88936px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">To allow certain clients read-only access to your data structures. </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">You</span></div>
<div class="txt" style="position:absolute; left:148px; top:88979px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">keep a reference to the backing collection but hand out a reference to the</span></div>
<div class="txt" style="position:absolute; left:148px; top:89022px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">wrapper. In this way, clients can look but not modify, while you maintain</span></div>
<div class="txt" style="position:absolute; left:148px; top:89065px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">full access.</span></div>
<img id="background" style="position:absolute; left:0px; top:89516px;" width="1440" height="1080" src="page75.png"> <img id="background" style="position:absolute; left:1440px; top:89516px;" width="1440" height="1080" src="page-000075.png">
<div class="txt" style="position:absolute; left:33px; top:89623px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Useful immutable types</span></div>
<div class="txt" style="position:absolute; left:941px; top:89534px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:75px; top:89771px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">An Example</span></div>
<div class="txt" style="position:absolute; left:75px; top:89827px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Student {</span></div>
<div class="txt" style="position:absolute; left:153px; top:89870px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">private String name;</span></div>
<div class="txt" style="position:absolute; left:153px; top:89913px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">private List&lt;Course&gt; courses;</span></div>
<div class="txt" style="position:absolute; left:153px; top:90000px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public Student(String name,List&lt;Course&gt; courses&gt;{</span></div>
<div class="txt" style="position:absolute; left:219px; top:90043px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">this.name=name;</span></div>
<div class="txt" style="position:absolute; left:219px; top:90086px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">this.courses=courses;</span></div>
<div class="txt" style="position:absolute; left:153px; top:90130px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:153px; top:90216px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public List&lt;Course&gt; getCourses() {</span></div>
<div class="txt" style="position:absolute; left:219px; top:90259px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">return courses;</span></div>
<div class="txt" style="position:absolute; left:775px; top:90252px;"><span id="f39" style="font-size:14px;vertical-align:baseline;color:rgba(255,0,0,1);">return</span></div>
<div class="txt" style="position:absolute; left:153px; top:90302px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:666px; top:90295px;"><span id="f39" style="font-size:14px;vertical-align:baseline;color:rgba(255,0,0,1);">Collections.unmodifiableList(courses);</span></div>
<div class="txt" style="position:absolute; left:153px; top:90346px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public void setCourses(List&lt;Course&gt; courses) {</span></div>
<div class="txt" style="position:absolute; left:219px; top:90389px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">this.courses = courses;</span></div>
<div class="txt" style="position:absolute; left:153px; top:90432px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:75px; top:90475px;"><span id="f16" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:90725px;" width="1440" height="1080" src="page76.png"> <img id="background" style="position:absolute; left:1440px; top:90725px;" width="1440" height="1080" src="page-000076.png">
<div class="txt" style="position:absolute; left:33px; top:90832px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Unmodifiable Wrappers</span></div>
<div class="txt" style="position:absolute; left:941px; top:90743px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:90972px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;T&gt; Collection&lt;T&gt;</span></div>
<div class="txt" style="position:absolute; left:112px; top:91016px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">unmodifiableCollection(Collection&lt;? extends T&gt; c);</span></div>
<div class="txt" style="position:absolute; left:76px; top:91080px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;T&gt; Set&lt;T&gt; unmodifiableSet(Set&lt;? extends T&gt; s);</span></div>
<div class="txt" style="position:absolute; left:76px; top:91144px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;T&gt; List&lt;T&gt; unmodifiableList(List&lt;? extends T&gt;</span></div>
<div class="txt" style="position:absolute; left:112px; top:91189px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list);</span></div>
<div class="txt" style="position:absolute; left:76px; top:91252px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;K,V&gt; Map&lt;K, V&gt; unmodifiableMap(Map&lt;? extends K,</span></div>
<div class="txt" style="position:absolute; left:112px; top:91297px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">? extends V&gt; m);</span></div>
<div class="txt" style="position:absolute; left:76px; top:91360px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;T&gt; SortedSet&lt;T&gt;</span></div>
<div class="txt" style="position:absolute; left:112px; top:91405px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">unmodifiableSortedSet(SortedSet&lt;? extends T&gt; s);</span></div>
<div class="txt" style="position:absolute; left:76px; top:91468px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;K,V&gt; SortedMap&lt;K, V&gt;</span></div>
<div class="txt" style="position:absolute; left:112px; top:91513px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">unmodifiableSortedMap(SortedMap&lt;K, ? extends V&gt; m);</span></div>
<img id="background" style="position:absolute; left:0px; top:91934px;" width="1440" height="1080" src="page77.png"> <img id="background" style="position:absolute; left:1440px; top:91934px;" width="1440" height="1080" src="page-000077.png">
<div class="txt" style="position:absolute; left:1105px; top:91952px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:443px; top:92348px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">8 </span><span id="f13" style="font-size:47px;vertical-align:baseline;color:rgba(0,0,0,1);">Null </span><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">references</span></div>
<img id="background" style="position:absolute; left:0px; top:93143px;" width="1440" height="1080" src="page78.png"> <img id="background" style="position:absolute; left:1440px; top:93143px;" width="1440" height="1080" src="page-000078.png">
<div class="txt" style="position:absolute; left:33px; top:93249px;"><span id="f10" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Null </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">references</span></div>
<div class="txt" style="position:absolute; left:941px; top:93161px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:93390px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">In Java, </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">references to objects and arrays can also take on the special</span></div>
<div class="txt" style="position:absolute; left:112px; top:93439px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">value </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Null </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, which means that the reference doesn’t point to an</span></div>
<div class="txt" style="position:absolute; left:112px; top:93487px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object. </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Null </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">values are an unfortunate hole in Java’s type system.</span></div>
<div class="txt" style="position:absolute; left:76px; top:93558px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Primitives cannot be null and the compiler will reject such</span></div>
<div class="txt" style="position:absolute; left:112px; top:93608px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">attempts with static errors:</span></div>
<div class="txt" style="position:absolute; left:450px; top:93673px;"><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int size = null; //illegal</span></div>
<div class="txt" style="position:absolute; left:76px; top:93738px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Can assign </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">null </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to any non-primitive variable</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, and the compiler</span></div>
<div class="txt" style="position:absolute; left:112px; top:93788px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">happily accepts this code at compile time. </span><span id="f37" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">But you’ll get errors at</span></div>
<div class="txt" style="position:absolute; left:112px; top:93836px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">runtime </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">because you can’t call any methods or use any fields with</span></div>
<div class="txt" style="position:absolute; left:112px; top:93883px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">one of these references (</span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">throws NullPointerExceptions</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">):</span></div>
<div class="txt" style="position:absolute; left:331px; top:93949px;"><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">String name = null;</span></div>
<div class="txt" style="position:absolute; left:844px; top:93949px;"><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">name.length();</span></div>
<div class="txt" style="position:absolute; left:331px; top:94010px;"><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int[] points = null;</span></div>
<div class="txt" style="position:absolute; left:844px; top:94010px;"><span id="f10" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">points.length;</span></div>
<div class="txt" style="position:absolute; left:76px; top:94076px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f48" style="font-size:24px;vertical-align:baseline;color:rgba(255,0,0,1);">null </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">is not the same as an empty string </span><span id="f48" style="font-size:24px;vertical-align:baseline;color:rgba(255,0,0,1);">"" </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">or an empty array.</span></div>
<img id="background" style="position:absolute; left:0px; top:94352px;" width="1440" height="1080" src="page79.png"> <img id="background" style="position:absolute; left:1440px; top:94352px;" width="1440" height="1080" src="page-000079.png">
<div class="txt" style="position:absolute; left:33px; top:94458px;"><span id="f10" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Null </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">references</span></div>
<div class="txt" style="position:absolute; left:941px; top:94370px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:94599px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Arrays of non-primitives and collections like </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">might be non-</span></div>
<div class="txt" style="position:absolute; left:112px; top:94644px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">null but contain </span><span id="f10" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">null </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">as a value </span><span id="f26" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">非空的</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">collection</span><span id="f26" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">可以包含</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span><span id="f26" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">值</span></div>
<div class="txt" style="position:absolute; left:76px; top:94719px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">These nulls are likely to cause errors as soon as someone tries to</span></div>
<div class="txt" style="position:absolute; left:112px; top:94769px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">use the contents of the collection.</span></div>
<div class="txt" style="position:absolute; left:76px; top:94983px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Null values are troublesome and unsafe</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, so much</span></div>
<div class="txt" style="position:absolute; left:112px; top:95033px;"><span id="f42" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">so that you’re well advised to remove them from</span></div>
<div class="txt" style="position:absolute; left:112px; top:95081px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">your design vocabulary.</span></div>
<div class="txt" style="position:absolute; left:76px; top:95151px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Null values are implicitly disallowed in parameters and return</span></div>
<div class="txt" style="position:absolute; left:112px; top:95201px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">values.</span></div>
<img id="background" style="position:absolute; left:0px; top:95561px;" width="1440" height="1080" src="page80.png"> <img id="background" style="position:absolute; left:1440px; top:95561px;" width="1440" height="1080" src="page-000080.png">
<div class="txt" style="position:absolute; left:33px; top:95668px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">From Guava (by Google)</span></div>
<div class="txt" style="position:absolute; left:941px; top:95579px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:95808px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">“Careless use of null can cause a staggering variety of bugs. Studying</span></div>
<div class="txt" style="position:absolute; left:112px; top:95858px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">the Google code base, we found that something like 95% of</span></div>
<div class="txt" style="position:absolute; left:112px; top:95906px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">collections weren’t supposed to have any null values in them, and</span></div>
<div class="txt" style="position:absolute; left:112px; top:95954px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">having those fail fast rather than silently accept null would have</span></div>
<div class="txt" style="position:absolute; left:112px; top:95997px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">been helpful to developers.”</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">粗心地使用</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">会导致各种各样的错误，</span></div>
<div class="txt" style="position:absolute; left:112px; top:96045px;"><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">接受</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">值不是好的策略</span></div>
<div class="txt" style="position:absolute; left:76px; top:96192px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">“Additionally, null is unpleasantly ambiguous. It’s rarely obvious</span></div>
<div class="txt" style="position:absolute; left:112px; top:96242px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">what a null return value is supposed to mean </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">— </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">for example,</span></div>
<div class="txt" style="position:absolute; left:112px; top:96289px;"><span id="f44" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map.get(key) </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">can return null either because the value in the map is</span></div>
<div class="txt" style="position:absolute; left:112px; top:96338px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">null , or the value is not in the map. Null can mean failure, can mean</span></div>
<div class="txt" style="position:absolute; left:112px; top:96386px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">success, can mean almost anything. Using something other than null</span></div>
<div class="txt" style="position:absolute; left:112px; top:96429px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">makes your meaning clear .” </span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的含义含糊不清。</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Map.get(key)</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">返</span></div>
<div class="txt" style="position:absolute; left:112px; top:96479px;"><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">回</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">可能是</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">key</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">对应的值就是</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">，或者</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">map</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">中没有此</span><span id="f27" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">key</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">对应的值</span></div>
<img id="background" style="position:absolute; left:0px; top:96770px;" width="1440" height="1080" src="page81.png"> <img id="background" style="position:absolute; left:1440px; top:96770px;" width="1440" height="1080" src="page-000081.png">
<div class="txt" style="position:absolute; left:1105px; top:96788px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:563px; top:97185px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">Summary</span></div>
<img id="background" style="position:absolute; left:0px; top:97979px;" width="1440" height="1080" src="page82.png"> <img id="background" style="position:absolute; left:1440px; top:97979px;" width="1440" height="1080" src="page-000082.png">
<div class="txt" style="position:absolute; left:33px; top:98086px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Summary of this lecture</span></div>
<div class="txt" style="position:absolute; left:941px; top:97997px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:98226px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Static type checking:</span></div>
<div class="txt" style="position:absolute; left:112px; top:98293px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Safe from bugs</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. Static checking helps with safety by catching type errors</span></div>
<div class="txt" style="position:absolute; left:148px; top:98336px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and other bugs before runtime.</span></div>
<div class="txt" style="position:absolute; left:112px; top:98396px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Easy to understand</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. It helps with understanding, because types are</span></div>
<div class="txt" style="position:absolute; left:148px; top:98440px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">explicitly stated in the code.</span></div>
<div class="txt" style="position:absolute; left:112px; top:98500px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Ready for change</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. Static checking makes it easier to change your code by</span></div>
<div class="txt" style="position:absolute; left:148px; top:98543px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">identifying other places that need to change in tandem. For example,</span></div>
<div class="txt" style="position:absolute; left:148px; top:98587px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">when you change the name or type of a variable, the compiler</span></div>
<div class="txt" style="position:absolute; left:148px; top:98630px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">immediately displays errors at all the places where that variable is used,</span></div>
<div class="txt" style="position:absolute; left:148px; top:98673px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">reminding you to update them as well.</span></div>
<img id="background" style="position:absolute; left:0px; top:99188px;" width="1440" height="1080" src="page83.png"> <img id="background" style="position:absolute; left:1440px; top:99188px;" width="1440" height="1080" src="page-000083.png">
<div class="txt" style="position:absolute; left:33px; top:99295px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Summary</span></div>
<div class="txt" style="position:absolute; left:941px; top:99206px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:99435px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Mutability is useful for performance and convenience, but it also</span></div>
<div class="txt" style="position:absolute; left:112px; top:99485px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">creates risks of bugs by requiring the code that uses the objects to</span></div>
<div class="txt" style="position:absolute; left:112px; top:99533px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">be well-behaved on a global level, greatly complicating the</span></div>
<div class="txt" style="position:absolute; left:112px; top:99581px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">reasoning and testing we have to do to be confident in its</span></div>
<div class="txt" style="position:absolute; left:112px; top:99629px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">correctness.</span></div>
<div class="txt" style="position:absolute; left:76px; top:99699px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Make sure you understand the difference between an immutable</span></div>
<div class="txt" style="position:absolute; left:112px; top:99749px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">object (like a String ) and an immutable reference (like a final</span></div>
<div class="txt" style="position:absolute; left:112px; top:99797px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">variable).</span></div>
<div class="txt" style="position:absolute; left:76px; top:99867px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Snapshot diagrams can help with this understanding.</span></div>
<div class="txt" style="position:absolute; left:112px; top:99934px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Objects are values, represented by circles in a snapshot diagram, and an</span></div>
<div class="txt" style="position:absolute; left:148px; top:99977px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">immutable one has a double border indicating that it never changes its</span></div>
<div class="txt" style="position:absolute; left:148px; top:100020px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">value.</span></div>
<div class="txt" style="position:absolute; left:112px; top:100081px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A reference is a pointer to an object, represented by an arrow in the</span></div>
<div class="txt" style="position:absolute; left:148px; top:100124px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">snapshot diagram, and an immutable reference is an arrow with a double</span></div>
<div class="txt" style="position:absolute; left:148px; top:100167px;"><span id="f35" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">line, indicating that the arrow can’t be moved to point to a different object.</span></div>
<img id="background" style="position:absolute; left:0px; top:100397px;" width="1440" height="1080" src="page84.png"> <img id="background" style="position:absolute; left:1440px; top:100397px;" width="1440" height="1080" src="page-000084.png">
<div class="txt" style="position:absolute; left:33px; top:100504px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Summary</span></div>
<div class="txt" style="position:absolute; left:941px; top:100415px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">3.1 Data Type and Type Checking</span></div>
<div class="txt" style="position:absolute; left:76px; top:100644px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The key design principle is </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">immutability</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">: using immutable objects</span></div>
<div class="txt" style="position:absolute; left:112px; top:100694px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and immutable references as much as possible.</span></div>
<div class="txt" style="position:absolute; left:112px; top:100755px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Safe from bugs </span><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. Immutable objects aren’t susceptible(</span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">易受影响的</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) to bugs</span></div>
<div class="txt" style="position:absolute; left:148px; top:100802px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">caused by aliasing. Immutable references always point to the same object.</span></div>
<div class="txt" style="position:absolute; left:112px; top:100862px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Easy to understand. Because an immutable object or reference always</span></div>
<div class="txt" style="position:absolute; left:148px; top:100906px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">means the same thing, it’s simpler for a reader of the code to reason about</span></div>
<div class="txt" style="position:absolute; left:148px; top:100949px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">— they don’t have to trace through all the code to find all the places where</span></div>
<div class="txt" style="position:absolute; left:148px; top:100992px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">the object or reference might be changed, because it can’t be changed.</span></div>
<div class="txt" style="position:absolute; left:112px; top:101053px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Ready for change. If an object or reference can’t be changed at runtime,</span></div>
<div class="txt" style="position:absolute; left:148px; top:101096px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">then code that depends on that object or reference won’t have to be</span></div>
<div class="txt" style="position:absolute; left:148px; top:101139px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">revised when the program changes.</span></div>
<img id="background" style="position:absolute; left:0px; top:101606px;" width="1440" height="1080" src="page85.png"> <img id="background" style="position:absolute; left:1440px; top:101606px;" width="1440" height="1080" src="page-000085.png">
<div class="txt" style="position:absolute; left:1105px; top:101624px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:590px; top:102021px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">The end</span></div>
<div class="txt" style="position:absolute; left:587px; top:102280px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">March 12, 2019</span></div>
</body></html>