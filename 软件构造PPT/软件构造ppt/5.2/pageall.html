<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head> <body onload="start()"><div style="background:#5c5c5f; color:#FFF"> <p align="center">&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;[&#x6DF1;&#x5BB9;Pubmed&#x6587;&#x732E;&#x68C0;&#x7D22;] &nbsp 1. &#x6B64;&#x5904;&#x53F3;&#x952E;&#xFF1A;&#x9009;&#x83DC;&#x5355;&#x3010;&#x7FFB;&#x6210;&#x4E2D;&#x6587;&#xFF08;&#x7B80;&#x4F53;&#xFF09;&#x3011; &nbsp &nbsp &nbsp  2. &#x7FFB;&#x8BD1;&#x540E;&#xFF0C;&#x6B64;&#x5904;&#x53F3;&#x952E;&#xFF1A;&#x9009;&#x83DC;&#x5355;&#x3010;&#x6253;&#x5370;...&#x3011;&#x6210;PDF&#x683C;&#x5F0F; <br>&#x5EFA;&#x8BAE;&#x5C4F;&#x5E55;&#x5206;&#x8FA8;&#x7387;&#xFF1A;1920X1080&#xFF1B;&#x5982;&#x679C;&#x5C4F;&#x5E55;&#x592A;&#x5C0F;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;Ctrl + &#x6216; Ctrl -&#x7F29;&#x653E;&#x7F51;&#x9875;&#x3002;</p></div><style type="text/css"> .txt { white-space:nowrap; }	 #f0 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f1 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f2 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f3 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f4 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f5 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f6 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f7 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f8 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f9 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f10 { font-family:sans-serif; font-weight:normal; font-style:normal; }  #f11 { font-family:sans-serif; font-weight:normal; font-style:normal; }  #f12 { font-family:sans-serif; font-weight:normal; font-style:normal; } 	#f13 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f14 { font-family:sans-serif; font-weight:normal; font-style:normal; } #f15 { font-family:sans-serif; font-weight:normal; font-style:normal; } 	#f16 { font-family:sans-serif; font-weight:normal; font-style:normal; }	 #f17 { font-family:sans-serif; font-weight:normal; font-style:normal; } #f18 { font-family:sans-serif; font-weight:normal; font-style:normal; } #f19 { font-family:sans-serif; font-weight:normal; font-style:normal; }		#f20 { font-family:sans-serif; font-weight:normal; font-style:normal; }		</style><img id="background" style="position:absolute; left:0px; top:50px;" width="1440" height="1080" src="page1.png"> <img id="background" style="position:absolute; left:1440px; top:50px;" width="1440" height="1080" src="page-000001.png">
<div class="txt" style="position:absolute; left:1105px; top:68px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:207px; top:362px;"><span id="f9" style="font-size:55px;vertical-align:baseline;color:rgba(0,0,0,1);">Chapter 5: Reusability-Oriented Software</span></div>
<div class="txt" style="position:absolute; left:401px; top:429px;"><span id="f9" style="font-size:55px;vertical-align:baseline;color:rgba(0,0,0,1);">Construction Approaches</span></div>
<div class="txt" style="position:absolute; left:285px; top:500px;"><span id="f19" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:596px; top:719px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Xu Hanchuan</span></div>
<div class="txt" style="position:absolute; left:585px; top:772px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(255,98,176,1);">xhc@hit.edu.cn</span></div>
<div class="txt" style="position:absolute; left:607px; top:877px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">April 7, 2019</span></div>
<img id="background" style="position:absolute; left:0px; top:1050px;" width="1440" height="1080" src="page2.png"> <img id="background" style="position:absolute; left:1440px; top:1050px;" width="1440" height="1080" src="page-000002.png">
<div class="txt" style="position:absolute; left:33px; top:1157px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Outline</span></div>
<div class="txt" style="position:absolute; left:1046px; top:1068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:1297px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Designing reusable classes</span></div>
<div class="txt" style="position:absolute; left:112px; top:1364px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Inheritance and overriding</span></div>
<div class="txt" style="position:absolute; left:112px; top:1424px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping and overloading</span></div>
<div class="txt" style="position:absolute; left:112px; top:1485px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Parametric polymorphism and generic programming</span></div>
<div class="txt" style="position:absolute; left:112px; top:1545px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Composition and delegation</span></div>
<div class="txt" style="position:absolute; left:76px; top:1671px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Designing system-level reusable libraries and frameworks</span></div>
<div class="txt" style="position:absolute; left:112px; top:1738px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">API and Library</span></div>
<div class="txt" style="position:absolute; left:112px; top:1799px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Framework</span></div>
<div class="txt" style="position:absolute; left:112px; top:1859px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Java Collections Framework (an example)</span></div>
<img id="background" style="position:absolute; left:0px; top:2050px;" width="1440" height="1080" src="page3.png"> <img id="background" style="position:absolute; left:1440px; top:2050px;" width="1440" height="1080" src="page-000003.png">
<div class="txt" style="position:absolute; left:1105px; top:2068px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:270px; top:2465px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">1 Designing reusable classes</span></div>
<img id="background" style="position:absolute; left:0px; top:3050px;" width="1440" height="1080" src="page4.png"> <img id="background" style="position:absolute; left:1440px; top:3050px;" width="1440" height="1080" src="page-000004.png">
<div class="txt" style="position:absolute; left:1105px; top:3068px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:240px; top:3379px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(1) Inheritance and overriding</span></div>
<div class="txt" style="position:absolute; left:614px; top:3466px;"><span id="f13" style="font-size:72px;vertical-align:baseline;color:rgba(255,0,0,1);">see 3.4</span></div>
<img id="background" style="position:absolute; left:0px; top:4050px;" width="1440" height="1080" src="page5.png"> <img id="background" style="position:absolute; left:1440px; top:4050px;" width="1440" height="1080" src="page-000005.png">
<div class="txt" style="position:absolute; left:1105px; top:4068px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:181px; top:4405px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(2) Polymorphism, subtyping and</span></div>
<div class="txt" style="position:absolute; left:527px; top:4492px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">overloading</span></div>
<img id="background" style="position:absolute; left:0px; top:5050px;" width="1440" height="1080" src="page6.png"> <img id="background" style="position:absolute; left:1440px; top:5050px;" width="1440" height="1080" src="page-000006.png">
<div class="txt" style="position:absolute; left:1105px; top:5068px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:184px; top:5465px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(a) Three Types of Polymorphism</span></div>
<img id="background" style="position:absolute; left:0px; top:6050px;" width="1440" height="1080" src="page7.png"> <img id="background" style="position:absolute; left:1440px; top:6050px;" width="1440" height="1080" src="page-000007.png">
<div class="txt" style="position:absolute; left:1046px; top:6068px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:6152px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Three Types of Polymorphism (</span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">多态</span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:65px; top:6286px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Polymorphism </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is the provision of a single interface to entities of</span></div>
<div class="txt" style="position:absolute; left:101px; top:6335px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">different types or the use of a single symbol to represent multiple</span></div>
<div class="txt" style="position:absolute; left:101px; top:6379px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">different types </span><span id="f22" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">多态性是指为不同类型的实体提供一个接口，或者使</span></div>
<div class="txt" style="position:absolute; left:101px; top:6427px;"><span id="f22" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">用一个符号来表示多个不同的类型。</span></div>
<div class="txt" style="position:absolute; left:101px; top:6496px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Ad hoc polymorphism</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: when a function denotes different and potentially</span></div>
<div class="txt" style="position:absolute; left:137px; top:6536px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">heterogeneous(</span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">异构的</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) implementations depending on a limited range of</span></div>
<div class="txt" style="position:absolute; left:137px; top:6583px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">individually specified types and combinations. Ad hoc polymorphism is</span></div>
<div class="txt" style="position:absolute; left:137px; top:6622px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">supported in many languages using </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">function overloading</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">一个函数可以</span></div>
<div class="txt" style="position:absolute; left:137px; top:6666px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">有多个同名的实现</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">方法重载</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span></div>
<div class="txt" style="position:absolute; left:101px; top:6726px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Parametric polymorphism </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">参数多态性</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">: when code is written without</span></div>
<div class="txt" style="position:absolute; left:137px; top:6773px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">mention of any specific type and thus can be used transparently with any</span></div>
<div class="txt" style="position:absolute; left:137px; top:6816px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">number of new types. In the object-oriented programming community,</span></div>
<div class="txt" style="position:absolute; left:137px; top:6855px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">this is often known as generics or </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">generic programming</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">一个类型名字可</span></div>
<div class="txt" style="position:absolute; left:137px; top:6899px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">以代表多个类型</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">泛型编程</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span></div>
<div class="txt" style="position:absolute; left:101px; top:6963px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtyping </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(also called </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">subtype polymorphism </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">or </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">inclusion</span></div>
<div class="txt" style="position:absolute; left:137px; top:7006px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">polymorphism</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">): when a name denotes instances of many different classes</span></div>
<div class="txt" style="position:absolute; left:137px; top:7046px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">related by some common superclass </span><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">一个变量名字可以代表多个类的实例</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span></div>
<div class="txt" style="position:absolute; left:137px; top:7089px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">子类型</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span></div>
<img id="background" style="position:absolute; left:0px; top:8583px;" width="1440" height="1080" src="page8.png"> <img id="background" style="position:absolute; left:1440px; top:8583px;" width="1440" height="1080" src="page-000008.png">
<div class="txt" style="position:absolute; left:1105px; top:8601px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:235px; top:8912px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(b) Ad hoc polymorphism and</span></div>
<div class="txt" style="position:absolute; left:403px; top:8998px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">Overloading </span><span id="f14" style="font-size:72px;vertical-align:baseline;color:rgba(255,0,0,1);">see 3.4</span></div>
<img id="background" style="position:absolute; left:0px; top:9802px;" width="1440" height="1080" src="page9.png"> <img id="background" style="position:absolute; left:1440px; top:9802px;" width="1440" height="1080" src="page-000009.png">
<div class="txt" style="position:absolute; left:1105px; top:9820px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:181px; top:10131px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(c) Parametric polymorphism and</span></div>
<div class="txt" style="position:absolute; left:266px; top:10217px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">generic programming </span><span id="f14" style="font-size:72px;vertical-align:baseline;color:rgba(255,0,0,1);">see3.4</span></div>
<img id="background" style="position:absolute; left:0px; top:11021px;" width="1440" height="1080" src="page10.png"> <img id="background" style="position:absolute; left:1440px; top:11021px;" width="1440" height="1080" src="page-000010.png">
<div class="txt" style="position:absolute; left:1105px; top:11039px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:252px; top:11350px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(d) Subtyping Polymorphism</span></div>
<div class="txt" style="position:absolute; left:614px; top:11436px;"><span id="f13" style="font-size:72px;vertical-align:baseline;color:rgba(255,0,0,1);">see 3.4</span></div>
<img id="background" style="position:absolute; left:0px; top:12240px;" width="1440" height="1080" src="page11.png"> <img id="background" style="position:absolute; left:1440px; top:12240px;" width="1440" height="1080" src="page-000011.png">
<div class="txt" style="position:absolute; left:1105px; top:12258px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:140px; top:12569px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(e) Behavioral subtyping and Liskov</span></div>
<div class="txt" style="position:absolute; left:277px; top:12655px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">Substitution Principle (LSP)</span></div>
<img id="background" style="position:absolute; left:0px; top:13459px;" width="1440" height="1080" src="page12.png"> <img id="background" style="position:absolute; left:1440px; top:13459px;" width="1440" height="1080" src="page-000012.png">
<div class="txt" style="position:absolute; left:33px; top:13566px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping</span></div>
<div class="txt" style="position:absolute; left:1046px; top:13477px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:13706px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Let q(x) be a property provable about objects x of type T. Then q(y)</span></div>
<div class="txt" style="position:absolute; left:112px; top:13756px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">should be provable for objects y of type S where S is a subtype of T.</span></div>
<div class="txt" style="position:absolute; left:1014px; top:13828px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">——</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Barbara Liskov</span></div>
<div class="txt" style="position:absolute; left:76px; top:13898px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Compiler-enforced rules in Java:</span></div>
<div class="txt" style="position:absolute; left:112px; top:13965px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtypes can add, but not remove methods</span></div>
<div class="txt" style="position:absolute; left:112px; top:14025px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Concrete class must implement all undefined methods</span></div>
<div class="txt" style="position:absolute; left:112px; top:14086px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Overriding method must return same type or subtype</span></div>
<div class="txt" style="position:absolute; left:112px; top:14146px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Overriding method must accept the same parameter types</span></div>
<div class="txt" style="position:absolute; left:112px; top:14207px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Overriding method may not throw additional exceptions</span></div>
<div class="txt" style="position:absolute; left:76px; top:14272px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Also applies to specified behavior:</span></div>
<div class="txt" style="position:absolute; left:1139px; top:14242px;"><span id="f13" style="font-size:48px;vertical-align:baseline;color:rgba(0,0,0,1);">Liskov</span></div>
<div class="txt" style="position:absolute; left:1076px; top:14300px;"><span id="f13" style="font-size:48px;vertical-align:baseline;color:rgba(0,0,0,1);">Substitution</span></div>
<div class="txt" style="position:absolute; left:112px; top:14339px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Same or stronger invariants</span></div>
<div class="txt" style="position:absolute; left:1114px; top:14358px;"><span id="f13" style="font-size:48px;vertical-align:baseline;color:rgba(0,0,0,1);">Principle</span></div>
<div class="txt" style="position:absolute; left:112px; top:14400px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Same or stronger postconditions for all methods</span></div>
<div class="txt" style="position:absolute; left:1154px; top:14415px;"><span id="f13" style="font-size:48px;vertical-align:baseline;color:rgba(0,0,0,1);">(LSP)</span></div>
<div class="txt" style="position:absolute; left:112px; top:14460px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Same or weaker preconditions for all methods</span></div>
<img id="background" style="position:absolute; left:0px; top:14678px;" width="1440" height="1080" src="page13.png"> <img id="background" style="position:absolute; left:1440px; top:14678px;" width="1440" height="1080" src="page-000013.png">
<div class="txt" style="position:absolute; left:33px; top:14785px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping (LSP)</span></div>
<div class="txt" style="position:absolute; left:1046px; top:14696px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:14925px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Subclass fulfills the same invariants (and additional ones)</span></div>
<div class="txt" style="position:absolute; left:76px; top:14997px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Overridden method has the same pre and postconditions</span></div>
<img id="background" style="position:absolute; left:0px; top:15897px;" width="1440" height="1080" src="page14.png"> <img id="background" style="position:absolute; left:1440px; top:15897px;" width="1440" height="1080" src="page-000014.png">
<div class="txt" style="position:absolute; left:33px; top:16004px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping (LSP)</span></div>
<div class="txt" style="position:absolute; left:1046px; top:15915px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:16144px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Subclass fulfills the same invariants (and additional ones)</span></div>
<div class="txt" style="position:absolute; left:76px; top:16216px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Overridden method </span><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">start </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">has weaker precondition</span></div>
<div class="txt" style="position:absolute; left:76px; top:16288px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Overridden method </span><span id="f17" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">brake </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">has stronger postcondition</span></div>
<img id="background" style="position:absolute; left:0px; top:17116px;" width="1440" height="1080" src="page15.png"> <img id="background" style="position:absolute; left:1440px; top:17116px;" width="1440" height="1080" src="page-000015.png">
<div class="txt" style="position:absolute; left:33px; top:17223px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping (LSP)</span></div>
<div class="txt" style="position:absolute; left:1046px; top:17134px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:17363px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">How about these two classes? Is LSP satisfied?</span></div>
<img id="background" style="position:absolute; left:0px; top:18335px;" width="1440" height="1080" src="page16.png"> <img id="background" style="position:absolute; left:1440px; top:18335px;" width="1440" height="1080" src="page-000016.png">
<div class="txt" style="position:absolute; left:33px; top:18442px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping (LSP)</span></div>
<div class="txt" style="position:absolute; left:1046px; top:18353px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:18582px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">How about these two classes? Is LSP satisfied?</span></div>
<img id="background" style="position:absolute; left:0px; top:19554px;" width="1440" height="1080" src="page17.png"> <img id="background" style="position:absolute; left:1440px; top:19554px;" width="1440" height="1080" src="page-000017.png">
<div class="txt" style="position:absolute; left:33px; top:19661px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Behavioral subtyping (LSP)</span></div>
<div class="txt" style="position:absolute; left:1046px; top:19572px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:19801px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">How about these two classes? Is LSP satisfied?</span></div>
<div class="txt" style="position:absolute; left:743px; top:20487px;"><span id="f13" style="font-size:48px;vertical-align:baseline;color:rgba(255,0,0,1);">Invalidates stronger invariant</span></div>
<div class="txt" style="position:absolute; left:862px; top:20545px;"><span id="f13" style="font-size:48px;vertical-align:baseline;color:rgba(255,0,0,1);">(w==h) in subclass</span></div>
<img id="background" style="position:absolute; left:0px; top:20773px;" width="1440" height="1080" src="page18.png"> <img id="background" style="position:absolute; left:1440px; top:20773px;" width="1440" height="1080" src="page-000018.png">
<div class="txt" style="position:absolute; left:33px; top:20880px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance</span></div>
<div class="txt" style="position:absolute; left:1046px; top:20791px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:21020px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">refers to how subtyping between more complex types relates</span></div>
<div class="txt" style="position:absolute; left:112px; top:21068px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to subtyping between their components. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">型变是指当子类型关系出现在更加</span></div>
<div class="txt" style="position:absolute; left:112px; top:21113px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">复杂类型中时，如何处理新类型中的子类型关系</span></div>
<div class="txt" style="position:absolute; left:112px; top:21177px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">E.g., Cat extends Animal, the type Cat is a subtype of Animal.</span></div>
<div class="txt" style="position:absolute; left:112px; top:21238px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">How should List&lt;Cat&gt; relate to List&lt;Animal&gt;?</span></div>
<div class="txt" style="position:absolute; left:112px; top:21298px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Or how should a function returning Cat relate to a function</span></div>
<div class="txt" style="position:absolute; left:148px; top:21341px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">returning Animal?</span></div>
<div class="txt" style="position:absolute; left:76px; top:21467px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Three types of variance</span></div>
<div class="txt" style="position:absolute; left:112px; top:21530px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Covariant(</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">协变</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">): </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtyping is preserved. If List&lt;Cat&gt; is a subtype of</span></div>
<div class="txt" style="position:absolute; left:148px; top:21574px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Animal&gt;. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">保持子类型关系</span></div>
<div class="txt" style="position:absolute; left:112px; top:21634px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Contravariant(</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">逆变</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">): </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtyping is reversed. If List&lt;Animal&gt; is a subtype of</span></div>
<div class="txt" style="position:absolute; left:148px; top:21677px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat&gt;. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">反转了子类型关系</span></div>
<div class="txt" style="position:absolute; left:112px; top:21738px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Invariant(</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">不变</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">): </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Neither List&lt;Cat&gt; nor List&lt;Animal&gt; is a subtype of the</span></div>
<div class="txt" style="position:absolute; left:148px; top:21781px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">other. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">没有子类型关系</span></div>
<img id="background" style="position:absolute; left:0px; top:21992px;" width="1440" height="1080" src="page19.png"> <img id="background" style="position:absolute; left:1440px; top:21992px;" width="1440" height="1080" src="page-000019.png">
<div class="txt" style="position:absolute; left:33px; top:22099px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance</span></div>
<div class="txt" style="position:absolute; left:1046px; top:22010px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:88px; top:22228px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Three types of variance</span></div>
<div class="txt" style="position:absolute; left:124px; top:22290px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Covariant(</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">协变</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">): </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtyping is preserved. If List&lt;Cat&gt; is a subtype of</span></div>
<div class="txt" style="position:absolute; left:160px; top:22334px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Animal&gt;. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">保持子类型关系</span></div>
<div class="txt" style="position:absolute; left:124px; top:22394px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Contravariant(</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">逆变</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">): </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtyping is reversed. If List&lt;Animal&gt; is a subtype of</span></div>
<div class="txt" style="position:absolute; left:160px; top:22437px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat&gt;. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">反转了子类型关系</span></div>
<div class="txt" style="position:absolute; left:124px; top:22498px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Invariant(</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">不变</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">): </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Neither List&lt;Cat&gt; nor List&lt;Animal&gt; is a subtype of the</span></div>
<div class="txt" style="position:absolute; left:160px; top:22541px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">other. </span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">没有子类型关系</span></div>
<div class="txt" style="position:absolute; left:506px; top:22616px;"><span id="f69" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Invariant</span></div>
<div class="txt" style="position:absolute; left:796px; top:22616px;"><span id="f69" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Covariant</span></div>
<div class="txt" style="position:absolute; left:1066px; top:22616px;"><span id="f69" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">Contravariant</span></div>
<div class="txt" style="position:absolute; left:258px; top:22689px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">Animal</span></div>
<div class="txt" style="position:absolute; left:496px; top:22690px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">List&lt;Animal&gt;</span></div>
<div class="txt" style="position:absolute; left:781px; top:22689px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">List&lt;Animal&gt;</span></div>
<div class="txt" style="position:absolute; left:1086px; top:22689px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">List&lt;Animal&gt;</span></div>
<div class="txt" style="position:absolute; left:287px; top:22882px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">Cat</span></div>
<div class="txt" style="position:absolute; left:525px; top:22883px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">List&lt;Cat&gt;</span></div>
<div class="txt" style="position:absolute; left:810px; top:22882px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">List&lt;Cat&gt;</span></div>
<div class="txt" style="position:absolute; left:1115px; top:22882px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(255,255,255,1);">List&lt;Cat&gt;</span></div>
<img id="background" style="position:absolute; left:0px; top:23211px;" width="1440" height="1080" src="page20.png"> <img id="background" style="position:absolute; left:1440px; top:23211px;" width="1440" height="1080" src="page-000020.png">
<div class="txt" style="position:absolute; left:33px; top:23318px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in method overriding</span></div>
<div class="txt" style="position:absolute; left:1046px; top:23229px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:23945px;"><span id="f12" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtyping of the</span></div>
<div class="txt" style="position:absolute; left:62px; top:23978px;"><span id="f12" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">argument/return</span></div>
<div class="txt" style="position:absolute; left:62px; top:24012px;"><span id="f12" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">type of the</span></div>
<div class="txt" style="position:absolute; left:62px; top:24046px;"><span id="f12" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">method.</span></div>
<div class="txt" style="position:absolute; left:334px; top:23945px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">Invariance</span><span id="f12" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">The</span></div>
<div class="txt" style="position:absolute; left:334px; top:23978px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">signature of the</span></div>
<div class="txt" style="position:absolute; left:334px; top:24012px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">overriding method</span></div>
<div class="txt" style="position:absolute; left:334px; top:24046px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">is unchanged.</span></div>
<div class="txt" style="position:absolute; left:612px; top:23945px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">Covariant return</span></div>
<div class="txt" style="position:absolute; left:612px; top:23978px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">type</span><span id="f12" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">. </span><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">The</span></div>
<div class="txt" style="position:absolute; left:612px; top:24012px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">subtyping relation</span></div>
<div class="txt" style="position:absolute; left:612px; top:24046px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">is in the same</span></div>
<div class="txt" style="position:absolute; left:612px; top:24079px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">direction as the</span></div>
<div class="txt" style="position:absolute; left:612px; top:24113px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">relation between</span></div>
<div class="txt" style="position:absolute; left:612px; top:24146px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">ClassA and</span></div>
<div class="txt" style="position:absolute; left:612px; top:24180px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">ClassB.</span></div>
<div class="txt" style="position:absolute; left:889px; top:23945px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">Contravariant</span></div>
<div class="txt" style="position:absolute; left:889px; top:23978px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">argument type</span><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:889px; top:24012px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">The subtyping</span></div>
<div class="txt" style="position:absolute; left:889px; top:24046px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">relation is in the</span></div>
<div class="txt" style="position:absolute; left:889px; top:24079px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">opposite direction</span></div>
<div class="txt" style="position:absolute; left:889px; top:24113px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">to the relation</span></div>
<div class="txt" style="position:absolute; left:889px; top:24146px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">between ClassA</span></div>
<div class="txt" style="position:absolute; left:889px; top:24180px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">and ClassB.</span></div>
<div class="txt" style="position:absolute; left:1162px; top:23945px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">Covariant</span></div>
<div class="txt" style="position:absolute; left:1162px; top:23978px;"><span id="f17" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">argument type.</span></div>
<div class="txt" style="position:absolute; left:1162px; top:24012px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">Not type safe.</span></div>
<div class="txt" style="position:absolute; left:197px; top:24254px;"><span id="f20" style="font-size:28px;vertical-align:baseline;color:rgba(0,0,0,1);">https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)</span></div>
<img id="background" style="position:absolute; left:0px; top:24430px;" width="1440" height="1080" src="page21.png"> <img id="background" style="position:absolute; left:1440px; top:24430px;" width="1440" height="1080" src="page-000021.png">
<div class="txt" style="position:absolute; left:33px; top:24537px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in method overriding</span></div>
<div class="txt" style="position:absolute; left:1046px; top:24448px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:24657px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Covariant method return type</span></div>
<div class="txt" style="position:absolute; left:98px; top:24724px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">In a language which allows </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">covariant return types</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, a derived class can</span></div>
<div class="txt" style="position:absolute; left:134px; top:24767px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">override the getAnimalForAdoption method to return a more specific type</span></div>
<div class="txt" style="position:absolute; left:98px; top:24828px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Java(from 1.5) and C++ support covariant return types</span></div>
<div class="txt" style="position:absolute; left:105px; top:24899px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">class Animal{ }</span></div>
<div class="txt" style="position:absolute; left:105px; top:24937px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">class Cat extends Animal{}</span></div>
<div class="txt" style="position:absolute; left:105px; top:25014px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">public class AnimalShelter {</span></div>
<div class="txt" style="position:absolute; left:175px; top:25052px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">Animal </span><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">getAnimalForAdoption() { // ...}</span></div>
<div class="txt" style="position:absolute; left:175px; top:25129px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">void putAnimal(Animal </span><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">animal) </span><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">{ // ...}</span></div>
<div class="txt" style="position:absolute; left:105px; top:25167px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:105px; top:25244px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">class CatShelter extends AnimalShelter {</span></div>
<div class="txt" style="position:absolute; left:175px; top:25321px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">Cat </span><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">getAnimalForAdoption() { return new Cat(); }</span></div>
<div class="txt" style="position:absolute; left:175px; top:25398px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">void putAnimal(Object </span><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">animal) </span><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">{ // ...}</span></div>
<div class="txt" style="position:absolute; left:105px; top:25436px;"><span id="f23" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:25649px;" width="1440" height="1080" src="page22.png"> <img id="background" style="position:absolute; left:1440px; top:25649px;" width="1440" height="1080" src="page-000022.png">
<div class="txt" style="position:absolute; left:33px; top:25756px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in method overriding</span></div>
<div class="txt" style="position:absolute; left:1046px; top:25667px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:25876px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Contravariant method argument type</span></div>
<div class="txt" style="position:absolute; left:98px; top:25943px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Similarly, it is type safe to allow an overriding method to accept a more</span></div>
<div class="txt" style="position:absolute; left:134px; top:25986px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">general argument than the method in the base class</span></div>
<div class="txt" style="position:absolute; left:98px; top:26047px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Not many object-oriented languages actually allow this. C++ and Java would</span></div>
<div class="txt" style="position:absolute; left:134px; top:26090px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">interpret this as an unrelated method with an </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">overloaded name</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<div class="txt" style="position:absolute; left:101px; top:26146px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">class Animal{ }</span></div>
<div class="txt" style="position:absolute; left:101px; top:26184px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">class Cat extends Animal{}</span></div>
<div class="txt" style="position:absolute; left:101px; top:26261px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">public class AnimalShelter {</span></div>
<div class="txt" style="position:absolute; left:171px; top:26300px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">Animal </span><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">getAnimalForAdoption() { // ...}</span></div>
<div class="txt" style="position:absolute; left:171px; top:26377px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">void putAnimal(Animal </span><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">animal) </span><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">{ // ...}</span></div>
<div class="txt" style="position:absolute; left:101px; top:26415px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:101px; top:26492px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">class CatShelter extends AnimalShelter {</span></div>
<div class="txt" style="position:absolute; left:171px; top:26569px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">Cat </span><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">getAnimalForAdoption() { return new Cat(); }</span></div>
<div class="txt" style="position:absolute; left:171px; top:26645px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">void putAnimal(Object </span><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">animal) </span><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">{ // ...}</span></div>
<div class="txt" style="position:absolute; left:101px; top:26684px;"><span id="f29" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:26868px;" width="1440" height="1080" src="page23.png"> <img id="background" style="position:absolute; left:1440px; top:26868px;" width="1440" height="1080" src="page-000023.png">
<div class="txt" style="position:absolute; left:33px; top:26975px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in generics</span></div>
<div class="txt" style="position:absolute; left:1046px; top:26886px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:27093px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Generics are type invariant in Java </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Java</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">中的泛型是不“型变”的</span></div>
<div class="txt" style="position:absolute; left:98px; top:27162px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is a subtype of </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;</span></div>
<div class="txt" style="position:absolute; left:98px; top:27222px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is not a subtype of </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Animal</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;</span></div>
<div class="txt" style="position:absolute; left:62px; top:27286px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wildcards(</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">通配符</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:98px; top:27355px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">e.g. </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;?&gt; </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">or </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? extends Animal&gt; </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">or </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? super Animal&gt;</span></div>
<div class="txt" style="position:absolute; left:62px; top:27421px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Generic type info is erased in running-time(i.e. compile-time only)</span></div>
<div class="txt" style="position:absolute; left:98px; top:27487px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Cannot use </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">instanceof </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">to check generic type</span></div>
<div class="txt" style="position:absolute; left:62px; top:27554px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Covariant in generics:</span></div>
<div class="txt" style="position:absolute; left:98px; top:27620px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is a subtype of </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? extends Animal&gt;</span></div>
<div class="txt" style="position:absolute; left:62px; top:27686px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Contravariant in generics:</span></div>
<div class="txt" style="position:absolute; left:98px; top:27752px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Animal</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is a subtype of </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? super Cat&gt;</span></div>
<img id="background" style="position:absolute; left:0px; top:28087px;" width="1440" height="1080" src="page24.png"> <img id="background" style="position:absolute; left:1440px; top:28087px;" width="1440" height="1080" src="page-000024.png">
<div class="txt" style="position:absolute; left:33px; top:28194px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Type Erasure</span></div>
<div class="txt" style="position:absolute; left:1046px; top:28105px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:28314px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The virtual machine does not have objects of generic types</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">—</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">all</span></div>
<div class="txt" style="position:absolute; left:98px; top:28360px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">objects belong to ordinary classes. </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">虚拟机中没有泛型类型对象</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">-</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">所有对</span></div>
<div class="txt" style="position:absolute; left:98px; top:28408px;"><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">象都属于普通类</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">!</span></div>
<div class="txt" style="position:absolute; left:62px; top:28480px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Generic type info is erased in running-time(i.e. compile-time only) </span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">泛</span></div>
<div class="txt" style="position:absolute; left:98px; top:28528px;"><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">型信息只存在于编译阶段，在运行时会被</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">”</span><span id="f20" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">擦除</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">”</span></div>
<div class="txt" style="position:absolute; left:98px; top:28597px;"><span id="f52" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Whenever you define a generic type, a corresponding </span><span id="f55" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">raw </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">type is</span></div>
<div class="txt" style="position:absolute; left:134px; top:28640px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">automatically provided. The name of the raw type is simply the name of the</span></div>
<div class="txt" style="position:absolute; left:134px; top:28680px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">generic type, with the type parameters removed. </span><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">定义泛型类型时，会自动提</span></div>
<div class="txt" style="position:absolute; left:134px; top:28723px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">供一个对应的原始类型</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">非泛型类型</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">，原始类型的名字就是去掉类型参数后的</span></div>
<div class="txt" style="position:absolute; left:134px; top:28766px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">泛型类型名。</span></div>
<div class="txt" style="position:absolute; left:98px; top:28830px;"><span id="f52" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The type variables are </span><span id="f55" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">erased </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and replaced by their bounding types (or Object</span></div>
<div class="txt" style="position:absolute; left:134px; top:28870px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">for variables without bounds) </span><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">类型变量会被擦除，替换为限定类型，如果没</span></div>
<div class="txt" style="position:absolute; left:134px; top:28913px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">有限定类型则为</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Object</span><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">类型。</span></div>
<img id="background" style="position:absolute; left:0px; top:29306px;" width="1440" height="1080" src="page25.png"> <img id="background" style="position:absolute; left:1440px; top:29306px;" width="1440" height="1080" src="page-000025.png">
<div class="txt" style="position:absolute; left:1046px; top:29324px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:29413px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Type Erasure</span></div>
<div class="txt" style="position:absolute; left:35px; top:29496px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Pair&lt;T&gt;</span></div>
<div class="txt" style="position:absolute; left:35px; top:29529px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:97px; top:29563px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">first;</span></div>
<div class="txt" style="position:absolute; left:97px; top:29596px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">second;</span></div>
<div class="txt" style="position:absolute; left:97px; top:29630px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public Pair() { first = null; second = null; }</span></div>
<div class="txt" style="position:absolute; left:97px; top:29664px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public Pair(T first, </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">second)</span></div>
<div class="txt" style="position:absolute; left:159px; top:29697px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{ this.first = first; this.second = second; }</span></div>
<div class="txt" style="position:absolute; left:97px; top:29731px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">getFirst() { return first; }</span></div>
<div class="txt" style="position:absolute; left:97px; top:29764px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">getSecond() { return second; }</span></div>
<div class="txt" style="position:absolute; left:97px; top:29798px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public void setFirst(T newValue) { first = newValue; }</span></div>
<div class="txt" style="position:absolute; left:97px; top:29832px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public void setSecond(T newValue) { second = newValue; }</span></div>
<div class="txt" style="position:absolute; left:35px; top:29865px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:757px; top:29929px;"><span id="f116" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">After erasure ( to Object)</span></div>
<div class="txt" style="position:absolute; left:133px; top:29991px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Pair</span></div>
<div class="txt" style="position:absolute; left:133px; top:30025px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:195px; top:30059px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Object </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">first;</span></div>
<div class="txt" style="position:absolute; left:195px; top:30092px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Object </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">second;</span></div>
<div class="txt" style="position:absolute; left:195px; top:30126px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public Pair(Object first, </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Object </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">second)</span></div>
<div class="txt" style="position:absolute; left:195px; top:30159px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{ this.first = first; this.second = second;}</span></div>
<div class="txt" style="position:absolute; left:195px; top:30193px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Object </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">getFirst() { return first; }</span></div>
<div class="txt" style="position:absolute; left:195px; top:30227px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Object </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">getSecond() { return second; }</span></div>
<div class="txt" style="position:absolute; left:195px; top:30260px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public void setFirst(Object newValue) { first = newValue; }</span></div>
<div class="txt" style="position:absolute; left:195px; top:30294px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public void setSecond(Object newValue) { second = newValue; }</span></div>
<div class="txt" style="position:absolute; left:133px; top:30327px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:30525px;" width="1440" height="1080" src="page26.png"> <img id="background" style="position:absolute; left:1440px; top:30525px;" width="1440" height="1080" src="page-000026.png">
<div class="txt" style="position:absolute; left:33px; top:30632px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Type Erasure</span></div>
<div class="txt" style="position:absolute; left:1046px; top:30543px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:42px; top:30775px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Interval&lt;T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">extends Comparable &amp; Serializable&gt; </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">implements Serializable</span></div>
<div class="txt" style="position:absolute; left:42px; top:30809px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:104px; top:30843px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">lower;</span></div>
<div class="txt" style="position:absolute; left:104px; top:30876px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">upper;</span></div>
<div class="txt" style="position:absolute; left:104px; top:30910px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:104px; top:30943px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public Interval(T first, </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">second)</span></div>
<div class="txt" style="position:absolute; left:104px; top:30977px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:166px; top:31010px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">if (first.compareTo(second) &lt;= 0) { lower = first; upper = second; }</span></div>
<div class="txt" style="position:absolute; left:166px; top:31041px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">else { lower = second; upper = first; } </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">//</span><span id="f39" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">此处因为限定了</span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(255,0,0,1);">T</span><span id="f39" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">的具体类型，所以可以调</span></div>
<div class="txt" style="position:absolute; left:786px; top:31075px;"><span id="f39" style="font-size:28px;vertical-align:baseline;color:rgba(255,0,0,1);">用类型相关的具体方法</span></div>
<div class="txt" style="position:absolute; left:104px; top:31111px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:42px; top:31145px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:757px; top:31214px;"><span id="f66" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">After erasure (to bounding type)</span></div>
<div class="txt" style="position:absolute; left:140px; top:31286px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Interval implements Serializable</span></div>
<div class="txt" style="position:absolute; left:140px; top:31319px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:202px; top:31353px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Comparable </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">lower;</span></div>
<div class="txt" style="position:absolute; left:202px; top:31386px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">private </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Comparable </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">upper;</span></div>
<div class="txt" style="position:absolute; left:202px; top:31420px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:202px; top:31454px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">public Interval(Comparable first, </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,255,1);">Comparable </span><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">second) { . . . }</span></div>
<div class="txt" style="position:absolute; left:140px; top:31487px;"><span id="f11" style="font-size:11px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:31744px;" width="1440" height="1080" src="page27.png"> <img id="background" style="position:absolute; left:1440px; top:31744px;" width="1440" height="1080" src="page-000027.png">
<div class="txt" style="position:absolute; left:1046px; top:31762px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:31851px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Runtime Type Inquiry Only Works with Raw Types</span></div>
<div class="txt" style="position:absolute; left:59px; top:31977px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Runtime Type Inquiry Only Works with Raw Types </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">运行时类型查询</span></div>
<div class="txt" style="position:absolute; left:95px; top:32025px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">只适用于原始类型</span></div>
<div class="txt" style="position:absolute; left:84px; top:32128px;"><span id="f20" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">if (a instanceof Pair&lt;String&gt;) // Error</span></div>
<div class="txt" style="position:absolute; left:84px; top:32171px;"><span id="f20" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">if (a instanceof Pair&lt;T&gt;) // Error</span></div>
<div class="txt" style="position:absolute; left:84px; top:32258px;"><span id="f20" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Pair&lt;String&gt; stringPair = . . .;</span></div>
<div class="txt" style="position:absolute; left:84px; top:32301px;"><span id="f20" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Pair&lt;Employee&gt; employeePair = . . .;</span></div>
<div class="txt" style="position:absolute; left:84px; top:32344px;"><span id="f20" style="font-size:14px;vertical-align:baseline;color:rgba(255,0,0,1);">if (stringPair.getClass() == employeePair.getClass())</span></div>
<div class="txt" style="position:absolute; left:124px; top:32387px;"><span id="f20" style="font-size:14px;vertical-align:baseline;color:rgba(255,0,0,1);">{}// they are equal</span></div>
<img id="background" style="position:absolute; left:0px; top:32963px;" width="1440" height="1080" src="page28.png"> <img id="background" style="position:absolute; left:1440px; top:32963px;" width="1440" height="1080" src="page-000028.png">
<div class="txt" style="position:absolute; left:33px; top:33070px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtype in generics</span></div>
<div class="txt" style="position:absolute; left:1046px; top:32981px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:33185px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Generics are type invariant in Java </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Java</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">中的泛型是不“型变”的</span></div>
<div class="txt" style="position:absolute; left:98px; top:33254px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is a subtype of </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;</span></div>
<div class="txt" style="position:absolute; left:98px; top:33314px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is not a subtype of </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Animal</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;</span></div>
<div class="txt" style="position:absolute; left:62px; top:33380px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">E.g., Manager is subtype of Employee, but Pair&lt;Manager&gt; is not a</span></div>
<div class="txt" style="position:absolute; left:98px; top:33430px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">subtype of Pair&lt;Employee&gt;</span></div>
<div class="txt" style="position:absolute; left:87px; top:33494px;"><span id="f69" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Pair&lt;Manager&gt; managerBuddies = new Pair&lt;&gt;(ceo, cfo);</span></div>
<div class="txt" style="position:absolute; left:87px; top:33581px;"><span id="f69" style="font-size:14px;vertical-align:baseline;color:rgba(255,0,0,1);">// illegal, but suppose it wasn't</span></div>
<div class="txt" style="position:absolute; left:87px; top:33624px;"><span id="f69" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Pair&lt;Employee&gt; employeeBuddies = managerBuddies;</span></div>
<div class="txt" style="position:absolute; left:87px; top:33667px;"><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">// </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">legal</span></div>
<div class="txt" style="position:absolute; left:87px; top:33710px;"><span id="f69" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">employeeBuddies.setFirst(lowlyEmployee);</span></div>
<div class="txt" style="position:absolute; left:98px; top:33783px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">But employeeBuddies and managerBuddies refer to the </span><span id="f42" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">same object</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. We now</span></div>
<div class="txt" style="position:absolute; left:134px; top:33826px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">managed to pair up the cfo with a lowly employee, which should not be</span></div>
<div class="txt" style="position:absolute; left:134px; top:33866px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">possible for a Pair&lt;Manager&gt;. </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">employeeBuddies</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">和</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">managerBuddies</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">现在指</span></div>
<div class="txt" style="position:absolute; left:134px; top:33909px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">向了同一个对象，可以将</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">cfo</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">同普通员工分为一组，会出现错误（如工资等级设</span></div>
<div class="txt" style="position:absolute; left:134px; top:33952px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">置等</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">，因此第二行代码是不允许的。</span></div>
<img id="background" style="position:absolute; left:0px; top:34182px;" width="1440" height="1080" src="page29.png"> <img id="background" style="position:absolute; left:1440px; top:34182px;" width="1440" height="1080" src="page-000029.png">
<div class="txt" style="position:absolute; left:33px; top:34289px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Subtype in generics</span></div>
<div class="txt" style="position:absolute; left:1046px; top:34200px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:35401px;" width="1440" height="1080" src="page30.png"> <img id="background" style="position:absolute; left:1440px; top:35401px;" width="1440" height="1080" src="page-000030.png">
<div class="txt" style="position:absolute; left:33px; top:35508px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in generics</span></div>
<div class="txt" style="position:absolute; left:1046px; top:35419px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:62px; top:35629px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Covariant in generics:</span></div>
<div class="txt" style="position:absolute; left:98px; top:35695px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is a subtype of </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? extends Animal&gt;</span></div>
<div class="txt" style="position:absolute; left:88px; top:35746px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Cat&gt; objs = new ArrayList&lt;&gt;();</span></div>
<div class="txt" style="position:absolute; left:88px; top:35784px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">objs.add(new Cat());</span></div>
<div class="txt" style="position:absolute; left:88px; top:35822px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">objs.add(new WhiteCat());</span></div>
<div class="txt" style="position:absolute; left:88px; top:35861px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? extends Animal&gt; animals = objs;</span></div>
<div class="txt" style="position:absolute; left:88px; top:35938px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new Cat()); //</span><span id="f37" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">compile error</span></div>
<div class="txt" style="position:absolute; left:88px; top:35976px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new Animal()); //</span><span id="f37" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">compile error</span></div>
<div class="txt" style="position:absolute; left:88px; top:36014px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new Object()); //</span><span id="f37" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">compile error</span></div>
<div class="txt" style="position:absolute; left:88px; top:36053px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(null);</span></div>
<div class="txt" style="position:absolute; left:561px; top:36053px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">//succeed, but it is meaningless.</span></div>
<div class="txt" style="position:absolute; left:88px; top:36126px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Animal animal = animals.get(0); //</span><span id="f37" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">succeed</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,255,1);">！</span></div>
<div class="txt" style="position:absolute; left:98px; top:36189px;"><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">对于类型 </span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? extends Animal&gt;,</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">调用一个返回</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Animal</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">类型</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">(</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">或子类型</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">的方法</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">(</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">如</span></div>
<div class="txt" style="position:absolute; left:134px; top:36228px;"><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">：</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">T get(int pos))</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">是安全的</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">因为</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">compiler</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">知道这个</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">中的任何对象至少具有</span></div>
<div class="txt" style="position:absolute; left:134px; top:36266px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Animal</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">类型</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">(</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">或子类型</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">),</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">可以完成类型转换。</span></div>
<div class="txt" style="position:absolute; left:98px; top:36320px;"><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">但调用类似</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">add(E e)</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">的方法则不安全</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">,</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">类型擦除机制会导致运行时可以往</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">中储存</span></div>
<div class="txt" style="position:absolute; left:134px; top:36358px;"><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">各种类型的对象。</span></div>
<div class="txt" style="position:absolute; left:98px; top:36412px;"><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">因此</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">,Java</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">此时禁止了</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">中所有具有泛型输入参数的方法</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">,</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">如</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">:add(T item)</span></div>
<img id="background" style="position:absolute; left:0px; top:36620px;" width="1440" height="1080" src="page31.png"> <img id="background" style="position:absolute; left:1440px; top:36620px;" width="1440" height="1080" src="page-000031.png">
<div class="txt" style="position:absolute; left:33px; top:36727px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in generics</span></div>
<div class="txt" style="position:absolute; left:1046px; top:36638px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:59px; top:36845px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Contravariant in generics:</span></div>
<div class="txt" style="position:absolute; left:95px; top:36911px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Animal</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt; is a subtype of </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? super Cat&gt;</span></div>
<div class="txt" style="position:absolute; left:72px; top:36969px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;? super Cat&gt; animals = new ArrayList&lt;Animal&gt;();</span></div>
<div class="txt" style="position:absolute; left:72px; top:37008px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new Cat());</span></div>
<div class="txt" style="position:absolute; left:72px; top:37046px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new WhiteCat ());</span></div>
<div class="txt" style="position:absolute; left:72px; top:37085px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new Animal()); //</span><span id="f32" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">compile error</span></div>
<div class="txt" style="position:absolute; left:72px; top:37123px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">animals.add(new Object()); //</span><span id="f32" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">compile error</span></div>
<div class="txt" style="position:absolute; left:72px; top:37200px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Animal animal = animals.get(0); //</span><span id="f32" style="font-size:12px;vertical-align:baseline;color:rgba(255,0,0,1);">compile error</span></div>
<div class="txt" style="position:absolute; left:72px; top:37238px;"><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Object o = animals.get(1); //succeed, but it is meaningless.</span></div>
<div class="txt" style="position:absolute; left:75px; top:37320px;"><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">对于</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">中的 </span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">T get(int pos)</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">方法，当指定类型是</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">“? super Cat”</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">时</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">, get</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">方法的返回</span></div>
<div class="txt" style="position:absolute; left:111px; top:37358px;"><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">类型就变成了</span><span id="f53" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">“? super Cat”, </span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">即返回类型可能是</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Cat</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">或者</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Cat</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">的基类型，</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">compiler</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">无法</span></div>
<div class="txt" style="position:absolute; left:111px; top:37396px;"><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">确定具体类型，因此拒绝调用任何返回类型为</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">T</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">的方法</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">(</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">除非是读取为</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">Object</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">类</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:75px; top:37450px;"><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">但调用类似</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">add(E e)</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">的方法则安全</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">传入</span><span id="f82" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Cat</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">及其子类</span><span id="f82" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">(WhiteCat)</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">是安全的</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">因为</span><span id="f82" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">compiler</span></div>
<div class="txt" style="position:absolute; left:111px; top:37489px;"><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">知道这个</span><span id="f82" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">包含的是</span><span id="f82" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Cat</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">或</span><span id="f82" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Cat</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">的基类对象。</span></div>
<div class="txt" style="position:absolute; left:75px; top:37542px;"><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">因此</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">,Java</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">此时禁止了</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">中所有具有泛型返回类型的方法</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">,</span><span id="f47" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">如</span><span id="f17" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">:get()</span></div>
<img id="background" style="position:absolute; left:0px; top:37839px;" width="1440" height="1080" src="page32.png"> <img id="background" style="position:absolute; left:1440px; top:37839px;" width="1440" height="1080" src="page-000032.png">
<div class="txt" style="position:absolute; left:33px; top:37946px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">PECS</span></div>
<div class="txt" style="position:absolute; left:1046px; top:37857px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:59px; top:38072px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Here is a mnemonic(</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">记忆术</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">), </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">PECS (also named Get and Put</span></div>
<div class="txt" style="position:absolute; left:95px; top:38124px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Principle), </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">to help remember which wildcard type to use:</span></div>
<div class="txt" style="position:absolute; left:349px; top:38196px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">producer-extends, consumer-super</span></div>
<div class="txt" style="position:absolute; left:59px; top:38267px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The lesson is clear. For maximum flexibility, use wildcard types on</span></div>
<div class="txt" style="position:absolute; left:95px; top:38316px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">input parameters that represent producers or consumers.</span></div>
<div class="txt" style="position:absolute; left:95px; top:38381px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">If a parameterized type represents a </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">T producer, use&lt;? extends T&gt;</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, e.g., get()</span></div>
<div class="txt" style="position:absolute; left:95px; top:38442px;"><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">If a parameterized type represents a </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">T consumer, use&lt;? super T&gt;, </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">e.g., add()</span></div>
<img id="background" style="position:absolute; left:0px; top:39058px;" width="1440" height="1080" src="page33.png"> <img id="background" style="position:absolute; left:1440px; top:39058px;" width="1440" height="1080" src="page-000033.png">
<div class="txt" style="position:absolute; left:33px; top:39165px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Variance in generics</span></div>
<div class="txt" style="position:absolute; left:1046px; top:39076px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:59px; top:39294px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wildcard subtyping in Java can be visualized as a cube</span></div>
<img id="background" style="position:absolute; left:0px; top:40277px;" width="1440" height="1080" src="page34.png"> <img id="background" style="position:absolute; left:1440px; top:40277px;" width="1440" height="1080" src="page-000034.png">
<div class="txt" style="position:absolute; left:1105px; top:40295px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:209px; top:40692px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(3) Delegation and Composition</span></div>
<img id="background" style="position:absolute; left:0px; top:41496px;" width="1440" height="1080" src="page35.png"> <img id="background" style="position:absolute; left:1440px; top:41496px;" width="1440" height="1080" src="page-000035.png">
<div class="txt" style="position:absolute; left:33px; top:41602px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f11" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Sorting </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">example</span></div>
<div class="txt" style="position:absolute; left:76px; top:41743px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Version A:</span></div>
<div class="txt" style="position:absolute; left:76px; top:42175px;"><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Version B:</span></div>
<div class="txt" style="position:absolute; left:1046px; top:41514px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:1097px; top:42168px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(50,50,50,1);">Lambda Expressions</span></div>
<img id="background" style="position:absolute; left:0px; top:42715px;" width="1440" height="1080" src="page36.png"> <img id="background" style="position:absolute; left:1440px; top:42715px;" width="1440" height="1080" src="page-000036.png">
<div class="txt" style="position:absolute; left:33px; top:42817px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">委托</span></div>
<div class="txt" style="position:absolute; left:1046px; top:42733px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:42962px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Delegation </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is simply when one object relies on another object for</span></div>
<div class="txt" style="position:absolute; left:112px; top:43012px;"><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">some subset of its functionality </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">(one entity passing something to</span></div>
<div class="txt" style="position:absolute; left:112px; top:43055px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">another entity) </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">委托是指一个对象依赖于另外一个对象的部分功能</span></div>
<div class="txt" style="position:absolute; left:112px; top:43124px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">e.g. here, the </span><span id="f28" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Sorter </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">is delegating functionality to some </span><span id="f28" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Comparator</span></div>
<div class="txt" style="position:absolute; left:76px; top:43188px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Judicious delegation enables code reuse </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">委托有利于复用</span></div>
<div class="txt" style="position:absolute; left:112px; top:43257px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f28" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Sorter </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">can be reused with arbitrary sort orders</span></div>
<div class="txt" style="position:absolute; left:112px; top:43317px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f28" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Comparators </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">can be reused with arbitrary client code that needs to</span></div>
<div class="txt" style="position:absolute; left:148px; top:43361px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">compare integers</span></div>
<div class="txt" style="position:absolute; left:76px; top:43427px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Explicit delegation: </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">passing the sending object to the receiving object</span></div>
<div class="txt" style="position:absolute; left:76px; top:43499px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Implicit delegation: </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">by the member lookup rules of the language</span></div>
<div class="txt" style="position:absolute; left:76px; top:43643px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">can be described as a low level mechanism for sharing</span></div>
<div class="txt" style="position:absolute; left:112px; top:43688px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">code and data between entities. </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">委托可看做是在实体之间共享代码和</span></div>
<div class="txt" style="position:absolute; left:112px; top:43736px;"><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">数据的低层机制</span></div>
<img id="background" style="position:absolute; left:0px; top:43934px;" width="1440" height="1080" src="page37.png"> <img id="background" style="position:absolute; left:1440px; top:43934px;" width="1440" height="1080" src="page-000037.png">
<div class="txt" style="position:absolute; left:33px; top:44041px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">A simple Delegation example</span></div>
<div class="txt" style="position:absolute; left:1046px; top:43952px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:45153px;" width="1440" height="1080" src="page38.png"> <img id="background" style="position:absolute; left:1440px; top:45153px;" width="1440" height="1080" src="page-000038.png">
<div class="txt" style="position:absolute; left:33px; top:45260px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">A simple Delegation example</span></div>
<div class="txt" style="position:absolute; left:1046px; top:45171px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:966px; top:45978px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">Switch to</span></div>
<div class="txt" style="position:absolute; left:980px; top:46026px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">another</span></div>
<div class="txt" style="position:absolute; left:959px; top:46074px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">forwarder</span></div>
<img id="background" style="position:absolute; left:0px; top:46372px;" width="1440" height="1080" src="page39.png"> <img id="background" style="position:absolute; left:1440px; top:46372px;" width="1440" height="1080" src="page-000039.png">
<div class="txt" style="position:absolute; left:33px; top:46479px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation</span></div>
<div class="txt" style="position:absolute; left:1046px; top:46390px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:46619px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The delegation pattern is a software design pattern for</span></div>
<div class="txt" style="position:absolute; left:112px; top:46669px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">implementing delegation, though this term is also used loosely for</span></div>
<div class="txt" style="position:absolute; left:112px; top:46712px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">consultation or forwarding.(</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">也称为转发</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:76px; top:46787px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation is </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">dependent upon dynamic binding, </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">as it requires that</span></div>
<div class="txt" style="position:absolute; left:112px; top:46837px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">a given method call can invoke different segments of code at</span></div>
<div class="txt" style="position:absolute; left:112px; top:46885px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">runtime.</span></div>
<div class="txt" style="position:absolute; left:76px; top:46955px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Process</span></div>
<div class="txt" style="position:absolute; left:112px; top:47022px;"><span id="f28" style="font-size:32px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The Receiver object delegates operations to the Delegate object</span></div>
<div class="txt" style="position:absolute; left:112px; top:47082px;"><span id="f28" style="font-size:32px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The Receiver object makes sure, that the Client does not misuse the</span></div>
<div class="txt" style="position:absolute; left:148px; top:47125px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegate object.</span></div>
<div class="txt" style="position:absolute; left:287px; top:47311px;"><span id="f36" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Client</span></div>
<div class="txt" style="position:absolute; left:465px; top:47307px;"><span id="f34" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">calls </span><span id="f36" style="font-size:31px;vertical-align:super;color:rgba(0,0,0,1);">Receiver </span><span id="f34" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">delegates to </span><span id="f36" style="font-size:31px;vertical-align:super;color:rgba(0,0,0,1);">Delegate</span></div>
<img id="background" style="position:absolute; left:0px; top:47591px;" width="1440" height="1080" src="page40.png"> <img id="background" style="position:absolute; left:1440px; top:47591px;" width="1440" height="1080" src="page-000040.png">
<div class="txt" style="position:absolute; left:1046px; top:47609px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:47698px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Using delegation to extend functionality</span></div>
<div class="txt" style="position:absolute; left:76px; top:47838px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Consider </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">java.util.List</span></div>
<div class="txt" style="position:absolute; left:76px; top:48054px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Suppose we want a list that logs its operations to the console…</span></div>
<div class="txt" style="position:absolute; left:112px; top:48120px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">LoggingList </span><span id="f24" style="font-size:33px;vertical-align:baseline;color:rgba(0,0,0,1);">is composed of </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">a </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, and delegates (the non-logging)</span></div>
<div class="txt" style="position:absolute; left:148px; top:48164px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">functionality to that </span><span id="f15" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">.</span></div>
<img id="background" style="position:absolute; left:0px; top:48810px;" width="1440" height="1080" src="page41.png"> <img id="background" style="position:absolute; left:1440px; top:48810px;" width="1440" height="1080" src="page-000041.png">
<div class="txt" style="position:absolute; left:42px; top:48917px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation vs. Inheritance</span></div>
<div class="txt" style="position:absolute; left:1046px; top:48828px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:49057px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Inheritance: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Extending a Base class by a new operation or</span></div>
<div class="txt" style="position:absolute; left:112px; top:49107px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">overwriting an operation.</span></div>
<div class="txt" style="position:absolute; left:76px; top:49177px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">Delegation: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Catching an operation and sending it to another object.</span></div>
<div class="txt" style="position:absolute; left:76px; top:49249px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Many design patterns use a combination of inheritance and</span></div>
<div class="txt" style="position:absolute; left:112px; top:49299px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">delegation.</span></div>
<div class="txt" style="position:absolute; left:303px; top:49362px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span></div>
<div class="txt" style="position:absolute; left:267px; top:49467px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Add()</span></div>
<div class="txt" style="position:absolute; left:270px; top:49503px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Remove()</span></div>
<div class="txt" style="position:absolute; left:302px; top:49650px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Stack</span></div>
<div class="txt" style="position:absolute; left:290px; top:49740px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Push()</span></div>
<div class="txt" style="position:absolute; left:290px; top:49788px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Pop()</span></div>
<div class="txt" style="position:absolute; left:290px; top:49836px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Top()</span></div>
<div class="txt" style="position:absolute; left:834px; top:49457px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Stack</span></div>
<div class="txt" style="position:absolute; left:816px; top:49522px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">list:List</span></div>
<div class="txt" style="position:absolute; left:818px; top:49609px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Push()</span></div>
<div class="txt" style="position:absolute; left:818px; top:49657px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Pop()</span></div>
<div class="txt" style="position:absolute; left:818px; top:49705px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">+Top()</span></div>
<div class="txt" style="position:absolute; left:1162px; top:49471px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span></div>
<div class="txt" style="position:absolute; left:1125px; top:49585px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Remove()</span></div>
<div class="txt" style="position:absolute; left:1130px; top:49629px;"><span id="f23" style="font-size:39px;vertical-align:baseline;color:rgba(0,0,0,1);">Add()</span></div>
<img id="background" style="position:absolute; left:0px; top:50029px;" width="1440" height="1080" src="page42.png"> <img id="background" style="position:absolute; left:1440px; top:50029px;" width="1440" height="1080" src="page-000042.png">
<div class="txt" style="position:absolute; left:33px; top:50136px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation vs. Inheritance</span></div>
<div class="txt" style="position:absolute; left:1046px; top:50047px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:258px; top:50265px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">public class A {</span></div>
<div class="txt" style="position:absolute; left:336px; top:50309px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">void foo() { this.bar(); }</span></div>
<div class="txt" style="position:absolute; left:336px; top:50395px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">void bar() { System.out.println("A.bar"); }</span></div>
<div class="txt" style="position:absolute; left:258px; top:50438px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:258px; top:50525px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">public class B extends A {</span></div>
<div class="txt" style="position:absolute; left:336px; top:50568px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">public B() {}</span></div>
<div class="txt" style="position:absolute; left:336px; top:50654px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">void foo() { super.foo(); }</span></div>
<div class="txt" style="position:absolute; left:336px; top:50741px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">void bar() { System.out.println("B.bar"); }</span></div>
<div class="txt" style="position:absolute; left:258px; top:50784px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:336px; top:50870px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">B b = new B();</span></div>
<div class="txt" style="position:absolute; left:336px; top:50913px;"><span id="f18" style="font-size:14px;vertical-align:baseline;color:rgba(0,0,0,1);">b.foo();</span></div>
<div class="txt" style="position:absolute; left:76px; top:50996px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Calling </span><span id="f15" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">b.foo() </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">will result in what?</span></div>
<img id="background" style="position:absolute; left:0px; top:51248px;" width="1440" height="1080" src="page43.png"> <img id="background" style="position:absolute; left:1440px; top:51248px;" width="1440" height="1080" src="page-000043.png">
<div class="txt" style="position:absolute; left:33px; top:51350px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: association</span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">关联关系</span></div>
<div class="txt" style="position:absolute; left:1046px; top:51266px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:51495px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Association: a persistent relationship between classes of objects</span></div>
<div class="txt" style="position:absolute; left:112px; top:51545px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">that allows one object instance to cause another to perform an</span></div>
<div class="txt" style="position:absolute; left:112px; top:51593px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">action on its behalf.</span></div>
<div class="txt" style="position:absolute; left:112px; top:51658px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">This relationship is structural, because it specifies that objects of one kind</span></div>
<div class="txt" style="position:absolute; left:148px; top:51701px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">are connected to objects of another and does not represent behavior.</span></div>
<div class="txt" style="position:absolute; left:870px; top:51789px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">关联</span></div>
<div class="txt" style="position:absolute; left:506px; top:52184px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">角色名</span></div>
<div class="txt" style="position:absolute; left:1026px; top:52205px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">多重性</span></div>
<img id="background" style="position:absolute; left:0px; top:52467px;" width="1440" height="1080" src="page44.png"> <img id="background" style="position:absolute; left:1440px; top:52467px;" width="1440" height="1080" src="page-000044.png">
<div class="txt" style="position:absolute; left:33px; top:52574px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: association</span></div>
<div class="txt" style="position:absolute; left:1046px; top:52485px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:52768px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">class Course {}</span></div>
<div class="txt" style="position:absolute; left:608px; top:52780px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student</span></div>
<div class="txt" style="position:absolute; left:76px; top:52835px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">class Student {</span></div>
<div class="txt" style="position:absolute; left:112px; top:52902px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">private Course [ ] selectedCourses;</span></div>
<div class="txt" style="position:absolute; left:76px; top:52970px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:859px; top:52750px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">- selectedCourses</span></div>
<div class="txt" style="position:absolute; left:1097px; top:52806px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">5..*</span></div>
<div class="txt" style="position:absolute; left:1226px; top:52780px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Course</span></div>
<div class="txt" style="position:absolute; left:76px; top:53091px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">class Teacher {</span></div>
<div class="txt" style="position:absolute; left:112px; top:53158px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">private Student [ ] students;</span></div>
<div class="txt" style="position:absolute; left:76px; top:53225px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:76px; top:53292px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">class Student {</span></div>
<div class="txt" style="position:absolute; left:619px; top:53266px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Teacher</span></div>
<div class="txt" style="position:absolute; left:112px; top:53359px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">private Teacher teacher;</span></div>
<div class="txt" style="position:absolute; left:76px; top:53427px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:814px; top:53237px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1</span></div>
<div class="txt" style="position:absolute; left:1006px; top:53236px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">- students</span></div>
<div class="txt" style="position:absolute; left:813px; top:53294px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">- teacher</span></div>
<div class="txt" style="position:absolute; left:1097px; top:53293px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">0..*</span></div>
<div class="txt" style="position:absolute; left:1232px; top:53266px;"><span id="f22" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student</span></div>
<img id="background" style="position:absolute; left:0px; top:53686px;" width="1440" height="1080" src="page45.png"> <img id="background" style="position:absolute; left:1440px; top:53686px;" width="1440" height="1080" src="page-000045.png">
<div class="txt" style="position:absolute; left:33px; top:53788px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: dependency </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">依赖关系</span></div>
<div class="txt" style="position:absolute; left:1046px; top:53704px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:53933px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Dependency: a temporary relationship that an object requires other</span></div>
<div class="txt" style="position:absolute; left:112px; top:53983px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">objects (suppliers) for their implementation.</span></div>
<img id="background" style="position:absolute; left:0px; top:54905px;" width="1440" height="1080" src="page46.png"> <img id="background" style="position:absolute; left:1440px; top:54905px;" width="1440" height="1080" src="page-000046.png">
<div class="txt" style="position:absolute; left:1046px; top:54923px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:55012px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: composition and aggregation </span><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">组合和聚合</span></div>
<div class="txt" style="position:absolute; left:76px; top:55152px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Composition is a way to combine simple objects or data types into</span></div>
<div class="txt" style="position:absolute; left:112px; top:55202px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">more complex ones.</span></div>
<div class="txt" style="position:absolute; left:112px; top:55266px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">An object of a composite type (e.g. </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">car</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">) "has an" object of a simpler type</span></div>
<div class="txt" style="position:absolute; left:148px; top:55310px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">(e.g. </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">wheel</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">).</span></div>
<div class="txt" style="position:absolute; left:112px; top:55370px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Composition is implemented such that an object contains another object.</span></div>
<div class="txt" style="position:absolute; left:112px; top:55431px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">A special composition: aggregation</span></div>
<div class="txt" style="position:absolute; left:76px; top:55496px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">In composition, when the owning object is destroyed, so are the</span></div>
<div class="txt" style="position:absolute; left:112px; top:55546px;"><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">contained objects. In aggregation, this is not necessarily true.</span></div>
<div class="txt" style="position:absolute; left:112px; top:55611px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A university owns various departments, and each department has a</span></div>
<div class="txt" style="position:absolute; left:148px; top:55655px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">number of professors. If the university closes, the departments will no</span></div>
<div class="txt" style="position:absolute; left:148px; top:55698px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">longer exist, but the professors in those departments will continue to exist.</span></div>
<div class="txt" style="position:absolute; left:112px; top:55758px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">University </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">can be seen as a composition of </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">departments</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, whereas</span></div>
<div class="txt" style="position:absolute; left:148px; top:55801px;"><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">departments </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">have an aggregation of </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">professors</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. A </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Professor </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">could</span></div>
<div class="txt" style="position:absolute; left:148px; top:55844px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">work in more than one </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">department</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, but a </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">department </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">could not be part</span></div>
<div class="txt" style="position:absolute; left:148px; top:55884px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">of more than one </span><span id="f21" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">university</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f59" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">大学与院系间是组合，院系与教师间是聚合</span></div>
<img id="background" style="position:absolute; left:0px; top:56124px;" width="1440" height="1080" src="page47.png"> <img id="background" style="position:absolute; left:1440px; top:56124px;" width="1440" height="1080" src="page-000047.png">
<div class="txt" style="position:absolute; left:1046px; top:56142px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:56231px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: composition and </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(255,0,0,1);">aggregation</span></div>
<div class="txt" style="position:absolute; left:129px; top:56550px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Company</span></div>
<div class="txt" style="position:absolute; left:482px; top:56550px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">CourseClass</span></div>
<div class="txt" style="position:absolute; left:1045px; top:56550px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Sale</span></div>
<div class="txt" style="position:absolute; left:141px; top:56701px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">0..* </span><span id="f16" style="font-size:36px;vertical-align:super;color:rgba(0,0,0,1);">-employees</span></div>
<div class="txt" style="position:absolute; left:127px; top:56788px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Employee</span></div>
<div class="txt" style="position:absolute; left:496px; top:56691px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">15..* </span><span id="f16" style="font-size:36px;vertical-align:super;color:rgba(0,0,0,1);">-students</span></div>
<div class="txt" style="position:absolute; left:518px; top:56788px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student</span></div>
<div class="txt" style="position:absolute; left:893px; top:56714px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1 +customer</span></div>
<div class="txt" style="position:absolute; left:842px; top:56788px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Customer</span></div>
<div class="txt" style="position:absolute; left:1173px; top:56713px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1..* +products</span></div>
<div class="txt" style="position:absolute; left:1174px; top:56788px;"><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Product</span></div>
<div class="txt" style="position:absolute; left:329px; top:56941px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A company owns zero or multiple employees;</span></div>
<div class="txt" style="position:absolute; left:360px; top:56984px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A course’s class owns above 15 students;</span></div>
<div class="txt" style="position:absolute; left:308px; top:57027px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">An Sale owns a customer and a set of products;</span></div>
<img id="background" style="position:absolute; left:0px; top:57343px;" width="1440" height="1080" src="page48.png"> <img id="background" style="position:absolute; left:1440px; top:57343px;" width="1440" height="1080" src="page-000048.png">
<div class="txt" style="position:absolute; left:1046px; top:57361px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:57450px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: composition and </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(255,0,0,1);">aggregation</span></div>
<div class="txt" style="position:absolute; left:79px; top:57643px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">class Student {}</span></div>
<div class="txt" style="position:absolute; left:79px; top:57773px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">class CourseClass {</span></div>
<div class="txt" style="position:absolute; left:115px; top:57837px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">…</span></div>
<div class="txt" style="position:absolute; left:115px; top:57902px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">private Student[] students;</span></div>
<div class="txt" style="position:absolute; left:115px; top:57967px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">public addStudent (Student s) {</span></div>
<div class="txt" style="position:absolute; left:223px; top:58032px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">studtents.append(s);</span></div>
<div class="txt" style="position:absolute; left:115px; top:58097px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:115px; top:58162px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">…</span></div>
<div class="txt" style="position:absolute; left:79px; top:58226px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:1144px; top:57588px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">CourseClass</span></div>
<div class="txt" style="position:absolute; left:1158px; top:57729px;"><span id="f26" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">15..* </span><span id="f26" style="font-size:36px;vertical-align:super;color:rgba(0,0,0,1);">-students</span></div>
<div class="txt" style="position:absolute; left:1180px; top:57826px;"><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student</span></div>
<div class="txt" style="position:absolute; left:704px; top:57906px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student a = new Student ();</span></div>
<div class="txt" style="position:absolute; left:704px; top:57971px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student b = new Student ();</span></div>
<div class="txt" style="position:absolute; left:704px; top:58035px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Student n = new Student ();</span></div>
<div class="txt" style="position:absolute; left:704px; top:58165px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">CourseClass SE = new CourseClass();</span></div>
<div class="txt" style="position:absolute; left:704px; top:58230px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">SE.addStudent (a);</span></div>
<div class="txt" style="position:absolute; left:704px; top:58295px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">SE.addStudent (b);</span></div>
<div class="txt" style="position:absolute; left:704px; top:58360px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">SE.addStudent (n);</span></div>
<img id="background" style="position:absolute; left:0px; top:58562px;" width="1440" height="1080" src="page49.png"> <img id="background" style="position:absolute; left:1440px; top:58562px;" width="1440" height="1080" src="page-000049.png">
<div class="txt" style="position:absolute; left:1046px; top:58580px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:58669px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(255,0,0,1);">composition </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">and aggregation</span></div>
<div class="txt" style="position:absolute; left:355px; top:59022px;"><span id="f14" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Person</span></div>
<div class="txt" style="position:absolute; left:345px; top:59174px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1 </span><span id="f17" style="font-size:36px;vertical-align:super;color:rgba(0,0,0,1);">-heart</span></div>
<div class="txt" style="position:absolute; left:363px; top:59260px;"><span id="f14" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Heart</span></div>
<div class="txt" style="position:absolute; left:802px; top:59022px;"><span id="f14" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Window</span></div>
<div class="txt" style="position:absolute; left:783px; top:59163px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">0..* </span><span id="f17" style="font-size:36px;vertical-align:super;color:rgba(0,0,0,1);">+menus</span></div>
<div class="txt" style="position:absolute; left:822px; top:59260px;"><span id="f14" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Menu</span></div>
<div class="txt" style="position:absolute; left:423px; top:59413px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A heart is part of a person;</span></div>
<div class="txt" style="position:absolute; left:413px; top:59456px;"><span id="f25" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">A menu is part of a window;</span></div>
<img id="background" style="position:absolute; left:0px; top:59781px;" width="1440" height="1080" src="page50.png"> <img id="background" style="position:absolute; left:1440px; top:59781px;" width="1440" height="1080" src="page-000050.png">
<div class="txt" style="position:absolute; left:1046px; top:59799px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:59888px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation: </span><span id="f11" style="font-size:60px;vertical-align:baseline;color:rgba(255,0,0,1);">composition </span><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">and aggregation</span></div>
<div class="txt" style="position:absolute; left:76px; top:60146px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">class Heart {}</span></div>
<div class="txt" style="position:absolute; left:76px; top:60276px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">class Person {</span></div>
<div class="txt" style="position:absolute; left:112px; top:60340px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">…</span></div>
<div class="txt" style="position:absolute; left:112px; top:60405px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">private Heart heart = new Heart();</span></div>
<div class="txt" style="position:absolute; left:112px; top:60470px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">…</span></div>
<div class="txt" style="position:absolute; left:76px; top:60535px;"><span id="f11" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:933px; top:60173px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Person</span></div>
<div class="txt" style="position:absolute; left:923px; top:60325px;"><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">1 </span><span id="f24" style="font-size:36px;vertical-align:super;color:rgba(0,0,0,1);">-heart</span></div>
<div class="txt" style="position:absolute; left:941px; top:60411px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Heart</span></div>
<img id="background" style="position:absolute; left:0px; top:61000px;" width="1440" height="1080" src="page51.png"> <img id="background" style="position:absolute; left:1440px; top:61000px;" width="1440" height="1080" src="page-000051.png">
<div class="txt" style="position:absolute; left:1046px; top:61018px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:61107px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Five types of relations between objects</span></div>
<div class="txt" style="position:absolute; left:76px; top:61247px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Delegation</span></div>
<div class="txt" style="position:absolute; left:112px; top:61314px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Association</span></div>
<div class="txt" style="position:absolute; left:112px; top:61374px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Dependency</span></div>
<div class="txt" style="position:absolute; left:112px; top:61435px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Composition</span></div>
<div class="txt" style="position:absolute; left:112px; top:61495px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Aggregation</span></div>
<div class="txt" style="position:absolute; left:76px; top:61561px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Inheritance</span></div>
<img id="background" style="position:absolute; left:0px; top:62219px;" width="1440" height="1080" src="page52.png"> <img id="background" style="position:absolute; left:1440px; top:62219px;" width="1440" height="1080" src="page-000052.png">
<div class="txt" style="position:absolute; left:33px; top:62321px;"><span id="f10" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">小结：对象之间的联系</span></div>
<div class="txt" style="position:absolute; left:1046px; top:62237px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:62463px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">继承</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">/</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">泛化</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">inheritance</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">：一般与特殊的关系</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">——</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is a kind of</span></div>
<div class="txt" style="position:absolute; left:76px; top:62535px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">组合</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">composition</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">：部分与整体的关系，彼此不可分</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">——</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">is part of</span></div>
<div class="txt" style="position:absolute; left:76px; top:62607px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">聚合</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">aggregation</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">：部分与整体的关系，但彼此可分</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">——</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">owns a</span></div>
<div class="txt" style="position:absolute; left:76px; top:62679px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">关联</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">association</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">：对象之间的长期静态联系</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">——</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">has a</span></div>
<div class="txt" style="position:absolute; left:76px; top:62751px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">依赖</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">dependence</span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">：对象之间的动态的、临时的通信联系</span><span id="f21" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">——</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">use a</span></div>
<div class="txt" style="position:absolute; left:76px; top:62895px;"><span id="f12" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">类间联系的强度：继承</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;&gt;&gt; </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">组合</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;&gt; </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">聚合</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;&gt; </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">关联</span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">&gt;&gt;&gt; </span><span id="f14" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">依赖</span></div>
<img id="background" style="position:absolute; left:0px; top:63438px;" width="1440" height="1080" src="page53.png"> <img id="background" style="position:absolute; left:1440px; top:63438px;" width="1440" height="1080" src="page-000053.png">
<div class="txt" style="position:absolute; left:33px; top:63540px;"><span id="f10" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">面向对象概念的一个综合例子</span></div>
<div class="txt" style="position:absolute; left:1046px; top:63456px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:49px; top:64476px;"><span id="f12" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">摘自：</span><span id="f14" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">http://www.nowamagic.net/architecture/architecture_PicsToIntroduceOOP.php</span></div>
<img id="background" style="position:absolute; left:0px; top:64657px;" width="1440" height="1080" src="page54.png"> <img id="background" style="position:absolute; left:1440px; top:64657px;" width="1440" height="1080" src="page-000054.png">
<div class="txt" style="position:absolute; left:1105px; top:64675px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:178px; top:64986px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">2 Designing system-level reusable</span></div>
<div class="txt" style="position:absolute; left:317px; top:65072px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">libraries and frameworks</span></div>
<img id="background" style="position:absolute; left:0px; top:65876px;" width="1440" height="1080" src="page55.png"> <img id="background" style="position:absolute; left:1440px; top:65876px;" width="1440" height="1080" src="page-000055.png">
<div class="txt" style="position:absolute; left:33px; top:65983px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Libraries</span></div>
<div class="txt" style="position:absolute; left:1046px; top:65894px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:66123px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Library: A set of classes and methods (APIs) that provide reusable</span></div>
<div class="txt" style="position:absolute; left:112px; top:66173px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">functionality</span></div>
<img id="background" style="position:absolute; left:0px; top:67095px;" width="1440" height="1080" src="page56.png"> <img id="background" style="position:absolute; left:1440px; top:67095px;" width="1440" height="1080" src="page-000056.png">
<div class="txt" style="position:absolute; left:33px; top:67202px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Framework</span></div>
<div class="txt" style="position:absolute; left:1046px; top:67113px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:67342px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Framework: Reusable skeleton code that can be customized into an</span></div>
<div class="txt" style="position:absolute; left:112px; top:67392px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">application</span></div>
<div class="txt" style="position:absolute; left:76px; top:67462px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Framework calls back into client code</span></div>
<div class="txt" style="position:absolute; left:112px; top:67529px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">The Hollywood principle: “Don’t call us. We’ll call you.”</span></div>
<img id="background" style="position:absolute; left:0px; top:68314px;" width="1440" height="1080" src="page57.png"> <img id="background" style="position:absolute; left:1440px; top:68314px;" width="1440" height="1080" src="page-000057.png">
<div class="txt" style="position:absolute; left:1046px; top:68332px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:68421px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">General distinction: Library vs. framework</span></div>
<img id="background" style="position:absolute; left:0px; top:69533px;" width="1440" height="1080" src="page58.png"> <img id="background" style="position:absolute; left:1440px; top:69533px;" width="1440" height="1080" src="page-000058.png">
<div class="txt" style="position:absolute; left:1046px; top:69551px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:69640px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Libraries and frameworks in practice</span></div>
<div class="txt" style="position:absolute; left:76px; top:69777px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Defines key abstractions and their interfaces </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">定义关键抽象和接口</span></div>
<div class="txt" style="position:absolute; left:76px; top:69849px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Defines object interactions &amp; invariants </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">定义对象不变量和方法</span></div>
<div class="txt" style="position:absolute; left:76px; top:69921px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Defines flow of control </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">定义控制流</span></div>
<div class="txt" style="position:absolute; left:76px; top:69993px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Provides architectural guidance </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">提供构建的指导</span></div>
<div class="txt" style="position:absolute; left:76px; top:70065px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Provides defaults </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">提供缺省实现</span></div>
<img id="background" style="position:absolute; left:0px; top:70752px;" width="1440" height="1080" src="page59.png"> <img id="background" style="position:absolute; left:1440px; top:70752px;" width="1440" height="1080" src="page-000059.png">
<div class="txt" style="position:absolute; left:33px; top:70859px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">More terms</span></div>
<div class="txt" style="position:absolute; left:1046px; top:70770px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:70999px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">API: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Application Programming Interface, the interface of a library</span></div>
<div class="txt" style="position:absolute; left:112px; top:71049px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">or framework</span></div>
<div class="txt" style="position:absolute; left:76px; top:71119px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Client: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The code that uses an API</span></div>
<div class="txt" style="position:absolute; left:76px; top:71191px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Plugin: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Client code that customizes a framework</span></div>
<div class="txt" style="position:absolute; left:76px; top:71263px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Extension point: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A place where a framework supports extension</span></div>
<div class="txt" style="position:absolute; left:112px; top:71313px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">with a plugin</span></div>
<div class="txt" style="position:absolute; left:76px; top:71383px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Protocol: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">The expected sequence of interactions between the API</span></div>
<div class="txt" style="position:absolute; left:112px; top:71433px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and the client</span></div>
<div class="txt" style="position:absolute; left:76px; top:71503px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Callback: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A plugin method that the framework will call to access</span></div>
<div class="txt" style="position:absolute; left:112px; top:71553px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">customized functionality</span></div>
<div class="txt" style="position:absolute; left:76px; top:71623px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">Lifecycle method: </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">A callback method that gets called in a sequence</span></div>
<div class="txt" style="position:absolute; left:112px; top:71673px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">according to the protocol and the state of the plugin</span></div>
<img id="background" style="position:absolute; left:0px; top:71971px;" width="1440" height="1080" src="page60.png"> <img id="background" style="position:absolute; left:1440px; top:71971px;" width="1440" height="1080" src="page-000060.png">
<div class="txt" style="position:absolute; left:1105px; top:71989px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:492px; top:72386px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(1) API design</span></div>
<img id="background" style="position:absolute; left:0px; top:73190px;" width="1440" height="1080" src="page61.png"> <img id="background" style="position:absolute; left:1440px; top:73190px;" width="1440" height="1080" src="page-000061.png">
<div class="txt" style="position:absolute; left:33px; top:73297px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Why is API design important?</span></div>
<div class="txt" style="position:absolute; left:1046px; top:73208px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:73437px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If you program, you are an API designer, and APIs can be among</span></div>
<div class="txt" style="position:absolute; left:112px; top:73487px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">your greatest assets</span></div>
<div class="txt" style="position:absolute; left:76px; top:73557px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Good code is modular </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">each module has an API</span></div>
<div class="txt" style="position:absolute; left:112px; top:73624px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Users invest heavily: acquiring, writing, learning</span></div>
<div class="txt" style="position:absolute; left:112px; top:73684px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Thinking in terms of APIs improves code quality</span></div>
<div class="txt" style="position:absolute; left:112px; top:73745px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Successful public APIs capture users</span></div>
<div class="txt" style="position:absolute; left:76px; top:73810px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Can also be among your greatest liabilities</span></div>
<div class="txt" style="position:absolute; left:112px; top:73877px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Bad API can cause unending stream of support calls</span></div>
<div class="txt" style="position:absolute; left:112px; top:73938px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Can inhibit ability to move forward</span></div>
<div class="txt" style="position:absolute; left:76px; top:74001px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Public APIs are forever </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">one chance to get it right </span><span id="f39" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">一旦发布，难以修</span></div>
<div class="txt" style="position:absolute; left:112px; top:74048px;"><span id="f39" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">改</span></div>
<div class="txt" style="position:absolute; left:112px; top:74118px;"><span id="f21" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f44" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Once module has users, can’t change API at will</span></div>
<img id="background" style="position:absolute; left:0px; top:74409px;" width="1440" height="1080" src="page62.png"> <img id="background" style="position:absolute; left:1440px; top:74409px;" width="1440" height="1080" src="page-000062.png">
<div class="txt" style="position:absolute; left:33px; top:74516px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Characteristics of a good API</span></div>
<div class="txt" style="position:absolute; left:76px; top:74656px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Easy to learn</span></div>
<div class="txt" style="position:absolute; left:76px; top:74728px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Easy to use, even without documentation</span></div>
<div class="txt" style="position:absolute; left:76px; top:74800px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Hard to misuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:74872px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Easy to read and maintain code that uses it</span></div>
<div class="txt" style="position:absolute; left:76px; top:74944px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Sufficiently powerful to satisfy requirements</span></div>
<div class="txt" style="position:absolute; left:76px; top:75016px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Easy to evolve</span></div>
<div class="txt" style="position:absolute; left:76px; top:75088px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Appropriate to audience</span></div>
<div class="txt" style="position:absolute; left:1046px; top:74427px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:75628px;" width="1440" height="1080" src="page63.png"> <img id="background" style="position:absolute; left:1440px; top:75628px;" width="1440" height="1080" src="page-000063.png">
<div class="txt" style="position:absolute; left:33px; top:75735px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Sample early API draft</span></div>
<div class="txt" style="position:absolute; left:1046px; top:75646px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:75876px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// A collection of elements (root of the collection hierarchy)</span></div>
<div class="txt" style="position:absolute; left:76px; top:75919px;"><span id="f13" style="font-size:14px;vertical-align:baseline;color:rgba(255,0,0,1);">public interface Collection&lt;E&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:112px; top:75979px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Ensures that collection contains o</span></div>
<div class="txt" style="position:absolute; left:112px; top:76023px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean add(E o);</span></div>
<div class="txt" style="position:absolute; left:112px; top:76083px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Removes an instance of o from collection, if present</span></div>
<div class="txt" style="position:absolute; left:112px; top:76126px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean remove(Object o);</span></div>
<div class="txt" style="position:absolute; left:112px; top:76187px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Returns true iff collection contains o</span></div>
<div class="txt" style="position:absolute; left:112px; top:76230px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean contains(Object o) ;</span></div>
<div class="txt" style="position:absolute; left:112px; top:76290px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Returns number of elements in collection</span></div>
<div class="txt" style="position:absolute; left:112px; top:76334px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int size() ;</span></div>
<div class="txt" style="position:absolute; left:112px; top:76394px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Returns true if collection is empty</span></div>
<div class="txt" style="position:absolute; left:112px; top:76437px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean isEmpty();</span></div>
<div class="txt" style="position:absolute; left:112px; top:76498px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">... // Remainder omitted</span></div>
<div class="txt" style="position:absolute; left:76px; top:76563px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:76847px;" width="1440" height="1080" src="page64.png"> <img id="background" style="position:absolute; left:1440px; top:76847px;" width="1440" height="1080" src="page-000064.png">
<div class="txt" style="position:absolute; left:1046px; top:76865px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:76954px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(1) API should do one thing and do it well</span></div>
<div class="txt" style="position:absolute; left:76px; top:77091px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Functionality should be easy to explain </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">功能单一</span></div>
<div class="txt" style="position:absolute; left:112px; top:77161px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">If it's hard to name, that's generally a bad sign</span></div>
<div class="txt" style="position:absolute; left:112px; top:77217px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Good names drive development </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">好的命名利于开发</span></div>
<div class="txt" style="position:absolute; left:112px; top:77278px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Be amenable to splitting and merging modules </span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">适合分解和合并模块</span></div>
<div class="txt" style="position:absolute; left:76px; top:77348px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Good: </span><span id="f31" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Font, Set, PrivateKey, Lock, ThreadFactory,</span></div>
<div class="txt" style="position:absolute; left:112px; top:77397px;"><span id="f31" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">TimeUnit, Future&lt;T&gt;</span></div>
<div class="txt" style="position:absolute; left:76px; top:77467px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Bad:</span></div>
<div class="txt" style="position:absolute; left:112px; top:77534px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f31" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">DynAnyFactoryOperations</span></div>
<div class="txt" style="position:absolute; left:112px; top:77595px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f31" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">_BindingIteratorImplBase</span></div>
<div class="txt" style="position:absolute; left:112px; top:77655px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f31" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ENCODING_CDR_ENCAPS</span></div>
<div class="txt" style="position:absolute; left:112px; top:77716px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f31" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">OMGVMCID</span></div>
<img id="background" style="position:absolute; left:0px; top:78066px;" width="1440" height="1080" src="page65.png"> <img id="background" style="position:absolute; left:1440px; top:78066px;" width="1440" height="1080" src="page-000065.png">
<div class="txt" style="position:absolute; left:1046px; top:78084px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:78173px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(2) API should be as small as possible but no smaller</span></div>
<div class="txt" style="position:absolute; left:76px; top:78313px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">API should satisfy its requirements</span></div>
<div class="txt" style="position:absolute; left:76px; top:78385px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">When in doubt leave it out</span></div>
<div class="txt" style="position:absolute; left:112px; top:78452px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Functionality, classes, methods, parameters, etc.</span></div>
<div class="txt" style="position:absolute; left:112px; top:78508px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">You can always add, but you can never remove </span><span id="f23" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">可以增加功能，但不能移除</span></div>
<div class="txt" style="position:absolute; left:76px; top:78575px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Conceptual weight more important than bulk </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">追求概念上的</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">”</span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">小</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">”,</span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">而不</span></div>
<div class="txt" style="position:absolute; left:112px; top:78623px;"><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">是体积上的</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">”</span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">小</span><span id="f30" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">”</span></div>
<div class="txt" style="position:absolute; left:76px; top:78695px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Look for a good power-to-weight ratio </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">在性能和大小之间找平衡</span></div>
<img id="background" style="position:absolute; left:0px; top:79285px;" width="1440" height="1080" src="page66.png"> <img id="background" style="position:absolute; left:1440px; top:79285px;" width="1440" height="1080" src="page-000066.png">
<div class="txt" style="position:absolute; left:1046px; top:79303px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:79392px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(3) Implementation should not impact API</span></div>
<div class="txt" style="position:absolute; left:76px; top:79532px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Implementation details in APIs are harmful</span></div>
<div class="txt" style="position:absolute; left:112px; top:79599px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Confuse users</span></div>
<div class="txt" style="position:absolute; left:112px; top:79659px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Inhibit freedom to change implementation</span></div>
<div class="txt" style="position:absolute; left:76px; top:79725px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Be aware of what is an implementation detail</span></div>
<div class="txt" style="position:absolute; left:112px; top:79792px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Do not overspecify the behavior of methods</span></div>
<div class="txt" style="position:absolute; left:112px; top:79852px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">For example: do not specify hash functions</span></div>
<div class="txt" style="position:absolute; left:112px; top:79913px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">All tuning parameters are suspect</span></div>
<div class="txt" style="position:absolute; left:76px; top:79978px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f29" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Don't let implementation details “leak” into API</span></div>
<div class="txt" style="position:absolute; left:112px; top:80045px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Serialized forms, exceptions thrown</span></div>
<div class="txt" style="position:absolute; left:76px; top:80111px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Minimize accessibility of everything (information hiding)</span></div>
<div class="txt" style="position:absolute; left:112px; top:80178px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Make classes, members as private as possible</span></div>
<div class="txt" style="position:absolute; left:112px; top:80238px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Public classes should have no public fields</span></div>
<img id="background" style="position:absolute; left:0px; top:80504px;" width="1440" height="1080" src="page67.png"> <img id="background" style="position:absolute; left:1440px; top:80504px;" width="1440" height="1080" src="page-000067.png">
<div class="txt" style="position:absolute; left:33px; top:80611px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(4) Documentation matters</span></div>
<div class="txt" style="position:absolute; left:1046px; top:80522px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:80751px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Document every class, interface, method, constructor, parameter,</span></div>
<div class="txt" style="position:absolute; left:112px; top:80801px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and exception</span></div>
<div class="txt" style="position:absolute; left:112px; top:80866px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Class: what an instance represents</span></div>
<div class="txt" style="position:absolute; left:112px; top:80926px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Method: contract between method and its client</span></div>
<div class="txt" style="position:absolute; left:76px; top:80992px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Preconditions, postconditions, side-effects</span></div>
<div class="txt" style="position:absolute; left:112px; top:81059px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Parameter: indicate units, form, ownership</span></div>
<div class="txt" style="position:absolute; left:1072px; top:80967px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Recall Chapter 4 for</span></div>
<div class="txt" style="position:absolute; left:1084px; top:81010px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Understandability</span></div>
<div class="txt" style="position:absolute; left:76px; top:81124px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Document thread safety</span></div>
<div class="txt" style="position:absolute; left:76px; top:81196px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">If class is mutable, document state space</span></div>
<div class="txt" style="position:absolute; left:203px; top:81285px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">Reuse is something that is far easier to say than to do. Doing it</span></div>
<div class="txt" style="position:absolute; left:194px; top:81333px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">requires both good design and very good documentation. Even</span></div>
<div class="txt" style="position:absolute; left:198px; top:81381px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">when we see good design, which is still infrequently, we won't</span></div>
<div class="txt" style="position:absolute; left:245px; top:81429px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(255,255,255,1);">see the components reused without good documentation.</span></div>
<div class="txt" style="position:absolute; left:1108px; top:81476px;"><span id="f35" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">D. L. Parnas</span></div>
<div class="txt" style="position:absolute; left:851px; top:81519px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Software Aging, on ICSE 1994</span></div>
<img id="background" style="position:absolute; left:0px; top:81723px;" width="1440" height="1080" src="page68.png"> <img id="background" style="position:absolute; left:1440px; top:81723px;" width="1440" height="1080" src="page-000068.png">
<div class="txt" style="position:absolute; left:1046px; top:81741px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:81830px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(5) Consider performance consequences</span></div>
<div class="txt" style="position:absolute; left:76px; top:81970px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Bad decisions can limit performance</span></div>
<div class="txt" style="position:absolute; left:112px; top:82037px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Making type mutable</span></div>
<div class="txt" style="position:absolute; left:112px; top:82097px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Providing constructor instead of static factory</span></div>
<div class="txt" style="position:absolute; left:112px; top:82158px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Using implementation type instead of interface</span></div>
<div class="txt" style="position:absolute; left:76px; top:82221px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Do not warp(</span><span id="f24" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">扭曲</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">) API to gain performance</span></div>
<div class="txt" style="position:absolute; left:112px; top:82290px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Underlying performance issue will get fixed, but headaches will be with</span></div>
<div class="txt" style="position:absolute; left:148px; top:82333px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">you forever</span></div>
<div class="txt" style="position:absolute; left:76px; top:82399px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Good design usually coincides with good performance</span></div>
<div class="txt" style="position:absolute; left:76px; top:82471px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Performance effects of a bad API decisions can be real and</span></div>
<div class="txt" style="position:absolute; left:112px; top:82521px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">permanent</span></div>
<div class="txt" style="position:absolute; left:112px; top:82586px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f36" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Component.getSize() </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">returns </span><span id="f36" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Dimension</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, but </span><span id="f36" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Dimension </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">is mutable,</span></div>
<div class="txt" style="position:absolute; left:148px; top:82629px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">thus each </span><span id="f36" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">getSize </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">call must allocate </span><span id="f36" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Dimension</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, causing millions of</span></div>
<div class="txt" style="position:absolute; left:148px; top:82668px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">needless object allocations (Dimension</span><span id="f24" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">类封装了一个构件的高度和宽度</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<img id="background" style="position:absolute; left:0px; top:82942px;" width="1440" height="1080" src="page69.png"> <img id="background" style="position:absolute; left:1440px; top:82942px;" width="1440" height="1080" src="page-000069.png">
<div class="txt" style="position:absolute; left:1046px; top:82960px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:83049px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(6) API must coexist peacefully with platform</span></div>
<div class="txt" style="position:absolute; left:76px; top:83189px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Do what is customary</span></div>
<div class="txt" style="position:absolute; left:112px; top:83256px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Obey standard naming conventions</span></div>
<div class="txt" style="position:absolute; left:112px; top:83316px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Avoid obsolete parameter and return types</span></div>
<div class="txt" style="position:absolute; left:112px; top:83377px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Mimic patterns in core APIs and language</span></div>
<div class="txt" style="position:absolute; left:76px; top:83442px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Take advantage of API-friendly features</span></div>
<div class="txt" style="position:absolute; left:112px; top:83509px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Generics, varargs, enums, functional interfaces</span></div>
<div class="txt" style="position:absolute; left:76px; top:83575px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Know and avoid API traps and pitfalls</span></div>
<div class="txt" style="position:absolute; left:112px; top:83642px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Finalizers, public static final arrays, etc.</span></div>
<div class="txt" style="position:absolute; left:76px; top:83705px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f33" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Don’t transliterate(</span><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">音译</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">) APIs</span></div>
<img id="background" style="position:absolute; left:0px; top:84161px;" width="1440" height="1080" src="page70.png"> <img id="background" style="position:absolute; left:1440px; top:84161px;" width="1440" height="1080" src="page-000070.png">
<div class="txt" style="position:absolute; left:33px; top:84268px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(7) Class design</span></div>
<div class="txt" style="position:absolute; left:1046px; top:84179px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:84408px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Minimize mutability</span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">: Classes should be immutable unless there’s a</span></div>
<div class="txt" style="position:absolute; left:112px; top:84458px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">good reason to do otherwise</span></div>
<div class="txt" style="position:absolute; left:112px; top:84523px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Advantages: </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">simple, thread-safe, reusable</span></div>
<div class="txt" style="position:absolute; left:112px; top:84583px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Disadvantage: </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">separate object for each value</span></div>
<div class="txt" style="position:absolute; left:112px; top:84644px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">If mutable, </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">keep state-space small</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, well-defined.</span></div>
<div class="txt" style="position:absolute; left:76px; top:84709px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Subclass only where it makes sense: </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Subclassing implies</span></div>
<div class="txt" style="position:absolute; left:112px; top:84759px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">substitutability (LSP)</span></div>
<div class="txt" style="position:absolute; left:112px; top:84824px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Don’t subclass unless an is</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-a relationship exists. Otherwise, use delegation</span></div>
<div class="txt" style="position:absolute; left:148px; top:84863px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">or composition. </span><span id="f46" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">尽量使用委托和组合</span></div>
<div class="txt" style="position:absolute; left:112px; top:84924px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Don’t subclass just to reuse implementation</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">. </span><span id="f46" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">不要因为单纯的复用实现而</span></div>
<div class="txt" style="position:absolute; left:148px; top:84967px;"><span id="f46" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">使用继承</span></div>
<div class="txt" style="position:absolute; left:112px; top:85032px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Inheritance violates encapsulation, and subclasses are sensitive to</span></div>
<div class="txt" style="position:absolute; left:148px; top:85071px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">implementation details of superclass </span><span id="f46" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">继承违反了封装原则</span></div>
<img id="background" style="position:absolute; left:0px; top:85380px;" width="1440" height="1080" src="page71.png"> <img id="background" style="position:absolute; left:1440px; top:85380px;" width="1440" height="1080" src="page-000071.png">
<div class="txt" style="position:absolute; left:33px; top:85487px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(8) Method design</span></div>
<div class="txt" style="position:absolute; left:1046px; top:85398px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:85624px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Don't make the client do anything the module could do </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">模块能做到</span></div>
<div class="txt" style="position:absolute; left:112px; top:85672px;"><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的，客户端就不要做减少模板代码的使用</span></div>
<div class="txt" style="position:absolute; left:112px; top:85742px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Clients generally do via cut-and-paste, which is ugly, annoying, and error-</span></div>
<div class="txt" style="position:absolute; left:148px; top:85785px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">prone.</span></div>
<div class="txt" style="position:absolute; left:76px; top:86153px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">APIs should fail fast: report errors as soon as possible. Compile</span></div>
<div class="txt" style="position:absolute; left:112px; top:86203px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">time is best </span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">static typing, generics.</span></div>
<div class="txt" style="position:absolute; left:112px; top:86268px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">At runtime, first bad method invocation is best</span></div>
<div class="txt" style="position:absolute; left:112px; top:86324px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Method should be failure-atomic</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">(</span><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">要么正常结束，产生期望结果；要么整体</span></div>
<div class="txt" style="position:absolute; left:148px; top:86368px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">失败，不产生任何的结果</span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">)</span></div>
<img id="background" style="position:absolute; left:0px; top:86599px;" width="1440" height="1080" src="page72.png"> <img id="background" style="position:absolute; left:1440px; top:86599px;" width="1440" height="1080" src="page-000072.png">
<div class="txt" style="position:absolute; left:33px; top:86706px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(8) Method design</span></div>
<div class="txt" style="position:absolute; left:1046px; top:86617px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:86846px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Provide programmatic access to all data available in string form.</span></div>
<div class="txt" style="position:absolute; left:112px; top:86891px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Otherwise, clients will parse strings, which is painful for clients </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">对所</span></div>
<div class="txt" style="position:absolute; left:112px; top:86939px;"><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">有可访问数据提供</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">String</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">形式的访问方法，避免客户端去解析</span></div>
<div class="txt" style="position:absolute; left:116px; top:87039px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Throwable {</span></div>
<div class="txt" style="position:absolute; left:195px; top:87083px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public void printStackTrace(PrintStream s);</span></div>
<div class="txt" style="position:absolute; left:195px; top:87126px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public StackTraceElement[] getStackTrace(); // Since 1.4 }</span></div>
<div class="txt" style="position:absolute; left:195px; top:87169px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public final class StackTraceElement {</span></div>
<div class="txt" style="position:absolute; left:274px; top:87212px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public String getFileName();</span></div>
<div class="txt" style="position:absolute; left:274px; top:87255px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public int getLineNumber();</span></div>
<div class="txt" style="position:absolute; left:274px; top:87299px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public String getClassName();</span></div>
<div class="txt" style="position:absolute; left:274px; top:87342px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public String getMethodName();</span></div>
<div class="txt" style="position:absolute; left:274px; top:87385px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public boolean isNativeMethod();</span></div>
<div class="txt" style="position:absolute; left:195px; top:87428px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:116px; top:87471px;"><span id="f25" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:87818px;" width="1440" height="1080" src="page73.png"> <img id="background" style="position:absolute; left:1440px; top:87818px;" width="1440" height="1080" src="page-000073.png">
<div class="txt" style="position:absolute; left:33px; top:87925px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">(8) Method design</span></div>
<div class="txt" style="position:absolute; left:1046px; top:87836px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:88065px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Overload with care. </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Often better to use a different name.</span></div>
<div class="txt" style="position:absolute; left:76px; top:88137px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Use appropriate parameter &amp; return types.</span></div>
<div class="txt" style="position:absolute; left:112px; top:88204px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Favor interface types over classes for input for flexibility, performance</span></div>
<div class="txt" style="position:absolute; left:112px; top:88264px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Use most specific possible input parameter type, thus moves error from</span></div>
<div class="txt" style="position:absolute; left:148px; top:88307px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">runtime to compile time.</span></div>
<div class="txt" style="position:absolute; left:76px; top:88373px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Avoid long parameter lists. </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Three or fewer parameters is ideal.</span></div>
<div class="txt" style="position:absolute; left:112px; top:88440px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">What if you have to use many parameters?</span></div>
<div class="txt" style="position:absolute; left:76px; top:88506px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Avoid return values that demand exceptional processing</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">. Return</span></div>
<div class="txt" style="position:absolute; left:112px; top:88551px;"><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">zero-length array or empty collection, not null.</span><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">返回值勿需进行异常</span></div>
<div class="txt" style="position:absolute; left:112px; top:88599px;"><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">处理</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">, </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">e.g., </span><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">用空集合或者</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">0</span><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">长度数组</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">, </span><span id="f35" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">不要用</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">null</span></div>
<img id="background" style="position:absolute; left:0px; top:89037px;" width="1440" height="1080" src="page74.png"> <img id="background" style="position:absolute; left:1440px; top:89037px;" width="1440" height="1080" src="page-000074.png">
<div class="txt" style="position:absolute; left:1105px; top:89055px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:368px; top:89452px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(2) Framework design</span></div>
<img id="background" style="position:absolute; left:0px; top:90256px;" width="1440" height="1080" src="page75.png"> <img id="background" style="position:absolute; left:1440px; top:90256px;" width="1440" height="1080" src="page-000075.png">
<div class="txt" style="position:absolute; left:33px; top:90363px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">An example: web browser plugin</span></div>
<div class="txt" style="position:absolute; left:1046px; top:90274px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:91475px;" width="1440" height="1080" src="page76.png"> <img id="background" style="position:absolute; left:1440px; top:91475px;" width="1440" height="1080" src="page-000076.png">
<div class="txt" style="position:absolute; left:1046px; top:91493px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:91582px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Whitebox and Blackbox frameworks</span></div>
<div class="txt" style="position:absolute; left:76px; top:91722px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Whitebox frameworks</span></div>
<div class="txt" style="position:absolute; left:112px; top:91789px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Extension via </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">subclassing </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">and </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">overriding </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">methods</span></div>
<div class="txt" style="position:absolute; left:112px; top:91849px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Common design pattern(s): Template Method</span></div>
<div class="txt" style="position:absolute; left:112px; top:91910px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Subclass has main method but gives control to framework</span></div>
<div class="txt" style="position:absolute; left:76px; top:92047px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Blackbox frameworks</span></div>
<div class="txt" style="position:absolute; left:112px; top:92114px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Extension via implementing a </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,0,0,1);">plugin interface</span></div>
<div class="txt" style="position:absolute; left:112px; top:92175px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Common design pattern(s): Strategy, Observer</span></div>
<div class="txt" style="position:absolute; left:112px; top:92235px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Plugin-loading mechanism loads plugins and gives control to the</span></div>
<div class="txt" style="position:absolute; left:148px; top:92278px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">framework</span></div>
<img id="background" style="position:absolute; left:0px; top:92694px;" width="1440" height="1080" src="page77.png"> <img id="background" style="position:absolute; left:1440px; top:92694px;" width="1440" height="1080" src="page-000077.png">
<div class="txt" style="position:absolute; left:1046px; top:92712px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:92801px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">A calculator example (without a framework)</span></div>
<img id="background" style="position:absolute; left:0px; top:93913px;" width="1440" height="1080" src="page78.png"> <img id="background" style="position:absolute; left:1440px; top:93913px;" width="1440" height="1080" src="page-000078.png">
<div class="txt" style="position:absolute; left:33px; top:94020px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">A simple whitebox framework</span></div>
<div class="txt" style="position:absolute; left:1046px; top:93931px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:95132px;" width="1440" height="1080" src="page79.png"> <img id="background" style="position:absolute; left:1440px; top:95132px;" width="1440" height="1080" src="page-000079.png">
<div class="txt" style="position:absolute; left:33px; top:95239px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Using the whitebox framework</span></div>
<div class="txt" style="position:absolute; left:1046px; top:95150px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:366px; top:95734px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Extension via subclassing and overriding methods</span></div>
<div class="txt" style="position:absolute; left:306px; top:95777px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Subclass has main method but gives control to framework</span></div>
<img id="background" style="position:absolute; left:0px; top:96351px;" width="1440" height="1080" src="page80.png"> <img id="background" style="position:absolute; left:1440px; top:96351px;" width="1440" height="1080" src="page-000080.png">
<div class="txt" style="position:absolute; left:1046px; top:96369px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:96458px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">An example blackbox framework</span></div>
<div class="txt" style="position:absolute; left:757px; top:96530px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Plugin {</span></div>
<div class="txt" style="position:absolute; left:53px; top:96566px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">public class Application extends JFrame { String getApplicationTitle();</span></div>
<div class="txt" style="position:absolute; left:103px; top:96602px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">private JTextField textField;</span></div>
<div class="txt" style="position:absolute; left:790px; top:96602px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">String getButtonText();</span></div>
<div class="txt" style="position:absolute; left:103px; top:96638px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">private Plugin plugin;</span></div>
<div class="txt" style="position:absolute; left:790px; top:96637px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">String getInititalText();</span></div>
<div class="txt" style="position:absolute; left:103px; top:96674px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">public Application() { }</span></div>
<div class="txt" style="position:absolute; left:790px; top:96674px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">void buttonClicked() ;</span></div>
<div class="txt" style="position:absolute; left:103px; top:96710px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">protected void init(Plugin </span><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">p) </span><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">{</span></div>
<div class="txt" style="position:absolute; left:790px; top:96710px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">void setApplication(Application app);</span></div>
<div class="txt" style="position:absolute; left:136px; top:96746px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">p.setApplication(this);</span></div>
<div class="txt" style="position:absolute; left:757px; top:96745px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:136px; top:96782px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">this.plugin = p;</span></div>
<div class="txt" style="position:absolute; left:136px; top:96818px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">JPanel contentPane = new JPanel(new BorderLayout());</span></div>
<div class="txt" style="position:absolute; left:136px; top:96854px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">contentPane.setBorder(new BevelBorder(BevelBorder.LOWERED));</span></div>
<div class="txt" style="position:absolute; left:136px; top:96890px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">JButton button = new JButton();</span></div>
<div class="txt" style="position:absolute; left:136px; top:96926px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">button.setText(plugin </span><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">!= null ? plugin.getButtonText() : "ok");</span></div>
<div class="txt" style="position:absolute; left:136px; top:96962px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">contentPane.add(button, BorderLayout.EAST);</span></div>
<div class="txt" style="position:absolute; left:136px; top:96998px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">textField = new JTextField("");</span></div>
<div class="txt" style="position:absolute; left:136px; top:97034px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">if (plugin != null)</span></div>
<div class="txt" style="position:absolute; left:202px; top:97070px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">textField.setText(plugin.getInititalText());</span></div>
<div class="txt" style="position:absolute; left:136px; top:97106px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">textField.setPreferredSize(new Dimension(200, 20));</span></div>
<div class="txt" style="position:absolute; left:136px; top:97142px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">contentPane.add(textField, BorderLayout.WEST);</span></div>
<div class="txt" style="position:absolute; left:136px; top:97178px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">if (plugin != null)</span></div>
<div class="txt" style="position:absolute; left:202px; top:97214px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">button.addActionListener((e) -&gt; { </span><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,255,1);">plugin.buttonClicked(); </span><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">} );</span></div>
<div class="txt" style="position:absolute; left:136px; top:97250px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">this.setContentPane(contentPane);</span></div>
<div class="txt" style="position:absolute; left:120px; top:97286px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:87px; top:97322px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:87px; top:97358px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">public String getInput() { return textField.getText(); }</span></div>
<div class="txt" style="position:absolute; left:53px; top:97394px;"><span id="f11" style="font-size:12px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:97570px;" width="1440" height="1080" src="page81.png"> <img id="background" style="position:absolute; left:1440px; top:97570px;" width="1440" height="1080" src="page-000081.png">
<div class="txt" style="position:absolute; left:33px; top:97677px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Using the blackbox framework</span></div>
<div class="txt" style="position:absolute; left:1046px; top:97588px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:353px; top:98346px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Extension via implementing a plugin interface</span></div>
<div class="txt" style="position:absolute; left:313px; top:98389px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">Plugin-loading mechanism loads plugins and gives</span></div>
<div class="txt" style="position:absolute; left:522px; top:98432px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(255,255,255,1);">control to the framework</span></div>
<img id="background" style="position:absolute; left:0px; top:98789px;" width="1440" height="1080" src="page82.png"> <img id="background" style="position:absolute; left:1440px; top:98789px;" width="1440" height="1080" src="page-000082.png">
<div class="txt" style="position:absolute; left:1046px; top:98807px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:98896px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Whitebox vs. Blackbox Frameworks</span></div>
<div class="txt" style="position:absolute; left:76px; top:99036px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Whitebox frameworks use subclassing</span></div>
<div class="txt" style="position:absolute; left:112px; top:99103px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Allows extension of every nonprivate method</span></div>
<div class="txt" style="position:absolute; left:112px; top:99163px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Need to understand implementation of superclass</span></div>
<div class="txt" style="position:absolute; left:112px; top:99224px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Only one extension at a time</span></div>
<div class="txt" style="position:absolute; left:112px; top:99284px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Compiled together</span></div>
<div class="txt" style="position:absolute; left:112px; top:99345px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Often so-called developer frameworks</span></div>
<div class="txt" style="position:absolute; left:76px; top:99410px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Blackbox frameworks use composition</span></div>
<div class="txt" style="position:absolute; left:112px; top:99477px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Allows extension of functionality exposed in interface</span></div>
<div class="txt" style="position:absolute; left:112px; top:99538px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Only need to understand the interface</span></div>
<div class="txt" style="position:absolute; left:112px; top:99598px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Multiple plugins</span></div>
<div class="txt" style="position:absolute; left:112px; top:99659px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Often provides more modularity</span></div>
<div class="txt" style="position:absolute; left:112px; top:99719px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f39" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Separate deployment possible (.jar, .dll, …)</span></div>
<div class="txt" style="position:absolute; left:112px; top:99780px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Often so-called end-user frameworks, platforms</span></div>
<img id="background" style="position:absolute; left:0px; top:100008px;" width="1440" height="1080" src="page83.png"> <img id="background" style="position:absolute; left:1440px; top:100008px;" width="1440" height="1080" src="page-000083.png">
<div class="txt" style="position:absolute; left:33px; top:100115px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Framework design considerations</span></div>
<div class="txt" style="position:absolute; left:1046px; top:100026px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:100255px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Once designed there is little opportunity for change</span></div>
<div class="txt" style="position:absolute; left:76px; top:100327px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Key decision: Separating common parts from variable parts</span></div>
<div class="txt" style="position:absolute; left:112px; top:100394px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">What problems do you want to solve?</span></div>
<div class="txt" style="position:absolute; left:76px; top:100459px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Possible problems:</span></div>
<div class="txt" style="position:absolute; left:112px; top:100526px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Too few extension points: Limited to a narrow class of users</span></div>
<div class="txt" style="position:absolute; left:112px; top:100587px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Too many extension points: Hard to learn, slow</span></div>
<div class="txt" style="position:absolute; left:112px; top:100647px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Too generic: Little reuse value</span></div>
<div class="txt" style="position:absolute; left:255px; top:100850px;"><span id="f28" style="font-size:55px;vertical-align:baseline;color:rgba(255,255,255,1);">“Maximizing reuse minimizes use”</span></div>
<img id="background" style="position:absolute; left:0px; top:101227px;" width="1440" height="1080" src="page84.png"> <img id="background" style="position:absolute; left:1440px; top:101227px;" width="1440" height="1080" src="page-000084.png">
<div class="txt" style="position:absolute; left:1046px; top:101245px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:101334px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Typical framework design and implementation</span></div>
<div class="txt" style="position:absolute; left:76px; top:101474px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Define your domain</span></div>
<div class="txt" style="position:absolute; left:112px; top:101541px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Identify potential common parts and variable parts</span></div>
<div class="txt" style="position:absolute; left:112px; top:101601px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Design and write sample plugins/applications</span></div>
<div class="txt" style="position:absolute; left:76px; top:101667px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Factor out &amp; implement common parts as framework</span></div>
<div class="txt" style="position:absolute; left:76px; top:101739px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Provide plugin interface &amp; callback mechanisms for variable parts</span></div>
<div class="txt" style="position:absolute; left:112px; top:101806px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Use well-</span><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">known design principles and patterns where appropriate…</span></div>
<div class="txt" style="position:absolute; left:76px; top:101871px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Get lots of feedback, and iterate</span></div>
<div class="txt" style="position:absolute; left:76px; top:102087px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">This is usually called “Domain Engineering”.</span></div>
<img id="background" style="position:absolute; left:0px; top:102446px;" width="1440" height="1080" src="page85.png"> <img id="background" style="position:absolute; left:1440px; top:102446px;" width="1440" height="1080" src="page-000085.png">
<div class="txt" style="position:absolute; left:1046px; top:102464px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:102553px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Evolutionary design: Extract Commonalities </span><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">获取共性</span></div>
<div class="txt" style="position:absolute; left:76px; top:102693px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Extracting interfaces is a new step in evolutionary design:</span></div>
<div class="txt" style="position:absolute; left:112px; top:102760px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Abstract classes are discovered from concrete classes</span></div>
<div class="txt" style="position:absolute; left:112px; top:102820px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Interfaces are distilled from abstract classes</span></div>
<div class="txt" style="position:absolute; left:76px; top:102886px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Start once the architecture is stable</span></div>
<div class="txt" style="position:absolute; left:112px; top:102953px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Remove non-public methods from class</span></div>
<div class="txt" style="position:absolute; left:112px; top:103013px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Move default implementations into an abstract class which implements</span></div>
<div class="txt" style="position:absolute; left:148px; top:103057px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">the interface</span></div>
<img id="background" style="position:absolute; left:0px; top:103665px;" width="1440" height="1080" src="page86.png"> <img id="background" style="position:absolute; left:1440px; top:103665px;" width="1440" height="1080" src="page-000086.png">
<div class="txt" style="position:absolute; left:33px; top:103772px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Running a framework</span></div>
<div class="txt" style="position:absolute; left:1046px; top:103683px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:103912px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Some frameworks are runnable by themselves</span></div>
<div class="txt" style="position:absolute; left:112px; top:103979px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">e.g. Eclipse</span></div>
<div class="txt" style="position:absolute; left:76px; top:104044px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Other frameworks must be extended to be run</span></div>
<div class="txt" style="position:absolute; left:112px; top:104111px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Swing, JUnit, MapReduce, Servlets</span></div>
<div class="txt" style="position:absolute; left:76px; top:104177px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Methods to load plugins:</span></div>
<div class="txt" style="position:absolute; left:112px; top:104244px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Client writes main()</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, creates a plugin and passes it to framework</span></div>
<div class="txt" style="position:absolute; left:112px; top:104304px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Framework writes main(), </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">client passes name of plugin as a command line</span></div>
<div class="txt" style="position:absolute; left:148px; top:104347px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">argument or environment variable</span></div>
<div class="txt" style="position:absolute; left:112px; top:104408px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">Framework looks in a magic location</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">, and then config files or .jar files are</span></div>
<div class="txt" style="position:absolute; left:148px; top:104451px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">automatically loaded and processed.</span></div>
<img id="background" style="position:absolute; left:0px; top:104884px;" width="1440" height="1080" src="page87.png"> <img id="background" style="position:absolute; left:1440px; top:104884px;" width="1440" height="1080" src="page-000087.png">
<div class="txt" style="position:absolute; left:33px; top:104991px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Example: An Eclipse plugin</span></div>
<div class="txt" style="position:absolute; left:76px; top:105131px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Eclipse is a </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">popular Java IDE.</span></div>
<div class="txt" style="position:absolute; left:76px; top:105203px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">More generally, a framework for tools</span></div>
<div class="txt" style="position:absolute; left:112px; top:105253px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">that facilitate “building, deploying</span></div>
<div class="txt" style="position:absolute; left:112px; top:105301px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">and managing software across the</span></div>
<div class="txt" style="position:absolute; left:112px; top:105349px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">lifecycle.”</span></div>
<div class="txt" style="position:absolute; left:76px; top:105419px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Plugin framework based on OSGI</span></div>
<div class="txt" style="position:absolute; left:112px; top:105469px;"><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">standard</span></div>
<div class="txt" style="position:absolute; left:76px; top:105539px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Starting point: Manifest file</span></div>
<div class="txt" style="position:absolute; left:112px; top:105606px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Plugin name</span></div>
<div class="txt" style="position:absolute; left:112px; top:105666px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Activator class</span></div>
<div class="txt" style="position:absolute; left:112px; top:105727px;"><span id="f27" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Meta-data</span></div>
<div class="txt" style="position:absolute; left:1046px; top:104902px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:106103px;" width="1440" height="1080" src="page88.png"> <img id="background" style="position:absolute; left:1440px; top:106103px;" width="1440" height="1080" src="page-000088.png">
<div class="txt" style="position:absolute; left:33px; top:106210px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Example: An Eclipse plugin</span></div>
<div class="txt" style="position:absolute; left:1046px; top:106121px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:106350px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">plugin.xml</span></div>
<div class="txt" style="position:absolute; left:112px; top:106417px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Main configuration file</span></div>
<div class="txt" style="position:absolute; left:112px; top:106477px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">XML format</span></div>
<div class="txt" style="position:absolute; left:112px; top:106538px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Lists extension points</span></div>
<div class="txt" style="position:absolute; left:76px; top:106603px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Editor extension</span></div>
<div class="txt" style="position:absolute; left:112px; top:106670px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">extension point:</span></div>
<div class="txt" style="position:absolute; left:148px; top:106713px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">org.eclipse.ui.editors</span></div>
<div class="txt" style="position:absolute; left:112px; top:106774px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">file extension</span></div>
<div class="txt" style="position:absolute; left:112px; top:106834px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">icon used in corner of editor</span></div>
<div class="txt" style="position:absolute; left:112px; top:106895px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">class name</span></div>
<div class="txt" style="position:absolute; left:112px; top:106955px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">unique id</span></div>
<div class="txt" style="position:absolute; left:148px; top:107012px;"><span id="f35" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">refer to this editor</span></div>
<div class="txt" style="position:absolute; left:148px; top:107058px;"><span id="f35" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">other plugins can extend with new</span></div>
<div class="txt" style="position:absolute; left:184px; top:107097px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">menu items, etc.!</span></div>
<div class="txt" style="position:absolute; left:735px; top:106350px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">At last, code!</span></div>
<div class="txt" style="position:absolute; left:735px; top:106422px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">XMLEditor.java</span></div>
<div class="txt" style="position:absolute; left:771px; top:106489px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Inherits TextEditor behavior</span></div>
<div class="txt" style="position:absolute; left:807px; top:106532px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">such as open, close, save,</span></div>
<div class="txt" style="position:absolute; left:807px; top:106575px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">display, select, cut/copy/paste,</span></div>
<div class="txt" style="position:absolute; left:807px; top:106618px;"><span id="f35" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">search/replace, …</span></div>
<div class="txt" style="position:absolute; left:771px; top:106679px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Extends with syntax highlighting</span></div>
<div class="txt" style="position:absolute; left:771px; top:106739px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">XMLDocumentProvider</span></div>
<div class="txt" style="position:absolute; left:807px; top:106783px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">partitions into tags and</span></div>
<div class="txt" style="position:absolute; left:807px; top:106826px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">comments</span></div>
<div class="txt" style="position:absolute; left:771px; top:106886px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">XMLConfiguration shows how</span></div>
<div class="txt" style="position:absolute; left:807px; top:106929px;"><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">to color partitions</span></div>
<img id="background" style="position:absolute; left:0px; top:107322px;" width="1440" height="1080" src="page89.png"> <img id="background" style="position:absolute; left:1440px; top:107322px;" width="1440" height="1080" src="page-000089.png">
<div class="txt" style="position:absolute; left:33px; top:107429px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Example: A JUnit Plugin</span></div>
<div class="txt" style="position:absolute; left:1046px; top:107340px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:108541px;" width="1440" height="1080" src="page90.png"> <img id="background" style="position:absolute; left:1440px; top:108541px;" width="1440" height="1080" src="page-000090.png">
<div class="txt" style="position:absolute; left:33px; top:108648px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Learning a framework</span></div>
<div class="txt" style="position:absolute; left:76px; top:108788px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Documentation</span></div>
<div class="txt" style="position:absolute; left:76px; top:108860px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Tutorials, wizards, and examples</span></div>
<div class="txt" style="position:absolute; left:76px; top:108932px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Other client applications and plugins</span></div>
<div class="txt" style="position:absolute; left:76px; top:109004px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Communities, email lists and forums</span></div>
<div class="txt" style="position:absolute; left:1046px; top:108559px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:109760px;" width="1440" height="1080" src="page91.png"> <img id="background" style="position:absolute; left:1440px; top:109760px;" width="1440" height="1080" src="page-000091.png">
<div class="txt" style="position:absolute; left:1105px; top:109778px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:219px; top:110175px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">(3) Java Collections Framework</span></div>
<img id="background" style="position:absolute; left:0px; top:110979px;" width="1440" height="1080" src="page92.png"> <img id="background" style="position:absolute; left:1440px; top:110979px;" width="1440" height="1080" src="page-000092.png">
<div class="txt" style="position:absolute; left:1046px; top:110997px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:111086px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">What is a Collection and Collection Framework?</span></div>
<div class="txt" style="position:absolute; left:76px; top:111226px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Collection: an object that groups elements</span></div>
<div class="txt" style="position:absolute; left:76px; top:111298px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Main Uses: </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">data storage and retrieval, and data transmission</span></div>
<div class="txt" style="position:absolute; left:76px; top:111370px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Familiar Examples</span></div>
<div class="txt" style="position:absolute; left:112px; top:111437px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">java.util.ArrayList</span></div>
<div class="txt" style="position:absolute; left:112px; top:111497px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">java.util.Hashtable</span></div>
<div class="txt" style="position:absolute; left:112px; top:111558px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f22" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Java.util.Queue</span></div>
<div class="txt" style="position:absolute; left:76px; top:111623px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Collection Framework: </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">a Unified Architecture for</span></div>
<div class="txt" style="position:absolute; left:112px; top:111690px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Interfaces - implementation-independence</span></div>
<div class="txt" style="position:absolute; left:112px; top:111751px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Implementations - reusable data structures</span></div>
<div class="txt" style="position:absolute; left:112px; top:111811px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Algorithms - reusable functionality</span></div>
<div class="txt" style="position:absolute; left:76px; top:111877px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Best-known examples</span></div>
<div class="txt" style="position:absolute; left:112px; top:111944px;"><span id="f20" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">C++ Standard Template Library (STL)</span></div>
<img id="background" style="position:absolute; left:0px; top:112198px;" width="1440" height="1080" src="page93.png"> <img id="background" style="position:absolute; left:1440px; top:112198px;" width="1440" height="1080" src="page-000093.png">
<div class="txt" style="position:absolute; left:33px; top:112305px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Architecture Overview</span></div>
<div class="txt" style="position:absolute; left:76px; top:112445px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Core Collection Interfaces</span></div>
<div class="txt" style="position:absolute; left:76px; top:112517px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">General-Purpose Implementations</span></div>
<div class="txt" style="position:absolute; left:76px; top:112589px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Wrapper Implementations</span></div>
<div class="txt" style="position:absolute; left:76px; top:112661px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Abstract Implementations</span></div>
<div class="txt" style="position:absolute; left:76px; top:112733px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Algorithms</span></div>
<div class="txt" style="position:absolute; left:1046px; top:112216px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:113417px;" width="1440" height="1080" src="page94.png"> <img id="background" style="position:absolute; left:1440px; top:113417px;" width="1440" height="1080" src="page-000094.png">
<div class="txt" style="position:absolute; left:33px; top:113524px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Collection Interface</span></div>
<div class="txt" style="position:absolute; left:1046px; top:113435px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:107px; top:113699px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Collection&lt;E&gt; {</span></div>
<div class="txt" style="position:absolute; left:146px; top:113742px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int size();</span></div>
<div class="txt" style="position:absolute; left:146px; top:113785px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean isEmpty();</span></div>
<div class="txt" style="position:absolute; left:146px; top:113828px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean contains(Object o);</span></div>
<div class="txt" style="position:absolute; left:146px; top:113871px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean add(E e); // Optional</span></div>
<div class="txt" style="position:absolute; left:146px; top:113915px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean remove(Object o); // Optional</span></div>
<div class="txt" style="position:absolute; left:146px; top:113958px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterator&lt;E&gt; iterator();</span></div>
<div class="txt" style="position:absolute; left:146px; top:114001px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Object[] toArray();</span></div>
<div class="txt" style="position:absolute; left:146px; top:114044px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">&lt;T&gt; T[] toArray(T a[]);</span></div>
<div class="txt" style="position:absolute; left:146px; top:114131px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Bulk Operations</span></div>
<div class="txt" style="position:absolute; left:146px; top:114174px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean containsAll(Collection&lt;?&gt; c);</span></div>
<div class="txt" style="position:absolute; left:146px; top:114217px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean addAll(Collection&lt;? Extends E&gt; c); // Optional</span></div>
<div class="txt" style="position:absolute; left:146px; top:114260px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean removeAll(Collection&lt;?&gt; c);</span></div>
<div class="txt" style="position:absolute; left:991px; top:114260px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:146px; top:114304px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean retainAll(Collection&lt;?&gt; c);</span></div>
<div class="txt" style="position:absolute; left:991px; top:114304px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:146px; top:114347px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">void clear(); // Optional</span></div>
<div class="txt" style="position:absolute; left:107px; top:114390px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:114636px;" width="1440" height="1080" src="page95.png"> <img id="background" style="position:absolute; left:1440px; top:114636px;" width="1440" height="1080" src="page-000095.png">
<div class="txt" style="position:absolute; left:33px; top:114743px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterator Interface</span></div>
<div class="txt" style="position:absolute; left:1046px; top:114654px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:114880px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Replacement for Enumeration interface </span><span id="f16" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">替换了枚举接口</span></div>
<div class="txt" style="position:absolute; left:112px; top:114950px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Adds remove method</span></div>
<div class="txt" style="position:absolute; left:112px; top:115010px;"><span id="f18" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Improves method names</span></div>
<div class="txt" style="position:absolute; left:314px; top:115145px;"><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Iterator&lt;E&gt; {</span></div>
<div class="txt" style="position:absolute; left:374px; top:115188px;"><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean hasNext();</span></div>
<div class="txt" style="position:absolute; left:374px; top:115231px;"><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">E next();</span></div>
<div class="txt" style="position:absolute; left:374px; top:115274px;"><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">void remove(); // Optional</span></div>
<div class="txt" style="position:absolute; left:314px; top:115317px;"><span id="f23" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:115855px;" width="1440" height="1080" src="page96.png"> <img id="background" style="position:absolute; left:1440px; top:115855px;" width="1440" height="1080" src="page-000096.png">
<div class="txt" style="position:absolute; left:33px; top:115962px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Set Interface</span></div>
<div class="txt" style="position:absolute; left:1046px; top:115873px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:116102px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Adds no methods to Collection!</span></div>
<div class="txt" style="position:absolute; left:76px; top:116171px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Adds stipulation: no duplicate elements </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">增加无重复元素的要求</span></div>
<div class="txt" style="position:absolute; left:76px; top:116243px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Mandates equals and hashCode calculation </span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">强制</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">equals</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">和</span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">hashCode</span><span id="f17" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">计算</span></div>
<div class="txt" style="position:absolute; left:229px; top:116329px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Set&lt;E&gt; extends Collection&lt;E&gt; {</span></div>
<div class="txt" style="position:absolute; left:229px; top:116373px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:76px; top:116534px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f8" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Set Idioms:</span></div>
<div class="txt" style="position:absolute; left:382px; top:116457px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Type&gt; s1, s2;</span></div>
<div class="txt" style="position:absolute; left:382px; top:116500px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">isSubset </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">= s1.containsAll(s2);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116544px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Type&gt; </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">union </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">= new HashSet&lt;&gt;(s1);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116587px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">union = union.addAll(s2);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116630px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Type&gt; </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">intersection </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">= new HashSet&lt;&gt;(s1);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116673px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">intersection.retainAll(s2);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116716px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Type&gt; </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">difference </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">= new HashSet&lt;&gt;(s1);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116760px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">difference.removeAll(s2);</span></div>
<div class="txt" style="position:absolute; left:382px; top:116803px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collection&lt;Type&gt; c;</span></div>
<div class="txt" style="position:absolute; left:382px; top:116846px;"><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collection&lt;Type&gt; </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">noDups </span><span id="f35" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">= new HashSet&lt;&gt;(c);</span></div>
<img id="background" style="position:absolute; left:0px; top:117074px;" width="1440" height="1080" src="page97.png"> <img id="background" style="position:absolute; left:1440px; top:117074px;" width="1440" height="1080" src="page-000097.png">
<div class="txt" style="position:absolute; left:33px; top:117181px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">List Interface: a sequence of objects</span></div>
<div class="txt" style="position:absolute; left:1046px; top:117092px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:167px; top:117356px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface List&lt;E&gt; extends Collection&lt;E&gt; {</span></div>
<div class="txt" style="position:absolute; left:206px; top:117442px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">E get(int index);</span></div>
<div class="txt" style="position:absolute; left:206px; top:117485px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">E set(int index, E element);</span></div>
<div class="txt" style="position:absolute; left:897px; top:117485px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:206px; top:117528px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">void add(int index, E element); // Optional</span></div>
<div class="txt" style="position:absolute; left:206px; top:117572px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Object remove(int index);</span></div>
<div class="txt" style="position:absolute; left:897px; top:117572px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:206px; top:117615px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean addAll(int index, Collection&lt;? extends E&gt; c);</span></div>
<div class="txt" style="position:absolute; left:901px; top:117658px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:206px; top:117744px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int indexOf(Object o);</span></div>
<div class="txt" style="position:absolute; left:206px; top:117788px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int lastIndexOf(Object o);</span></div>
<div class="txt" style="position:absolute; left:206px; top:117874px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;E&gt; subList(int from, int to);</span></div>
<div class="txt" style="position:absolute; left:206px; top:117961px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ListIterator&lt;E&gt; listIterator();</span></div>
<div class="txt" style="position:absolute; left:206px; top:118004px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ListIterator&lt;E&gt; listIterator(int index);</span></div>
<div class="txt" style="position:absolute; left:167px; top:118047px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:118293px;" width="1440" height="1080" src="page98.png"> <img id="background" style="position:absolute; left:1440px; top:118293px;" width="1440" height="1080" src="page-000098.png">
<div class="txt" style="position:absolute; left:33px; top:118400px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">List Example</span></div>
<div class="txt" style="position:absolute; left:1046px; top:118311px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:118540px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Reusable algorithms to swap and randomize:</span></div>
<div class="txt" style="position:absolute; left:178px; top:118597px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static &lt;E&gt; void </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">swap(List&lt;E&gt; </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a, int i, int j) {</span></div>
<div class="txt" style="position:absolute; left:237px; top:118641px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">E tmp = a.get(i);</span></div>
<div class="txt" style="position:absolute; left:237px; top:118684px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.set(i, a.get(j));</span></div>
<div class="txt" style="position:absolute; left:237px; top:118727px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.set(j, tmp);</span></div>
<div class="txt" style="position:absolute; left:178px; top:118770px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:178px; top:118813px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">private static Random r = new Random();</span></div>
<div class="txt" style="position:absolute; left:178px; top:118857px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public static void shuffle(List&lt;?&gt; a) {</span></div>
<div class="txt" style="position:absolute; left:237px; top:118900px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">for (int i = a.size(); i &gt; 1; i--)</span></div>
<div class="txt" style="position:absolute; left:297px; top:118943px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">swap(a, i - 1, r.nextInt(i));</span></div>
<div class="txt" style="position:absolute; left:178px; top:118986px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:76px; top:119044px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">List Idioms:</span></div>
<div class="txt" style="position:absolute; left:382px; top:119049px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Type&gt; a, b;</span></div>
<div class="txt" style="position:absolute; left:382px; top:119092px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.addAll(b); </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">// Concatenate two lists</span></div>
<div class="txt" style="position:absolute; left:382px; top:119135px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.subList(from, to).clear(); </span><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">// Range-remove</span></div>
<div class="txt" style="position:absolute; left:382px; top:119178px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">// Range-extract</span></div>
<div class="txt" style="position:absolute; left:382px; top:119222px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Type&gt; partView = a.subList(from, to);</span></div>
<div class="txt" style="position:absolute; left:382px; top:119265px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;Type&gt; part = new ArrayList&lt;&gt;(partView);</span></div>
<div class="txt" style="position:absolute; left:382px; top:119308px;"><span id="f17" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">partView.clear();</span></div>
<img id="background" style="position:absolute; left:0px; top:119512px;" width="1440" height="1080" src="page99.png"> <img id="background" style="position:absolute; left:1440px; top:119512px;" width="1440" height="1080" src="page-000099.png">
<div class="txt" style="position:absolute; left:1046px; top:119530px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:119619px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Map Interface: a Key-Value mapping</span></div>
<div class="txt" style="position:absolute; left:110px; top:119760px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Map&lt;K,V&gt; {</span></div>
<div class="txt" style="position:absolute; left:150px; top:119846px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int size();</span></div>
<div class="txt" style="position:absolute; left:150px; top:119889px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean isEmpty();</span></div>
<div class="txt" style="position:absolute; left:150px; top:119932px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean containsKey(Object key);</span></div>
<div class="txt" style="position:absolute; left:150px; top:119976px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean containsValue(Object value);</span></div>
<div class="txt" style="position:absolute; left:150px; top:120062px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Object get(Object key);</span></div>
<div class="txt" style="position:absolute; left:150px; top:120105px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Object put(K key, V value);</span></div>
<div class="txt" style="position:absolute; left:150px; top:120148px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Object remove(Object key);</span></div>
<div class="txt" style="position:absolute; left:150px; top:120192px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">void putAll(Map&lt;? Extends K, ? Extends V&gt; t);</span></div>
<div class="txt" style="position:absolute; left:150px; top:120235px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">void clear();</span></div>
<div class="txt" style="position:absolute; left:150px; top:120321px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">// Collection Views</span></div>
<div class="txt" style="position:absolute; left:150px; top:120364px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public Set&lt;K&gt; keySet();</span></div>
<div class="txt" style="position:absolute; left:150px; top:120408px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public Collection&lt;V&gt; values();</span></div>
<div class="txt" style="position:absolute; left:150px; top:120451px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet();</span></div>
<div class="txt" style="position:absolute; left:110px; top:120494px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:1118px; top:120105px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:1118px; top:120148px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:1118px; top:120192px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<div class="txt" style="position:absolute; left:1118px; top:120235px;"><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// Optional</span></div>
<img id="background" style="position:absolute; left:0px; top:120731px;" width="1440" height="1080" src="page100.png"> <img id="background" style="position:absolute; left:1440px; top:120731px;" width="1440" height="1080" src="page-000100.png">
<div class="txt" style="position:absolute; left:33px; top:120838px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Map Idioms</span></div>
<div class="txt" style="position:absolute; left:1046px; top:120749px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:88px; top:120994px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">// Iterate over all keys in Map m</span></div>
<div class="txt" style="position:absolute; left:88px; top:121037px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Map&lt;Key, Val&gt; m;</span></div>
<div class="txt" style="position:absolute; left:88px; top:121080px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">for (iterator&lt;Key&gt; i = m.keySet().iterator(); i.hasNext(); )</span></div>
<div class="txt" style="position:absolute; left:147px; top:121123px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">System.out.println(i.next());</span></div>
<div class="txt" style="position:absolute; left:88px; top:121210px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">// As of Java 5 (2004)</span></div>
<div class="txt" style="position:absolute; left:88px; top:121253px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">for (Key k : m.keySet())</span></div>
<div class="txt" style="position:absolute; left:147px; top:121296px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">System.out.println(i.next());</span></div>
<div class="txt" style="position:absolute; left:88px; top:121379px;"><span id="f31" style="font-size:36px;vertical-align:baseline;color:rgba(50,50,205,1);">// “Map algebra“ </span><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(50,50,205,1);">代数操作</span></div>
<div class="txt" style="position:absolute; left:88px; top:121426px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Map&lt;Key, Val&gt; a, b;</span></div>
<div class="txt" style="position:absolute; left:88px; top:121465px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">boolean isSubMap = a.entrySet().containsAll(b.entrySet());//</span><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">子集</span></div>
<div class="txt" style="position:absolute; left:88px; top:121555px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.keySet().retainAll(b.keySet());</span></div>
<div class="txt" style="position:absolute; left:88px; top:121595px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;Key&gt; commonKeys = new HashSet&lt;&gt;(a.keySet()); //</span><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">交集</span></div>
<div class="txt" style="position:absolute; left:88px; top:121685px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">//Remove keys from a that have mappings in b</span></div>
<div class="txt" style="position:absolute; left:88px; top:121725px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">a.keySet().removeAll(b.keySet()); //</span><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">差集</span></div>
<img id="background" style="position:absolute; left:0px; top:121950px;" width="1440" height="1080" src="page101.png"> <img id="background" style="position:absolute; left:1440px; top:121950px;" width="1440" height="1080" src="page-000101.png">
<div class="txt" style="position:absolute; left:33px; top:122057px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">General Purpose Implementations</span></div>
<div class="txt" style="position:absolute; left:1046px; top:121968px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:122197px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Consistent Naming and Behavior</span></div>
<img id="background" style="position:absolute; left:0px; top:123169px;" width="1440" height="1080" src="page102.png"> <img id="background" style="position:absolute; left:1440px; top:123169px;" width="1440" height="1080" src="page-000102.png">
<div class="txt" style="position:absolute; left:33px; top:123276px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Choosing an Implementation</span></div>
<div class="txt" style="position:absolute; left:1046px; top:123187px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:123416px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Set</span></div>
<div class="txt" style="position:absolute; left:112px; top:123482px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">HashSet </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-- O(1) access, no order guarantee</span></div>
<div class="txt" style="position:absolute; left:112px; top:123543px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">TreeSet </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-- O(log n) access, sorted</span></div>
<div class="txt" style="position:absolute; left:76px; top:123609px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Map</span></div>
<div class="txt" style="position:absolute; left:112px; top:123675px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">HashMap </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-- (See </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">HashSet</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:112px; top:123736px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">TreeMap </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-- (See </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">TreeSet</span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">)</span></div>
<div class="txt" style="position:absolute; left:76px; top:123802px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span></div>
<div class="txt" style="position:absolute; left:112px; top:123868px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">ArrayList </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-- O(1) random access, O(n) insert/remove</span></div>
<div class="txt" style="position:absolute; left:112px; top:123929px;"><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">LinkedList </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">-- O(n) random access, O(1) insert/remove;</span></div>
<div class="txt" style="position:absolute; left:148px; top:123986px;"><span id="f48" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Use for queues and deques (no longer a good idea!)</span></div>
<img id="background" style="position:absolute; left:0px; top:124388px;" width="1440" height="1080" src="page103.png"> <img id="background" style="position:absolute; left:1440px; top:124388px;" width="1440" height="1080" src="page-000103.png">
<div class="txt" style="position:absolute; left:33px; top:124495px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Unmodifiable Wrappers</span></div>
<div class="txt" style="position:absolute; left:76px; top:124635px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Anonymous implementations</span></div>
<div class="txt" style="position:absolute; left:76px; top:124707px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Static factory methods</span></div>
<div class="txt" style="position:absolute; left:76px; top:124779px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">One for each core interface</span></div>
<div class="txt" style="position:absolute; left:76px; top:124851px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Provide read-only access </span><span id="f23" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">– </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable!</span></div>
<div class="txt" style="position:absolute; left:1046px; top:124406px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:124995px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">We have discussed these wrapper in Chapter 3</span></div>
<img id="background" style="position:absolute; left:0px; top:125607px;" width="1440" height="1080" src="page104.png"> <img id="background" style="position:absolute; left:1440px; top:125607px;" width="1440" height="1080" src="page-000104.png">
<div class="txt" style="position:absolute; left:33px; top:125714px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Synchronization Wrappers</span></div>
<div class="txt" style="position:absolute; left:1046px; top:125625px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:125854px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Not thread-safe!</span></div>
<div class="txt" style="position:absolute; left:76px; top:125926px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Synchronization Wrappers: a new approach to thread safety</span></div>
<div class="txt" style="position:absolute; left:112px; top:125993px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Anonymous implementations, one per core interface</span></div>
<div class="txt" style="position:absolute; left:112px; top:126053px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Static factories take collection of appropriate type</span></div>
<div class="txt" style="position:absolute; left:112px; top:126114px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Thread-safety assured if all access through wrapper</span></div>
<div class="txt" style="position:absolute; left:112px; top:126174px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Must manually synchronize iteration</span></div>
<div class="txt" style="position:absolute; left:76px; top:126237px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f31" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">It was new then; it’s old now! </span><span id="f34" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">同步包装器的方式现在已经过时</span></div>
<div class="txt" style="position:absolute; left:112px; top:126307px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Synch wrappers are largely obsolete</span></div>
<div class="txt" style="position:absolute; left:112px; top:126363px;"><span id="f19" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Made obsolete by concurrent collections </span><span id="f34" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">已经被并行容器所替代</span></div>
<div class="txt" style="position:absolute; left:76px; top:126554px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(255,0,0,1);">To be discussed in Chapter 10</span></div>
<img id="background" style="position:absolute; left:0px; top:126826px;" width="1440" height="1080" src="page105.png"> <img id="background" style="position:absolute; left:1440px; top:126826px;" width="1440" height="1080" src="page-000105.png">
<div class="txt" style="position:absolute; left:33px; top:126933px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Synchronization Wrapper Example</span></div>
<div class="txt" style="position:absolute; left:1046px; top:126844px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:137px; top:127130px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Set&lt;String&gt; s = Collections.synchronizedSet(new</span></div>
<div class="txt" style="position:absolute; left:137px; top:127174px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">HashSet&lt;&gt;());</span></div>
<div class="txt" style="position:absolute; left:137px; top:127217px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:137px; top:127260px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">s.add("wombat"); // Thread-safe</span></div>
<div class="txt" style="position:absolute; left:137px; top:127303px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:137px; top:127346px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">synchronized(s) {</span></div>
<div class="txt" style="position:absolute; left:176px; top:127390px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Iterator&lt;String&gt; i = </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">s.iterator(); // In synch block!</span></div>
<div class="txt" style="position:absolute; left:176px; top:127433px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">while (i.hasNext())</span></div>
<div class="txt" style="position:absolute; left:236px; top:127476px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">System.out.println(i.next());</span></div>
<div class="txt" style="position:absolute; left:137px; top:127519px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:137px; top:127606px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">// In Java 5 (post-2004)</span></div>
<div class="txt" style="position:absolute; left:137px; top:127649px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">synchronized(s) {</span></div>
<div class="txt" style="position:absolute; left:176px; top:127692px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">for (String t : s)</span></div>
<div class="txt" style="position:absolute; left:236px; top:127735px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">System.out.println(i.next());</span></div>
<div class="txt" style="position:absolute; left:137px; top:127779px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:128045px;" width="1440" height="1080" src="page106.png"> <img id="background" style="position:absolute; left:1440px; top:128045px;" width="1440" height="1080" src="page-000106.png">
<div class="txt" style="position:absolute; left:33px; top:128152px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Convenience Implementations</span></div>
<div class="txt" style="position:absolute; left:1046px; top:128063px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:128292px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">Arrays.asList(E[] a)</span></div>
<div class="txt" style="position:absolute; left:112px; top:128358px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Allows array to be "viewed" as </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List</span></div>
<div class="txt" style="position:absolute; left:112px; top:128419px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Bridge to Collection-based APIs</span></div>
<div class="txt" style="position:absolute; left:76px; top:128485px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">EMPTY_SET, EMPTY_LIST, EMPTY_MAP</span></div>
<div class="txt" style="position:absolute; left:112px; top:128548px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable constants </span><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">不支持</span><span id="f32" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">add</span><span id="f29" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,255,1);">操作</span></div>
<div class="txt" style="position:absolute; left:76px; top:128615px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">singleton(E o) </span><span id="f29" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">返回只包含指定对象的不可变集</span></div>
<div class="txt" style="position:absolute; left:112px; top:128684px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable set with specified object</span></div>
<div class="txt" style="position:absolute; left:76px; top:128747px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:26px;vertical-align:baseline;color:rgba(0,0,0,1);">nCopies(int n, T o) </span><span id="f29" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">返回由指定对象</span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">n</span><span id="f29" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">个副本构成的不可变</span><span id="f32" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">List</span><span id="f29" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">。</span></div>
<div class="txt" style="position:absolute; left:112px; top:128816px;"><span id="f16" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Immutable list with </span><span id="f13" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">n </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">copies of object</span></div>
<img id="background" style="position:absolute; left:0px; top:129264px;" width="1440" height="1080" src="page107.png"> <img id="background" style="position:absolute; left:1440px; top:129264px;" width="1440" height="1080" src="page-000107.png">
<div class="txt" style="position:absolute; left:33px; top:129371px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Reusable Algorithms</span></div>
<div class="txt" style="position:absolute; left:1046px; top:129282px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:65px; top:129625px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static &lt;T extends Comparable&lt;? super T&gt;&gt; void </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">sort(List&lt;T&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129668px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static int </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">binarySearch(List </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list, Object key);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129712px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static &lt;T extends Comparable&lt;? super T&gt;&gt; T </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">min(Collection&lt;T&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">coll);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129755px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static &lt;T extends Comparable&lt;? super T&gt;&gt; T </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">max(Collection&lt;T&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">coll);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129798px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static &lt;E&gt; void </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">fill(List&lt;E&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list, E e);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129841px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static &lt;E&gt; void </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">copy(List&lt;E&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">dest, List&lt;? Extends E&gt; src);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129884px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static void </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">reverse(List&lt;?&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list);</span></div>
<div class="txt" style="position:absolute; left:65px; top:129928px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static void </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">shuffle(List&lt;?&gt; </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">list);</span></div>
<img id="background" style="position:absolute; left:0px; top:130483px;" width="1440" height="1080" src="page108.png"> <img id="background" style="position:absolute; left:1440px; top:130483px;" width="1440" height="1080" src="page-000108.png">
<div class="txt" style="position:absolute; left:1046px; top:130501px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:130590px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Example 1: Sorting lists of comparable elements</span></div>
<div class="txt" style="position:absolute; left:167px; top:130844px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;String&gt; strings; // Elements type: String</span></div>
<div class="txt" style="position:absolute; left:167px; top:130887px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:167px; top:130931px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.sort(strings); // </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">Alphabetical order</span></div>
<div class="txt" style="position:absolute; left:167px; top:131017px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">LinkedList&lt;Date&gt; dates; // Elements type: Date</span></div>
<div class="txt" style="position:absolute; left:167px; top:131060px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">...</span></div>
<div class="txt" style="position:absolute; left:167px; top:131103px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.sort(dates); // </span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">Chronological order</span></div>
<div class="txt" style="position:absolute; left:167px; top:131190px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,255,1);">// Comparable interface (Infrastructure)</span></div>
<div class="txt" style="position:absolute; left:167px; top:131233px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Comparable&lt;E extends Comparable&lt;E&gt;&gt; {</span></div>
<div class="txt" style="position:absolute; left:226px; top:131276px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">int compareTo(Object o);</span></div>
<div class="txt" style="position:absolute; left:167px; top:131320px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:131702px;" width="1440" height="1080" src="page109.png"> <img id="background" style="position:absolute; left:1440px; top:131702px;" width="1440" height="1080" src="page-000109.png">
<div class="txt" style="position:absolute; left:1046px; top:131720px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:33px; top:131809px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Algorithm Example 2: Sorting with a comparator</span></div>
<div class="txt" style="position:absolute; left:99px; top:132006px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">List&lt;String&gt; strings; // Element type: String</span></div>
<div class="txt" style="position:absolute; left:99px; top:132049px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.sort(strings, Collections.ReverseOrder()); </span><span id="f29" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">//</span><span id="f15" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">采用反序比较器</span></div>
<div class="txt" style="position:absolute; left:99px; top:132219px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">//</span><span id="f15" style="font-size:36px;vertical-align:baseline;color:rgba(50,50,205,1);">自定义比较器：</span><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(50,50,205,1);">Case-independent alphabetical order</span></div>
<div class="txt" style="position:absolute; left:99px; top:132266px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">static Comparator&lt;String&gt; cia = new Comparator&lt;&gt;() {</span></div>
<div class="txt" style="position:absolute; left:158px; top:132309px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public int compare(String c1, String c2) {</span></div>
<div class="txt" style="position:absolute; left:217px; top:132352px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">return c1.toLowerCase().compareTo(c2.toLowerCase());</span></div>
<div class="txt" style="position:absolute; left:158px; top:132395px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<div class="txt" style="position:absolute; left:99px; top:132438px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">};</span></div>
<div class="txt" style="position:absolute; left:99px; top:132525px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Collections.sort(strings, cia);</span></div>
<div class="txt" style="position:absolute; left:99px; top:132611px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public interface Comparator&lt;T&gt; {</span></div>
<div class="txt" style="position:absolute; left:158px; top:132654px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">public int compare(T o1, T o2);</span></div>
<div class="txt" style="position:absolute; left:99px; top:132698px;"><span id="f11" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">}</span></div>
<img id="background" style="position:absolute; left:0px; top:132921px;" width="1440" height="1080" src="page110.png"> <img id="background" style="position:absolute; left:1440px; top:132921px;" width="1440" height="1080" src="page-000110.png">
<div class="txt" style="position:absolute; left:33px; top:133028px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">Compatibility</span></div>
<div class="txt" style="position:absolute; left:76px; top:133168px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Old and new collections interoperate freely</span></div>
<div class="txt" style="position:absolute; left:1046px; top:132939px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<div class="txt" style="position:absolute; left:76px; top:133309px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Upward Compatibility </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">向上兼容</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">/</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">向前兼容</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">(forward)</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">，站在旧版软件</span></div>
<div class="txt" style="position:absolute; left:112px; top:133357px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的立场，基于旧方法编写的软件不经修改就能在新版环境中运行</span></div>
<div class="txt" style="position:absolute; left:112px; top:133427px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Vector&lt;E&gt; implements List&lt;E&gt;</span></div>
<div class="txt" style="position:absolute; left:112px; top:133487px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Hashtable&lt;K,V&gt; implements Map&lt;K,V&gt;</span></div>
<div class="txt" style="position:absolute; left:112px; top:133548px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">Arrays.asList(myArray)</span></div>
<div class="txt" style="position:absolute; left:76px; top:133611px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Backward Compatibility </span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">向后兼容</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">/</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">向下兼容</span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">(downward)</span><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">，站在新版</span></div>
<div class="txt" style="position:absolute; left:112px; top:133662px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">本的立场讨论对过去版本的兼容性问题，新版软件中可以支持旧版中</span></div>
<div class="txt" style="position:absolute; left:112px; top:133707px;"><span id="f18" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,255,1);">的方法</span></div>
<div class="txt" style="position:absolute; left:112px; top:133776px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">myCollection.toArray()</span></div>
<div class="txt" style="position:absolute; left:112px; top:133837px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">new Vector&lt;&gt;(myCollection)</span></div>
<div class="txt" style="position:absolute; left:112px; top:133897px;"><span id="f30" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f32" style="font-size:15px;vertical-align:baseline;color:rgba(0,0,0,1);">new HashTable&lt;&gt;(myMap)</span></div>
<img id="background" style="position:absolute; left:0px; top:134140px;" width="1440" height="1080" src="page111.png"> <img id="background" style="position:absolute; left:1440px; top:134140px;" width="1440" height="1080" src="page-000111.png">
<div class="txt" style="position:absolute; left:33px; top:134247px;"><span id="f8" style="font-size:60px;vertical-align:baseline;color:rgba(0,0,0,1);">API Design Guidelines</span></div>
<div class="txt" style="position:absolute; left:76px; top:134384px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Avoid ad hoc collections </span><span id="f15" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">避免特定的容器类型</span></div>
<div class="txt" style="position:absolute; left:112px; top:134454px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Input parameter type:</span></div>
<div class="txt" style="position:absolute; left:148px; top:134510px;"><span id="f20" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Any collection interface (Collection, Map best)</span></div>
<div class="txt" style="position:absolute; left:148px; top:134557px;"><span id="f20" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Array may sometimes be preferable</span></div>
<div class="txt" style="position:absolute; left:112px; top:134606px;"><span id="f17" style="font-size:36px;vertical-align:baseline;color:rgba(255,130,44,1);">– </span><span id="f8" style="font-size:36px;vertical-align:baseline;color:rgba(0,0,0,1);">Output value type:</span></div>
<div class="txt" style="position:absolute; left:148px; top:134663px;"><span id="f20" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Any collection interface or class</span></div>
<div class="txt" style="position:absolute; left:148px; top:134709px;"><span id="f20" style="font-size:31px;vertical-align:baseline;color:rgba(255,130,44,1);">• </span><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Array</span></div>
<div class="txt" style="position:absolute; left:76px; top:134836px;"><span id="f11" style="font-size:40px;vertical-align:baseline;color:rgba(255,130,44,1);">▪ </span><span id="f13" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">Provide adapters for your legacy collections</span></div>
<div class="txt" style="position:absolute; left:1046px; top:134158px;"><span id="f8" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">5.2 Construction for Reuse</span></div>
<img id="background" style="position:absolute; left:0px; top:135359px;" width="1440" height="1080" src="page112.png"> <img id="background" style="position:absolute; left:1440px; top:135359px;" width="1440" height="1080" src="page-000112.png">
<div class="txt" style="position:absolute; left:1105px; top:135377px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:563px; top:135774px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">Summary</span></div>
<img id="background" style="position:absolute; left:0px; top:136578px;" width="1440" height="1080" src="page113.png"> <img id="background" style="position:absolute; left:1440px; top:136578px;" width="1440" height="1080" src="page-000113.png">
<div class="txt" style="position:absolute; left:1105px; top:136596px;"><span id="f9" style="font-size:31px;vertical-align:baseline;color:rgba(0,0,0,1);">Software Construction</span></div>
<div class="txt" style="position:absolute; left:590px; top:136993px;"><span id="f9" style="font-size:72px;vertical-align:baseline;color:rgba(0,0,0,1);">The end</span></div>
<div class="txt" style="position:absolute; left:607px; top:137247px;"><span id="f9" style="font-size:40px;vertical-align:baseline;color:rgba(0,0,0,1);">April 7, 2019</span></div>
</body></html>